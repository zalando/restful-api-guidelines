<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.7.1">
<meta name="keywords" content="10M GmbH, Guidelines, RESTful, API, Events, Schema">
<meta name="copyright" content="CC-BY-SA 3.0">
<title>10m RESTful API Guidelines based on Zalando RESTful API and Event Scheme Guidelines</title>
<style>
/*! normalize.css v2.1.2 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address `[hidden]` styling not present in IE 8/9. Hide the `template` element in IE, Safari, and Firefox < 22. */
[hidden], template { display: none; }

script { display: none !important; }

/* ========================================================================== Base ========================================================================== */
/** 1. Set default font family to sans-serif. 2. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { font-family: sans-serif; /* 1 */ -ms-text-size-adjust: 100%; /* 2 */ -webkit-text-size-adjust: 100%; /* 2 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Remove the gray background color from active links in IE 10. */
a { background: transparent; }

/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

meta.foundation-mq-small { font-family: "only screen and (min-width: 768px)"; width: 768px; }

meta.foundation-mq-medium { font-family: "only screen and (min-width:1280px)"; width: 1280px; }

meta.foundation-mq-large { font-family: "only screen and (min-width:1440px)"; width: 1440px; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 100%; }

body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

object, svg { display: inline-block; vertical-align: middle; }

.center { margin-left: auto; margin-right: auto; }

.spread { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { line-height: 1.4; color: #6f6f6f; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #2ba6cb; text-decoration: none; line-height: inherit; }
a:hover, a:focus { color: #2795b6; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: bold; font-style: normal; color: #222222; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #6f6f6f; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: bold; color: #7f0a0c; }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }

ul, ol { margin-left: 1.5em; }
ul.no-bullet, ol.no-bullet { margin-left: 1.5em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #222222; border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: 0.8125em; color: #555555; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #555555; }

blockquote, blockquote p { line-height: 1.6; color: #6f6f6f; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Tables */
table { background: white; margin-bottom: 1.25em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.4; }

body { -moz-osx-font-smoothing: grayscale; -webkit-font-smoothing: antialiased; tab-size: 4; }

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

*:not(pre) > code { font-size: inherit; font-style: normal !important; letter-spacing: 0; padding: 0; line-height: inherit; word-wrap: break-word; }
*:not(pre) > code.nobreak { word-wrap: normal; }
*:not(pre) > code.nowrap { white-space: nowrap; }

pre, pre > code { line-height: 1.4; color: black; font-family: monospace, serif; font-weight: normal; }

em em { font-style: normal; }

strong strong { font-weight: normal; }

.keyseq { color: #555555; }

kbd { font-family: Consolas, "Liberation Mono", Courier, monospace; display: inline-block; color: #222222; font-size: 0.65em; line-height: 1.45; background-color: #f7f7f7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; margin: 0 0.15em; padding: 0.2em 0.5em; vertical-align: middle; position: relative; top: -0.1em; white-space: nowrap; }

.keyseq kbd:first-child { margin-left: 0; }

.keyseq kbd:last-child { margin-right: 0; }

.menuseq, .menuref { color: #000; }

.menuseq b:not(.caret), .menuref { font-weight: inherit; }

.menuseq { word-spacing: -0.02em; }
.menuseq b.caret { font-size: 1.25em; line-height: 0.8; }
.menuseq i.caret { font-weight: bold; text-align: center; width: 0.45em; }

b.button:before, b.button:after { position: relative; top: -1px; font-weight: normal; }

b.button:before { content: "["; padding: 0 3px 0 2px; }

b.button:after { content: "]"; padding: 0 2px 0 3px; }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#content { margin-top: 1.25em; }

#content:before { content: none; }

#header > h1:first-child { color: black; margin-top: 2.25rem; margin-bottom: 0; }
#header > h1:first-child + #toc { margin-top: 8px; border-top: 1px solid #dddddd; }
#header > h1:only-child, body.toc2 #header > h1:nth-last-child(2) { border-bottom: 1px solid #dddddd; padding-bottom: 8px; }
#header .details { border-bottom: 1px solid #dddddd; line-height: 1.45; padding-top: 0.25em; padding-bottom: 0.25em; padding-left: 0.25em; color: #555555; display: -ms-flexbox; display: -webkit-flex; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; }
#header .details span:first-child { margin-left: -0.125em; }
#header .details span.email a { color: #6f6f6f; }
#header .details br { display: none; }
#header .details br + span:before { content: "\00a0\2013\00a0"; }
#header .details br + span.author:before { content: "\00a0\22c5\00a0"; color: #6f6f6f; }
#header .details br + span#revremark:before { content: "\00a0|\00a0"; }
#header #revnumber { text-transform: capitalize; }
#header #revnumber:after { content: "\00a0"; }

#content > h1:first-child:not([class]) { color: black; border-bottom: 1px solid #dddddd; padding-bottom: 8px; margin-top: 0; padding-top: 1rem; margin-bottom: 1.25rem; }

#toc { border-bottom: 1px solid #dddddd; padding-bottom: 0.5em; }
#toc > ul { margin-left: 0.125em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin: 0.5em 0; }
#toc ul { font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; list-style-type: none; }
#toc li { line-height: 1.3334; margin-top: 0.3334em; }
#toc a { text-decoration: none; }
#toc a:active { text-decoration: underline; }

#toctitle { color: #6f6f6f; font-size: 1.2em; }

@media only screen and (min-width: 768px) { #toctitle { font-size: 1.375em; }
  body.toc2 { padding-left: 15em; padding-right: 0; }
  #toc.toc2 { margin-top: 0 !important; background-color: #f2f2f2; position: fixed; width: 15em; left: 0; top: 0; border-right: 1px solid #dddddd; border-top-width: 0 !important; border-bottom-width: 0 !important; z-index: 1000; padding: 1.25em 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; margin-bottom: 0.8rem; font-size: 1.2em; }
  #toc.toc2 > ul { font-size: 0.9em; margin-bottom: 0; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 15em; }
  body.toc2.toc-right #toc.toc2 { border-right-width: 0; border-left: 1px solid #dddddd; left: auto; right: 0; } }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; padding-right: 0; }
  #toc.toc2 { width: 20em; }
  #toc.toc2 #toctitle { font-size: 1.375em; }
  #toc.toc2 > ul { font-size: 0.95em; }
  #toc.toc2 ul ul { padding-left: 1.25em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 0; border-radius: 0; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }

#footer { max-width: 100%; background-color: #222222; padding: 1.25em; }

#footer-text { color: #dddddd; line-height: 1.44; }

.sect1 { padding-bottom: 0.625em; }

@media only screen and (min-width: 768px) { .sect1 { padding-bottom: 1.25em; } }
.sect1 + .sect1 { border-top: 1px solid #dddddd; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; z-index: 1001; width: 1.5ex; margin-left: -1.5ex; display: block; text-decoration: none !important; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: "\00A7"; font-size: 0.85em; display: block; padding-top: 0.1em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #222222; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #151515; }

.audioblock, .imageblock, .literalblock, .listingblock, .stemblock, .videoblock { margin-bottom: 1.25em; }

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-rendering: optimizeLegibility; text-align: left; }

table.tableblock > caption.title { white-space: nowrap; overflow: visible; max-width: 0; }

.paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { color: black; }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border-collapse: separate; border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: initial; }
.admonitionblock > table td.icon .title { font-weight: bold; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #555555; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 0; border-radius: 0; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 0; border-radius: 0; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock > .content > .title { color: #6f6f6f; margin-top: 0; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.literalblock pre, .listingblock pre:not(.highlight), .listingblock pre[class="highlight"], .listingblock pre[class^="highlight "], .listingblock pre.CodeRay, .listingblock pre.prettyprint { background: #eeeeee; }
.sidebarblock .literalblock pre, .sidebarblock .listingblock pre:not(.highlight), .sidebarblock .listingblock pre[class="highlight"], .sidebarblock .listingblock pre[class^="highlight "], .sidebarblock .listingblock pre.CodeRay, .sidebarblock .listingblock pre.prettyprint { background: #f2f1f1; }

.literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { border: 1px solid #cccccc; -webkit-border-radius: 0; border-radius: 0; word-wrap: break-word; padding: 0.8em 0.8em 0.65em 0.8em; font-size: 0.8125em; }
.literalblock pre.nowrap, .literalblock pre[class].nowrap, .listingblock pre.nowrap, .listingblock pre[class].nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
@media only screen and (min-width: 768px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 0.90625em; } }
@media only screen and (min-width: 1280px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 1em; } }

.literalblock.output pre { color: #eeeeee; background-color: black; }

.listingblock pre.highlightjs { padding: 0; }
.listingblock pre.highlightjs > code { padding: 0.8em 0.8em 0.65em 0.8em; -webkit-border-radius: 0; border-radius: 0; }

.listingblock > .content { position: relative; }

.listingblock code[data-lang]:before { display: none; content: attr(data-lang); position: absolute; font-size: 0.75em; top: 0.425rem; right: 0.5rem; line-height: 1; text-transform: uppercase; color: #999; }

.listingblock:hover code[data-lang]:before { display: block; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: "$"; }

table.pyhltable { border-collapse: separate; border: 0; margin-bottom: 0; background: none; }

table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; line-height: 1.4; }

table.pyhltable td.code { padding-left: .75em; padding-right: 0; }

pre.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #dddddd; }

pre.pygments .lineno { display: inline-block; margin-right: .25em; }

table.pyhltable .linenodiv { background: none !important; padding-right: 0 !important; }

.quoteblock { margin: 0 1em 1.25em 1.5em; display: table; }
.quoteblock > .title { margin-left: -1.5em; margin-bottom: 0.75em; }
.quoteblock blockquote, .quoteblock blockquote p { color: #6f6f6f; font-size: 1.15rem; line-height: 1.75; word-spacing: 0.1em; letter-spacing: 0; font-style: italic; text-align: justify; }
.quoteblock blockquote { margin: 0; padding: 0; border: 0; }
.quoteblock blockquote:before { content: "\201c"; float: left; font-size: 2.75em; font-weight: bold; line-height: 0.6em; margin-left: -0.6em; color: #6f6f6f; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: 0.5em; margin-right: 0.5ex; text-align: right; }
.quoteblock .quoteblock { margin-left: 0; margin-right: 0; padding: 0.5em 0; border-left: 3px solid #555555; }
.quoteblock .quoteblock blockquote { padding: 0 0 0 0.75em; }
.quoteblock .quoteblock blockquote:before { display: none; }

.verseblock { margin: 0 1em 1.25em 1em; }
.verseblock pre { font-family: "Open Sans", "DejaVu Sans", sans; font-size: 1.15rem; color: #6f6f6f; font-weight: 300; text-rendering: optimizeLegibility; }
.verseblock pre strong { font-weight: 400; }
.verseblock .attribution { margin-top: 1.25rem; margin-left: 0.5ex; }

.quoteblock .attribution, .verseblock .attribution { font-size: 0.8125em; line-height: 1.45; font-style: italic; }
.quoteblock .attribution br, .verseblock .attribution br { display: none; }
.quoteblock .attribution cite, .verseblock .attribution cite { display: block; letter-spacing: -0.025em; color: #555555; }

.quoteblock.abstract { margin: 0 0 1.25em 0; display: block; }
.quoteblock.abstract blockquote, .quoteblock.abstract blockquote p { text-align: left; word-spacing: 0; }
.quoteblock.abstract blockquote:before, .quoteblock.abstract blockquote p:first-of-type:before { display: none; }

table.tableblock { max-width: 100%; border-collapse: separate; }
table.tableblock td > .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child { margin-bottom: 0; }

table.tableblock, th.tableblock, td.tableblock { border: 0 solid #dddddd; }

table.grid-all > thead > tr > .tableblock, table.grid-all > tbody > tr > .tableblock { border-width: 0 1px 1px 0; }

table.grid-all > tfoot > tr > .tableblock { border-width: 1px 1px 0 0; }

table.grid-cols > * > tr > .tableblock { border-width: 0 1px 0 0; }

table.grid-rows > thead > tr > .tableblock, table.grid-rows > tbody > tr > .tableblock { border-width: 0 0 1px 0; }

table.grid-rows > tfoot > tr > .tableblock { border-width: 1px 0 0 0; }

table.grid-all > * > tr > .tableblock:last-child, table.grid-cols > * > tr > .tableblock:last-child { border-right-width: 0; }

table.grid-all > tbody > tr:last-child > .tableblock, table.grid-all > thead:last-child > tr > .tableblock, table.grid-rows > tbody > tr:last-child > .tableblock, table.grid-rows > thead:last-child > tr > .tableblock { border-bottom-width: 0; }

table.frame-all { border-width: 1px; }

table.frame-sides { border-width: 0 1px; }

table.frame-topbot { border-width: 1px 0; }

th.halign-left, td.halign-left { text-align: left; }

th.halign-right, td.halign-right { text-align: right; }

th.halign-center, td.halign-center { text-align: center; }

th.valign-top, td.valign-top { vertical-align: top; }

th.valign-bottom, td.valign-bottom { vertical-align: bottom; }

th.valign-middle, td.valign-middle { vertical-align: middle; }

table thead th, table tfoot th { font-weight: bold; }

tbody tr th { display: table-cell; line-height: 1.4; background: whitesmoke; }

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p { color: #222222; font-weight: bold; }

p.tableblock > code:only-child { background: none; padding: 0; }

p.tableblock { font-size: 1em; }

td > div.verse { white-space: pre; }

ol { margin-left: 1.75em; }

ul li ol { margin-left: 1.5em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }

ul.checklist, ul.none, ol.none, ul.no-bullet, ol.no-bullet, ol.unnumbered, ul.unstyled, ol.unstyled { list-style-type: none; }

ul.no-bullet, ol.no-bullet, ol.unnumbered { margin-left: 0.625em; }

ul.unstyled, ol.unstyled { margin-left: 0; }

ul.checklist { margin-left: 0.625em; }

ul.checklist li > p:first-child > .fa-square-o:first-child, ul.checklist li > p:first-child > .fa-check-square-o:first-child { width: 1.25em; font-size: 0.8em; position: relative; bottom: 0.125em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }

ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1, td.hdlist2 { vertical-align: top; padding: 0 0.625em; }

td.hdlist1 { font-weight: bold; padding-bottom: 1.25em; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0.4em 0.75em 0 0.75em; line-height: 1; vertical-align: top; }
.colist > table tr > td:first-of-type img { max-width: initial; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }

.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

a.image { text-decoration: none; display: inline-block; }
a.image object { pointer-events: none; }

sup.footnote, sup.footnoteref { font-size: 0.875em; position: static; vertical-align: super; }
sup.footnote a, sup.footnoteref a { text-decoration: none; }
sup.footnote a:active, sup.footnoteref a:active { text-decoration: underline; }

#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -0.25em 0 0.75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em 0 0.225em; line-height: 1.3334; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.05em; margin-bottom: 0.2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }
#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }

.gist .file-data > table { border: 0; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > .fa { cursor: default; }
a span.icon > .fa { cursor: inherit; }

.admonitionblock td.icon [class^="fa icon-"] { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #207c98; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum[data-value] { display: inline-block; color: #fff !important; background-color: #222222; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; font-size: 0.75em; width: 1.67em; height: 1.67em; line-height: 1.67em; font-family: "Open Sans", "DejaVu Sans", sans-serif; font-style: normal; font-weight: bold; }
.conum[data-value] * { color: #fff !important; }
.conum[data-value] + b { display: none; }
.conum[data-value]:after { content: attr(data-value); }
pre .conum[data-value] { position: relative; top: -0.125em; }

b.conum * { color: inherit !important; }

.conum:not([data-value]):empty { display: none; }

.literalblock pre, .listingblock pre { background: #eeeeee; }

@media screen and (max-width: 768px) { #toc.toc2 { display: none; } }
object, svg { display: inline-block; vertical-align: middle; }

.center { margin-left: auto; margin-right: auto; }

.spread { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { line-height: 1.4; color: #6f6f6f; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #2ba6cb; text-decoration: none; line-height: inherit; }
a:hover, a:focus { color: #2795b6; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: bold; font-style: normal; color: #404040; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #6f6f6f; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: bold; color: #7f0a0c; }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }

ul, ol { margin-left: 1.5em; }
ul.no-bullet, ol.no-bullet { margin-left: 1.5em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #222222; border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: 0.8125em; color: #555555; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #555555; }

blockquote, blockquote p { line-height: 1.6; color: #6f6f6f; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Tables */
table { background: white; margin-bottom: 1.25em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.4; }

body { -moz-osx-font-smoothing: grayscale; -webkit-font-smoothing: antialiased; tab-size: 4; }

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

*:not(pre) > code { font-size: inherit; font-style: normal !important; letter-spacing: 0; padding: 0; line-height: inherit; word-wrap: break-word; }
*:not(pre) > code.nobreak { word-wrap: normal; }
*:not(pre) > code.nowrap { white-space: nowrap; }

pre, pre > code { line-height: 1.4; color: black; font-family: monospace, serif; font-weight: normal; }

em em { font-style: normal; }

strong strong { font-weight: normal; }

.keyseq { color: #555555; }

kbd { font-family: Consolas, "Liberation Mono", Courier, monospace; display: inline-block; color: #222222; font-size: 0.65em; line-height: 1.45; background-color: #f7f7f7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; margin: 0 0.15em; padding: 0.2em 0.5em; vertical-align: middle; position: relative; top: -0.1em; white-space: nowrap; }

.keyseq kbd:first-child { margin-left: 0; }

.keyseq kbd:last-child { margin-right: 0; }

.menuseq, .menuref { color: #000; }

.menuseq b:not(.caret), .menuref { font-weight: inherit; }

.menuseq { word-spacing: -0.02em; }
.menuseq b.caret { font-size: 1.25em; line-height: 0.8; }
.menuseq i.caret { font-weight: bold; text-align: center; width: 0.45em; }

b.button:before, b.button:after { position: relative; top: -1px; font-weight: normal; }

b.button:before { content: "["; padding: 0 3px 0 2px; }

b.button:after { content: "]"; padding: 0 2px 0 3px; }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#content { margin-top: 1.25em; }

#content:before { content: none; }

#header > h1:first-child { color: black; margin-top: 2.25rem; margin-bottom: 0; }
#header > h1:first-child + #toc { margin-top: 8px; border-top: 1px solid #dddddd; }
#header > h1:only-child, body.toc2 #header > h1:nth-last-child(2) { border-bottom: 1px solid #dddddd; padding-bottom: 8px; }
#header .details { border-bottom: 1px solid #dddddd; line-height: 1.45; padding-top: 0.25em; padding-bottom: 0.25em; padding-left: 0.25em; color: #555555; display: -ms-flexbox; display: -webkit-flex; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; }
#header .details span:first-child { margin-left: -0.125em; }
#header .details span.email a { color: #6f6f6f; }
#header .details br { display: none; }
#header .details br + span:before { content: "\00a0\2013\00a0"; }
#header .details br + span.author:before { content: "\00a0\22c5\00a0"; color: #6f6f6f; }
#header .details br + span#revremark:before { content: "\00a0|\00a0"; }
#header #revnumber { text-transform: capitalize; }
#header #revnumber:after { content: "\00a0"; }

#content > h1:first-child:not([class]) { color: black; border-bottom: 1px solid #dddddd; padding-bottom: 8px; margin-top: 0; padding-top: 1rem; margin-bottom: 1.25rem; }

#toc { border-bottom: 1px solid #dddddd; padding-bottom: 0.5em; }
#toc > ul { margin-left: 0.125em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin: 0.5em 0; }
#toc ul { font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; list-style-type: none; }
#toc li { line-height: 1.3334; margin-top: 0.3334em; }
#toc a { text-decoration: none; }
#toc a:active { text-decoration: underline; }

#toctitle { color: #6f6f6f; font-size: 1.2em; }

@media only screen and (min-width: 768px) { #toctitle { font-size: 1.375em; }
  body.toc2 { padding-left: 15em; padding-right: 0; }
  #toc.toc2 { margin-top: 0 !important; background-color: #f2f2f2; position: fixed; width: 15em; left: 0; top: 0; border-right: 1px solid #dddddd; border-top-width: 0 !important; border-bottom-width: 0 !important; z-index: 1000; padding: 1.25em 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; margin-bottom: 0.8rem; font-size: 1.2em; }
  #toc.toc2 > ul { font-size: 0.9em; margin-bottom: 0; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 15em; }
  body.toc2.toc-right #toc.toc2 { border-right-width: 0; border-left: 1px solid #dddddd; left: auto; right: 0; } }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; padding-right: 0; }
  #toc.toc2 { width: 20em; }
  #toc.toc2 #toctitle { font-size: 1.375em; }
  #toc.toc2 > ul { font-size: 0.95em; }
  #toc.toc2 ul ul { padding-left: 1.25em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 0; border-radius: 0; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }

#footer { max-width: 100%; background-color: #222222; padding: 1.25em; }

#footer-text { color: #dddddd; line-height: 1.44; }

.sect1 { padding-bottom: 0.625em; }

@media only screen and (min-width: 768px) { .sect1 { padding-bottom: 1.25em; } }
.sect1 + .sect1 { border-top: 1px solid #dddddd; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; z-index: 1001; width: 1.5ex; margin-left: -1.5ex; display: block; text-decoration: none !important; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: "\00A7"; font-size: 0.85em; display: block; padding-top: 0.1em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #404040; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #333333; }

.audioblock, .imageblock, .literalblock, .listingblock, .stemblock, .videoblock { margin-bottom: 1.25em; }

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-rendering: optimizeLegibility; text-align: left; }

table.tableblock > caption.title { white-space: nowrap; overflow: visible; max-width: 0; }

.paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { color: black; }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border-collapse: separate; border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: initial; }
.admonitionblock > table td.icon .title { font-weight: bold; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #555555; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 0; border-radius: 0; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 0; border-radius: 0; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock > .content > .title { color: #6f6f6f; margin-top: 0; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.literalblock pre, .listingblock pre:not(.highlight), .listingblock pre[class="highlight"], .listingblock pre[class^="highlight "], .listingblock pre.CodeRay, .listingblock pre.prettyprint { background: #eeeeee; }
.sidebarblock .literalblock pre, .sidebarblock .listingblock pre:not(.highlight), .sidebarblock .listingblock pre[class="highlight"], .sidebarblock .listingblock pre[class^="highlight "], .sidebarblock .listingblock pre.CodeRay, .sidebarblock .listingblock pre.prettyprint { background: #f2f1f1; }

.literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { border: 1px solid #cccccc; -webkit-border-radius: 0; border-radius: 0; word-wrap: break-word; padding: 0.8em 0.8em 0.65em 0.8em; font-size: 0.8125em; }
.literalblock pre.nowrap, .literalblock pre[class].nowrap, .listingblock pre.nowrap, .listingblock pre[class].nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
@media only screen and (min-width: 768px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 0.90625em; } }
@media only screen and (min-width: 1280px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 1em; } }

.literalblock.output pre { color: #eeeeee; background-color: black; }

.listingblock pre.highlightjs { padding: 0; }
.listingblock pre.highlightjs > code { padding: 0.8em 0.8em 0.65em 0.8em; -webkit-border-radius: 0; border-radius: 0; }

.listingblock > .content { position: relative; }

.listingblock code[data-lang]:before { display: none; content: attr(data-lang); position: absolute; font-size: 0.75em; top: 0.425rem; right: 0.5rem; line-height: 1; text-transform: uppercase; color: #999; }

.listingblock:hover code[data-lang]:before { display: block; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: "$"; }

table.pyhltable { border-collapse: separate; border: 0; margin-bottom: 0; background: none; }

table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; line-height: 1.4; }

table.pyhltable td.code { padding-left: .75em; padding-right: 0; }

pre.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #dddddd; }

pre.pygments .lineno { display: inline-block; margin-right: .25em; }

table.pyhltable .linenodiv { background: none !important; padding-right: 0 !important; }

.quoteblock { margin: 0 1em 1.25em 1.5em; display: table; }
.quoteblock > .title { margin-left: -1.5em; margin-bottom: 0.75em; }
.quoteblock blockquote, .quoteblock blockquote p { color: #6f6f6f; font-size: 1.15rem; line-height: 1.75; word-spacing: 0.1em; letter-spacing: 0; font-style: italic; text-align: justify; }
.quoteblock blockquote { margin: 0; padding: 0; border: 0; }
.quoteblock blockquote:before { content: "\201c"; float: left; font-size: 2.75em; font-weight: bold; line-height: 0.6em; margin-left: -0.6em; color: #6f6f6f; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: 0.5em; margin-right: 0.5ex; text-align: right; }
.quoteblock .quoteblock { margin-left: 0; margin-right: 0; padding: 0.5em 0; border-left: 3px solid #555555; }
.quoteblock .quoteblock blockquote { padding: 0 0 0 0.75em; }
.quoteblock .quoteblock blockquote:before { display: none; }

.verseblock { margin: 0 1em 1.25em 1em; }
.verseblock pre { font-family: "Open Sans", "DejaVu Sans", sans; font-size: 1.15rem; color: #6f6f6f; font-weight: 300; text-rendering: optimizeLegibility; }
.verseblock pre strong { font-weight: 400; }
.verseblock .attribution { margin-top: 1.25rem; margin-left: 0.5ex; }

.quoteblock .attribution, .verseblock .attribution { font-size: 0.8125em; line-height: 1.45; font-style: italic; }
.quoteblock .attribution br, .verseblock .attribution br { display: none; }
.quoteblock .attribution cite, .verseblock .attribution cite { display: block; letter-spacing: -0.025em; color: #555555; }

.quoteblock.abstract { margin: 0 0 1.25em 0; display: block; }
.quoteblock.abstract blockquote, .quoteblock.abstract blockquote p { text-align: left; word-spacing: 0; }
.quoteblock.abstract blockquote:before, .quoteblock.abstract blockquote p:first-of-type:before { display: none; }

table.tableblock { max-width: 100%; border-collapse: separate; }
table.tableblock td > .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child { margin-bottom: 0; }

table.tableblock, th.tableblock, td.tableblock { border: 0 solid #dddddd; }

table.grid-all > thead > tr > .tableblock, table.grid-all > tbody > tr > .tableblock { border-width: 0 1px 1px 0; }

table.grid-all > tfoot > tr > .tableblock { border-width: 1px 1px 0 0; }

table.grid-cols > * > tr > .tableblock { border-width: 0 1px 0 0; }

table.grid-rows > thead > tr > .tableblock, table.grid-rows > tbody > tr > .tableblock { border-width: 0 0 1px 0; }

table.grid-rows > tfoot > tr > .tableblock { border-width: 1px 0 0 0; }

table.grid-all > * > tr > .tableblock:last-child, table.grid-cols > * > tr > .tableblock:last-child { border-right-width: 0; }

table.grid-all > tbody > tr:last-child > .tableblock, table.grid-all > thead:last-child > tr > .tableblock, table.grid-rows > tbody > tr:last-child > .tableblock, table.grid-rows > thead:last-child > tr > .tableblock { border-bottom-width: 0; }

table.frame-all { border-width: 1px; }

table.frame-sides { border-width: 0 1px; }

table.frame-topbot { border-width: 1px 0; }

th.halign-left, td.halign-left { text-align: left; }

th.halign-right, td.halign-right { text-align: right; }

th.halign-center, td.halign-center { text-align: center; }

th.valign-top, td.valign-top { vertical-align: top; }

th.valign-bottom, td.valign-bottom { vertical-align: bottom; }

th.valign-middle, td.valign-middle { vertical-align: middle; }

table thead th, table tfoot th { font-weight: bold; }

tbody tr th { display: table-cell; line-height: 1.4; background: whitesmoke; }

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p { color: #222222; font-weight: bold; }

p.tableblock > code:only-child { background: none; padding: 0; }

p.tableblock { font-size: 1em; }

td > div.verse { white-space: pre; }

ol { margin-left: 1.75em; }

ul li ol { margin-left: 1.5em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }

ul.checklist, ul.none, ol.none, ul.no-bullet, ol.no-bullet, ol.unnumbered, ul.unstyled, ol.unstyled { list-style-type: none; }

ul.no-bullet, ol.no-bullet, ol.unnumbered { margin-left: 0.625em; }

ul.unstyled, ol.unstyled { margin-left: 0; }

ul.checklist { margin-left: 0.625em; }

ul.checklist li > p:first-child > .fa-square-o:first-child, ul.checklist li > p:first-child > .fa-check-square-o:first-child { width: 1.25em; font-size: 0.8em; position: relative; bottom: 0.125em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }

ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1, td.hdlist2 { vertical-align: top; padding: 0 0.625em; }

td.hdlist1 { font-weight: bold; padding-bottom: 1.25em; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0.4em 0.75em 0 0.75em; line-height: 1; vertical-align: top; }
.colist > table tr > td:first-of-type img { max-width: initial; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }

.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

a.image { text-decoration: none; display: inline-block; }
a.image object { pointer-events: none; }

sup.footnote, sup.footnoteref { font-size: 0.875em; position: static; vertical-align: super; }
sup.footnote a, sup.footnoteref a { text-decoration: none; }
sup.footnote a:active, sup.footnoteref a:active { text-decoration: underline; }

#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -0.25em 0 0.75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em 0 0.225em; line-height: 1.3334; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.05em; margin-bottom: 0.2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }
#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }

.gist .file-data > table { border: 0; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > .fa { cursor: default; }
a span.icon > .fa { cursor: inherit; }

.admonitionblock td.icon [class^="fa icon-"] { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #207c98; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum[data-value] { display: inline-block; color: #fff !important; background-color: #222222; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; font-size: 0.75em; width: 1.67em; height: 1.67em; line-height: 1.67em; font-family: "Open Sans", "DejaVu Sans", sans-serif; font-style: normal; font-weight: bold; }
.conum[data-value] * { color: #fff !important; }
.conum[data-value] + b { display: none; }
.conum[data-value]:after { content: attr(data-value); }
pre .conum[data-value] { position: relative; top: -0.125em; }

b.conum * { color: inherit !important; }

.conum:not([data-value]):empty { display: none; }

.must-keyword { color: red; }

.should-keyword { color: darkgoldenrod; }

.may-keyword { color: green; }

.sect1 { max-width: 45em; }

#content #toc { max-width: 45em; }

code { font-size: .85em !important; }

p > code { background-color: #f0f0f0; padding: .1em .4em .1em .4em !important; font-size: .9em !important; color: inherit; }

a > code { background-color: #f0f0f0; padding: .1em .4em .1em .4em !important; font-size: .9em !important; color: black; }

.literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { padding: .5em !important; }

#toc a { color: #364149; }

</style>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="_10m_restful_api_guidelines_based_on_zalando_restful_api_and_event_scheme_guidelines"><a class="link" href="#_10m_restful_api_guidelines_based_on_zalando_restful_api_and_event_scheme_guidelines">10m RESTful API Guidelines based on Zalando RESTful API and Event Scheme Guidelines</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>10M GmbH</p>
</div>
<div class="imageblock">
<div class="content">
<img src="assets/api-zalando-small.jpg" alt="API Guild Logo">
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_10m_restful_api_guidelines_based_on_zalando_restful_api_and_event_scheme_guidelines">10m RESTful API Guidelines based on Zalando RESTful API and Event Scheme Guidelines</a></li>
<li><a href="#introduction">1. Introduction</a>
<ul class="sectlevel2">
<li><a href="#conventions-used-in-these-guidelines">Conventions Used in These Guidelines</a></li>
</ul>
</li>
<li><a href="#principles">2. Principles</a>
<ul class="sectlevel2">
<li><a href="#api-design-principles">API Design Principles</a></li>
<li><a href="#api-as-a-product">API as a Product</a></li>
<li><a href="#api-first">API First</a></li>
</ul>
</li>
<li><a href="#general-guidelines">3. General Guidelines</a>
<ul class="sectlevel2">
<li><a href="#100"><span class="must-keyword"><strong>Must</strong></span>: Follow API First Principle</a></li>
<li><a href="#101"><span class="must-keyword"><strong>Must</strong></span>: Provide API Specification using OpenAPI</a></li>
<li><a href="#102"><span class="should-keyword"><strong>Should</strong></span>: Provide API User Manual</a></li>
<li><a href="#103"><span class="must-keyword"><strong>Must</strong></span>: Write APIs in U.S. English with SI unit system</a></li>
</ul>
</li>
<li><a href="#meta-information">4. Meta Information</a>
<ul class="sectlevel2">
<li><a href="#218"><span class="must-keyword"><strong>Must</strong></span>: Contain API Meta Information</a></li>
<li><a href="#116"><span class="must-keyword"><strong>Must</strong></span>: Use Semantic Versioning</a></li>
<li><a href="#215"><span class="must-keyword"><strong>Must</strong></span>: Provide API Identifiers</a></li>
<li><a href="#219"><span class="must-keyword"><strong>Must</strong></span>: Provide API Audience</a></li>
</ul>
</li>
<li><a href="#security">5. Security</a>
<ul class="sectlevel2">
<li><a href="#104"><span class="must-keyword"><strong>Must</strong></span>: Secure Endpoints with JWT</a></li>
</ul>
</li>
<li><a href="#compatibility">6. Compatibility</a>
<ul class="sectlevel2">
<li><a href="#106"><span class="must-keyword"><strong>Must</strong></span>: Dont Break Backward Compatibility</a></li>
<li><a href="#107"><span class="should-keyword"><strong>Should</strong></span>: Prefer Compatible Extensions</a></li>
<li><a href="#108"><span class="must-keyword"><strong>Must</strong></span>: Prepare Clients To Not Crash On Compatible API Extensions</a></li>
<li><a href="#109"><span class="should-keyword"><strong>Should</strong></span>: Design APIs Conservatively</a></li>
<li><a href="#110"><span class="must-keyword"><strong>Must</strong></span>: Always Return JSON Objects As Top-Level Data Structures To Support Extensibility</a></li>
<li><a href="#111"><span class="must-keyword"><strong>Must</strong></span>: Treat Open API Definitions As Open For Extension By Default</a></li>
<li><a href="#112"><span class="should-keyword"><strong>Should</strong></span>: Used Open-Ended List of Values (x-extensible-enum) Instead of Enumerations</a></li>
<li><a href="#113"><span class="should-keyword"><strong>Should</strong></span>: Avoid Versioning</a></li>
<li><a href="#114"><span class="must-keyword"><strong>Must</strong></span>: Use Media Type Versioning</a></li>
<li><a href="#115"><span class="must-keyword"><strong>Must</strong></span>: Do Not Use URI Versioning</a></li>
</ul>
</li>
<li><a href="#deprecation">7. Deprecation</a>
<ul class="sectlevel2">
<li><a href="#185"><span class="must-keyword"><strong>Must</strong></span>: Obtain Approval of Clients</a></li>
<li><a href="#186"><span class="must-keyword"><strong>Must</strong></span>: External Partners Must Agree on Deprecation Timespan</a></li>
<li><a href="#187"><span class="must-keyword"><strong>Must</strong></span>: Reflect Deprecation in API Definition</a></li>
<li><a href="#188"><span class="must-keyword"><strong>Must</strong></span>: Monitor Usage of Deprecated APIs</a></li>
<li><a href="#189"><span class="should-keyword"><strong>Should</strong></span>: Add a Warning Header to Responses</a></li>
<li><a href="#190"><span class="should-keyword"><strong>Should</strong></span>: Add Monitoring for Warning Header</a></li>
<li><a href="#191"><span class="must-keyword"><strong>Must</strong></span>: Not Start Using Deprecated APIs</a></li>
</ul>
</li>
<li><a href="#json-guidelines">8. JSON Guidelines</a>
<ul class="sectlevel2">
<li><a href="#118"><span class="must-keyword"><strong>Must</strong></span>: Property names must be ASCII lowerCamelCase): <code>^[a-z][a-zA-Z0-9]*$</code></a></li>
<li><a href="#216"><span class="should-keyword"><strong>Should</strong></span>: Define Maps Using <code>additionalProperties</code></a></li>
<li><a href="#120"><span class="should-keyword"><strong>Should</strong></span>: Array names should be pluralized</a></li>
<li><a href="#122"><span class="must-keyword"><strong>Must</strong></span>: Boolean property values must not be null</a></li>
<li><a href="#123"><span class="should-keyword"><strong>Should</strong></span>: Null values should have their fields removed</a></li>
<li><a href="#124"><span class="should-keyword"><strong>Should</strong></span>: Empty array values should not be null</a></li>
<li><a href="#125"><span class="should-keyword"><strong>Should</strong></span>: Enumerations should be represented as Strings</a></li>
<li><a href="#126"><span class="should-keyword"><strong>Should</strong></span>: Date property values should conform to RFC 3339</a></li>
<li><a href="#127"><span class="may-keyword"><strong>May</strong></span>: Time durations and intervals could conform to ISO 8601</a></li>
<li><a href="#128"><span class="may-keyword"><strong>May</strong></span>: Standards could be used for Language, Country and Currency</a></li>
</ul>
</li>
<li><a href="#api-naming">9. API Naming</a>
<ul class="sectlevel2">
<li><a href="#223"><span class="must-keyword"><strong>Must</strong></span>/<span class="should-keyword"><strong>Should</strong></span>: Use Functional Naming Schema</a></li>
<li><a href="#129"><span class="must-keyword"><strong>Must</strong></span>: Use lowercase separate words for Path Segments</a></li>
<li><a href="#130"><span class="must-keyword"><strong>Must</strong></span>: Use lowerCamelCase for Query Parameters</a></li>
<li><a href="#132"><span class="should-keyword"><strong>Should</strong></span>: Prefer Hyphenated-Pascal-Case for HTTP header Fields</a></li>
<li><a href="#134"><span class="must-keyword"><strong>Must</strong></span>: Pluralize Resource Names</a></li>
<li><a href="#135"><span class="may-keyword"><strong>May</strong></span>: Use /api as first Path Segment</a></li>
<li><a href="#136"><span class="must-keyword"><strong>Must</strong></span>: Avoid Trailing Slashes</a></li>
<li><a href="#137"><span class="may-keyword"><strong>May</strong></span>: Use Conventional Query Strings</a></li>
</ul>
</li>
<li><a href="#resources">10. Resources</a>
<ul class="sectlevel2">
<li><a href="#138"><span class="must-keyword"><strong>Must</strong></span>: Avoid Actions  Think About Resources</a></li>
<li><a href="#139"><span class="should-keyword"><strong>Should</strong></span>: Model complete business processes</a></li>
<li><a href="#140"><span class="should-keyword"><strong>Should</strong></span>: Define <em>useful</em> resources</a></li>
<li><a href="#141"><span class="must-keyword"><strong>Must</strong></span>: Keep URLs Verb-Free</a></li>
<li><a href="#142"><span class="must-keyword"><strong>Must</strong></span>: Use Domain-Specific Resource Names</a></li>
<li><a href="#143"><span class="must-keyword"><strong>Must</strong></span>: Identify resources and Sub-Resources via Path Segments</a></li>
<li><a href="#144"><span class="should-keyword"><strong>Should</strong></span>: Use UUIDs</a></li>
<li><a href="#145"><span class="may-keyword"><strong>May</strong></span>: Consider Using (Non-) Nested URLs</a></li>
<li><a href="#146"><span class="should-keyword"><strong>Should</strong></span>: Limit number of Resource types</a></li>
<li><a href="#147"><span class="should-keyword"><strong>Should</strong></span>: Limit number of Sub-Resource Levels</a></li>
</ul>
</li>
<li><a href="#http-requests">11. HTTP Requests</a>
<ul class="sectlevel2">
<li><a href="#148"><span class="must-keyword"><strong>Must</strong></span>: Use HTTP Methods Correctly</a></li>
<li><a href="#149"><span class="must-keyword"><strong>Must</strong></span>: Fulfill Safeness and Idempotency Properties</a></li>
<li><a href="#154"><span class="should-keyword"><strong>Should</strong></span>: Define Collection Format of Query Parameters and Headers</a></li>
<li><a href="#226"><span class="must-keyword"><strong>Must</strong></span>: Document Implicit Filtering</a></li>
</ul>
</li>
<li><a href="#http-status-codes-and-errors">12. HTTP Status Codes And Errors</a>
<ul class="sectlevel2">
<li><a href="#151"><span class="must-keyword"><strong>Must</strong></span>: Specify Success and Error Responses</a></li>
<li><a href="#150"><span class="must-keyword"><strong>Must</strong></span>: Use Standard HTTP Status Codes</a></li>
<li><a href="#220"><span class="must-keyword"><strong>Must</strong></span>: Use Most Specific HTTP Status Codes</a></li>
<li><a href="#152"><span class="must-keyword"><strong>Must</strong></span>: Use Code 207 for Batch or Bulk Requests</a></li>
<li><a href="#153"><span class="must-keyword"><strong>Must</strong></span>: Use Code 429 with Headers for Rate Limits</a></li>
<li><a href="#176"><span class="must-keyword"><strong>Must</strong></span>: Use Problem JSON</a></li>
<li><a href="#177"><span class="must-keyword"><strong>Must</strong></span>: Do not expose Stack Traces</a></li>
</ul>
</li>
<li><a href="#performance">13. Performance</a>
<ul class="sectlevel2">
<li><a href="#155"><span class="should-keyword"><strong>Should</strong></span>: Reduce Bandwidth Needs and Improve Responsiveness</a></li>
<li><a href="#156"><span class="should-keyword"><strong>Should</strong></span>: Use gzip Compression</a></li>
<li><a href="#157"><span class="should-keyword"><strong>Should</strong></span>: Support Filtering of Resource Fields</a></li>
<li><a href="#158"><span class="should-keyword"><strong>Should</strong></span>: Allow Optional Embedding of Sub-Resources</a></li>
<li><a href="#227"><span class="must-keyword"><strong>Must</strong></span>: Document Caching, if Supported</a></li>
</ul>
</li>
<li><a href="#pagination">14. Pagination</a>
<ul class="sectlevel2">
<li><a href="#159"><span class="must-keyword"><strong>Must</strong></span>: Support Pagination</a></li>
<li><a href="#160"><span class="should-keyword"><strong>Should</strong></span>: Prefer Cursor-Based Pagination, Avoid Offset-Based Pagination</a></li>
<li><a href="#161"><span class="may-keyword"><strong>May</strong></span>: Use Pagination Links Where Applicable</a></li>
</ul>
</li>
<li><a href="#hypermedia">15. Hypermedia</a>
<ul class="sectlevel2">
<li><a href="#162"><span class="must-keyword"><strong>Must</strong></span>: Use REST Maturity Level 2</a></li>
<li><a href="#163"><span class="may-keyword"><strong>May</strong></span>: Use REST Maturity Level 3 - HATEOAS</a></li>
<li><a href="#217"><span class="must-keyword"><strong>Must</strong></span>: Use full, absolute URI</a></li>
<li><a href="#164"><span class="must-keyword"><strong>Must</strong></span>: Use Common Hypertext Controls</a></li>
<li><a href="#165"><span class="should-keyword"><strong>Should</strong></span>: Use Simple Hypertext Controls for Pagination and Self-References</a></li>
<li><a href="#166"><span class="must-keyword"><strong>Must</strong></span>: Not Use Link Headers with JSON entities</a></li>
</ul>
</li>
<li><a href="#data-formats">16. Data Formats</a>
<ul class="sectlevel2">
<li><a href="#167"><span class="must-keyword"><strong>Must</strong></span>: Use JSON to Encode Structured Data</a></li>
<li><a href="#168"><span class="may-keyword"><strong>May</strong></span>: Use non JSON Media Types for Binary Data or Alternative Content Representations</a></li>
<li><a href="#172"><span class="should-keyword"><strong>Should</strong></span>: Prefer standard Media type name <code>application/json</code></a></li>
<li><a href="#169"><span class="must-keyword"><strong>Must</strong></span>: Use Standard Date and Time Formats</a></li>
<li><a href="#170"><span class="may-keyword"><strong>May</strong></span>: Use Standards for Country, Language and Currency Codes</a></li>
<li><a href="#171"><span class="must-keyword"><strong>Must</strong></span>: Define Format for Type Number and Integer</a></li>
</ul>
</li>
<li><a href="#common-data-types">17. Common Data Types</a>
<ul class="sectlevel2">
<li><a href="#173"><span class="should-keyword"><strong>Should</strong></span>: Use a Common Money Object</a></li>
<li><a href="#174"><span class="must-keyword"><strong>Must</strong></span>: Use common field names and semantics</a></li>
</ul>
</li>
<li><a href="#common-headers">18. Common Headers</a>
<ul class="sectlevel2">
<li><a href="#178"><span class="must-keyword"><strong>Must</strong></span>: Use Content Headers Correctly</a></li>
<li><a href="#133"><span class="may-keyword"><strong>May</strong></span>: Use Standardized Headers</a></li>
<li><a href="#179"><span class="may-keyword"><strong>May</strong></span>: Use Content-Location Header</a></li>
<li><a href="#180"><span class="should-keyword"><strong>Should</strong></span>: Use Location Header instead of Content-Location Header</a></li>
<li><a href="#181"><span class="may-keyword"><strong>May</strong></span>: Use the Prefer header to indicate processing preferences</a></li>
<li><a href="#182"><span class="may-keyword"><strong>May</strong></span>: Consider Using ETag Together With If-Match/If-None-Match Header</a></li>
</ul>
</li>
<li><a href="#api-operation">19. API Operation</a>
<ul class="sectlevel2">
<li><a href="#192"><span class="must-keyword"><strong>Must</strong></span>: Publish OpenAPI Specification</a></li>
<li><a href="#193"><span class="should-keyword"><strong>Should</strong></span>: Monitor API Usage</a></li>
</ul>
</li>
<li><a href="#appendix-references">Appendix A: References</a>
<ul class="sectlevel2">
<li><a href="#openapi-specification">OpenAPI Specification</a></li>
<li><a href="#publications-specifications-and-standards">Publications, specifications and standards</a></li>
<li><a href="#dissertations">Dissertations</a></li>
<li><a href="#books">Books</a></li>
<li><a href="#blogs">Blogs</a></li>
</ul>
</li>
<li><a href="#appendix-tooling">Appendix B: Tooling</a>
<ul class="sectlevel2">
<li><a href="#api-first-integrations">API First Integrations</a></li>
<li><a href="#support-libraries">Support Libraries</a></li>
</ul>
</li>
<li><a href="#appendix-best-practices">Appendix C: Best Practices</a>
<ul class="sectlevel2">
<li><a href="#optimistic-locking">Optimistic Locking in RESTful APIs</a></li>
</ul>
</li>
<li><a href="#appendix-changelog">Appendix D: Changelog</a>
<ul class="sectlevel2">
<li><a href="#rule-changes">Rule Changes</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="introduction"><a class="link" href="#introduction">1. Introduction</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>10M is not a microservice company. But developing client/server
archictures with independent frontend and backend teams require
stable API architectures. Out estabilished standard for public APIs
that provide functionality via RESTful APIs with a JSON payload. Our
engineering teams own, deploy and operate these services in their
AWS (team) accounts. Our APIs most purely express what our systems do,
and are therefore highly valuable business assets.</p>
</div>
<div class="paragraph">
<p>With this in mind, weve adopted "API First" as one of our key
engineering principles. Microservices development begins with API
definition outside the code and ideally involves ample peer-review
feedback to achieve high-quality APIs. API First encompasses a set of
quality-related standards and fosters a peer review culture including a
lightweight review procedure. We encourage our teams to follow them to
ensure that our APIs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>are easy to understand and learn</p>
</li>
<li>
<p>are general and abstracted from specific implementation and use cases</p>
</li>
<li>
<p>are robust and easy to use</p>
</li>
<li>
<p>have a common look and feel</p>
</li>
<li>
<p>follow a consistent RESTful style and syntax</p>
</li>
<li>
<p>are consistent with other teams APIs and our global architecture</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ideally, all our APIs will look like the same author created them.</p>
</div>
<div class="sect2">
<h3 id="conventions-used-in-these-guidelines"><a class="link" href="#conventions-used-in-these-guidelines">Conventions Used in These Guidelines</a></h3>
<div class="paragraph">
<p>The requirement level keywords "MUST", "MUST NOT", "REQUIRED", "SHALL",
"SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and
"OPTIONAL" used in this document (case insensitive) are to be
interpreted as described in <a href="https://www.ietf.org/rfc/rfc2119.txt">RFC
2119</a>.</p>
</div>
<div class="paragraph">
<p>In case guidelines are changing, following rules apply:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>existing APIs don&#8217;t have to be changed, but we recommend it</p>
</li>
<li>
<p>clients of existing APIs have to cope with these APIs based on
outdated rules</p>
</li>
<li>
<p>new APIs have to respect the current guidelines</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Furthermore you should keep in mind that once an API becomes public
externally available, it has to be re-reviewed and changed according to
current guidelines - for sake of overall consistency.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="principles"><a class="link" href="#principles">2. Principles</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="api-design-principles"><a class="link" href="#api-design-principles">API Design Principles</a></h3>
<div class="paragraph">
<p>Comparing SOA web service interfacing style of SOAP vs. REST, the former
tend to be centered around operations that are usually use-case specific
and specialized. In contrast, REST is centered around business (data)
entities exposed as resources that are identified via URIs and can be
manipulated via standardized CRUD-like methods using different
representations, and hypermedia. RESTful APIs
tend to be less use-case specific and comes with less rigid client /
server coupling and are more suitable for an ecosystem of (core) services
providing a platform of APIs to build diverse new business services.
We apply the RESTful web service principles to all kind of application
(micro-) service components, independently from whether they provide
functionality via the internet or intranet.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>We prefer REST-based APIs with JSON payloads</p>
</li>
<li>
<p>We prefer systems to be truly RESTful
<sup class="footnote" id="_footnote_fielding-restful">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>An important principle for API design and usage is Postel&#8217;s
Law, aka <a href="http://en.wikipedia.org/wiki/Robustness_principle">The
Robustness Principle</a> (see also <a href="https://tools.ietf.org/html/rfc1122">RFC 1122</a>):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Be liberal in what you accept, be conservative in what you send</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Readings:</em> Some interesting reads on the RESTful API design style and service architecture:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Book:
<a href="https://www.amazon.de/Irresistible-APIs-Designing-that-developers/dp/1617292559">Irresistable
APIs: Designing web APIs that developers will love</a></p>
</li>
<li>
<p>Book:
<a href="http://www.amazon.de/REST-Practice-Hypermedia-Systems-Architecture/dp/0596805829">REST
in Practice: Hypermedia and Systems Architecture</a></p>
</li>
<li>
<p>Book: <a href="https://leanpub.com/build-apis-you-wont-hate">Build APIs You
Won&#8217;t Hate</a></p>
</li>
<li>
<p>InfoQ eBook: <a href="http://www.infoq.com/minibooks/emag-web-api">Web APIs:
From Start to Finish</a></p>
</li>
<li>
<p>Lessons-learned blog:
<a href="http://restful-api-design.readthedocs.org/en/latest/">Thoughts on RESTful
API Design</a></p>
</li>
<li>
<p>Fielding Dissertation:
<a href="http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm">Architectural
Styles and the Design of Network-Based Software Architectures</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="api-as-a-product"><a class="link" href="#api-as-a-product">API as a Product</a></h3>
<div class="paragraph">
<p>10M is no a product company, so we are not selling our APIs.
But as our customers are changing their architecture to change into a
software driven company APIs are getting more important for a wider
scope.</p>
</div>
<div class="paragraph">
<p>Our projects provide their functionality via (public) APIs; hence,
the design of our APIs should be based on the API as a Product
principle:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Treat your API as product and act like a product owner</p>
</li>
<li>
<p>Put yourself into the place of your customers; be an advocate for
their needs</p>
</li>
<li>
<p>Emphasize simplicity, comprehensibility, and usability of APIs to
make them irresistible for client engineers</p>
</li>
<li>
<p>Actively improve and maintain API consistency over the long term</p>
</li>
<li>
<p>Make use of customer feedback and provide service level support</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Embracing 'API as a Product' facilitates a service ecosystem which can
be evolved more easily, and used to experiment quickly with new business
ideas by recombining core capabilities.
It makes the difference between agile, innovative product service
business built on a platform of APIs and ordinary enterprise integration business
where APIs are provided as "appendix" of existing products to support system integration
and optimised for local server-side realization.</p>
</div>
<div class="paragraph">
<p>Understand the concrete use cases of your customers and carefully check
the trade-offs of your API design variants with a product mindset. Avoid short-term
implementation optimizations at the expense of unnecessary client side
obligations, and have a high attention on API quality and client
developer experience.</p>
</div>
<div class="paragraph">
<p>API as a Product is closely related to our <a href="#100">API First principle</a>
(see next chapter) which is more focused on how we engineer high quality APIs.</p>
</div>
</div>
<div class="sect2">
<h3 id="api-first"><a class="link" href="#api-first">API First</a></h3>
<div class="paragraph">
<p>API First requires two aspects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>define APIs first, before coding its implementation, using a standard specification
language</p>
</li>
<li>
<p>get early review feedback from peers and client developers</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By defining APIs outside the code, we want to facilitate early review
feedback and also a development discipline that focus service interface
design on&#8230;&#8203;</p>
</div>
<div class="ulist">
<ul>
<li>
<p>profound understanding of the domain and required functionality</p>
</li>
<li>
<p>generalized business entities / resources, i.e. avoidance of use case
specific APIs</p>
</li>
<li>
<p>clear separation of WHAT vs. HOW concerns, i.e. abstraction from
implementation aspects  APIs should be stable even if we replace
complete service implementation including its underlying technology
stack</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Moreover, API definitions with standardized specification format also
facilitate&#8230;&#8203;</p>
</div>
<div class="ulist">
<ul>
<li>
<p>single source of truth for the API specification; it is a crucial part
of a contract between service provider and client users</p>
</li>
<li>
<p>infrastructure tooling for API discovery, API GUIs, API documents,
automated quality checks</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Elements of API First are also this API Guidelines and a standardized
API review process as to get early review feedback from
peers and client developers. Peer review is important for us to get high
quality APIs, to enable architectural and design alignment and to
supported development of client applications decoupled from service
provider engineering life cycle.</p>
</div>
<div class="paragraph">
<p>It is important to learn, that API First is <strong>not in conflict with the
agile development principles</strong> that we love. Service applications should
evolve incrementally  and so its APIs. Of course, our API specification
will and should evolve iteratively in different cycles; however, each
starting with draft status and <em>early</em> team and peer review feedback.
API may change and profit from implementation concerns and automated
testing feedback. API evolution during development life cycle may
include breaking changes for not yet productive features and as long as
we have aligned the changes with the clients. Hence, API First does
<em>not</em> mean that you must have 100% domain and requirement understanding
and can never produce code before you have defined the complete API and
get it confirmed by peer review. On the other hand, API First obviously
is in conflict with the bad practice of publishing API definition and
asking for peer review after the service integration or even the service
productive operation has started. It is crucial to request and get early
feedback  as early as possible, but not before the API changes are
comprehensive with focus to the next evolution step and have a certain
quality (including API Guideline compliance), already confirmed via team
internal reviews.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="general-guidelines"><a class="link" href="#general-guidelines">3. General Guidelines</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The titles are marked with the corresponding labels: <span class="must-keyword"><strong>Must</strong></span>:,
<span class="should-keyword"><strong>Should</strong></span>:, <span class="may-keyword"><strong>May</strong></span>:.</p>
</div>
<div class="sect2">
<h3 id="100"><a class="link" href="#100"><span class="must-keyword"><strong>Must</strong></span>: Follow API First Principle</a></h3>
<div class="paragraph">
<p>You must follow the <a href="#api-first">API First Principle</a>, more specifically:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You must define APIs first, before coding its implementation, <a href="#101">using OpenAPI as specification language</a></p>
</li>
<li>
<p>You must design your APIs consistently with this guidelines;
use our <a href="https://zally.zalando.net/">API Linter Service [internal link</a>] for automated rule checks.</p>
</li>
<li>
<p>You must call for early review feedback from peers and client developers,
and apply <a href="https://github.bus.zalan.do/ApiGuild/ApiReviewProcedure">our lightweight API
review process [internal link</a>] for all component external APIs, i.e.
all apis with <code>x-api-audience =/= component-internal</code> (see <a href="#219">API Audience</a>).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="101"><a class="link" href="#101"><span class="must-keyword"><strong>Must</strong></span>: Provide API Specification using OpenAPI</a></h3>
<div class="paragraph">
<p>We use the <a href="http://swagger.io/specification/">OpenAPI specification</a> (aka
Swagger specification) as standard to define API specifications files.
API designers have to provide the API specification files using <strong>JSON</strong>
to improve readability. Please, use <strong>OpenAPI 3.0</strong> even if there might
be still missing tooling support which is in beta.</p>
</div>
<div class="paragraph">
<p>The API specification files should be subject to version control using
a source code management system - best together with the implementing sources.</p>
</div>
</div>
<div class="sect2">
<h3 id="102"><a class="link" href="#102"><span class="should-keyword"><strong>Should</strong></span>: Provide API User Manual</a></h3>
<div class="paragraph">
<p>In addition to the API Specification, it is good practice to provide an
API user manual to improve client developer experience, especially of
engineers that are less experienced in using this API. A helpful API user
manual typically describes the following API aspects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API scope, purpose, and use cases</p>
</li>
<li>
<p>concrete examples of API usage</p>
</li>
<li>
<p>edge cases, error situation details, and repair hints</p>
</li>
<li>
<p>architecture context and major dependencies - including figures and
sequence flows</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The user manual must be published online, e.g. via our documentation hosting platform service, or specific team web servers. Please do not forget to include a link to the
API user manual into the API specification using the <code>#/externalDocs/url</code> property.</p>
</div>
<div class="paragraph">
<p>The manual is generated to build/generated-resources/main/src/index.html</p>
</div>
</div>
<div class="sect2">
<h3 id="103"><a class="link" href="#103"><span class="must-keyword"><strong>Must</strong></span>: Write APIs in U.S. English with SI unit system</a></h3>
<div class="paragraph">
<p>APIs must be written in plain english but must follow the metric system. All
units must use a unit based on the
<a href="https://en.wikipedia.org/wiki/International_System_of_Units">SI Unit System</a> if applyable.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="meta-information"><a class="link" href="#meta-information">4. Meta Information</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="218"><a class="link" href="#218"><span class="must-keyword"><strong>Must</strong></span>: Contain API Meta Information</a></h3>
<div class="paragraph">
<p>API specifications must contain the following OpenAPI meta information
to allow for API management:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>#/info/title</code> as (unique) identifying, functional descriptive name of the API</p>
</li>
<li>
<p><code>#/info/version</code> to distinguish API specifications versions following
<a href="#116">semantic rules</a></p>
</li>
<li>
<p><code>#/info/description</code> containing a proper description of the API</p>
</li>
<li>
<p><code>#/info/contact/{name,url,email}</code> containing the responsible team</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Following OpenAPI extension properties <strong>may</strong> be provided in addition:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>#/info/x-api-id</code> unique identifier of the API (<a href="#215">see rule 215</a>)</p>
</li>
<li>
<p><code>#/info/x-audience</code> intended target audience of the API (<a href="#219">see rule 219</a>)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="116"><a class="link" href="#116"><span class="must-keyword"><strong>Must</strong></span>: Use Semantic Versioning</a></h3>
<div class="paragraph">
<p>OpenAPI allows to specify the API specification version in
<code>#/info/version</code>. To share a common semantic of version information we
expect API designers to comply to <a href="http://semver.org/spec/v2.0.0.html">
Semantic Versioning 2.0</a> rules <code>1</code> to <code>8</code> and <code>11</code> restricted to the format
&lt;MAJOR&gt;.&lt;MINOR&gt;.&lt;PATCH&gt; for versions as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Increment the <strong>MAJOR</strong> version when you make incompatible API changes
after having aligned this changes with consumers,</p>
</li>
<li>
<p>Increment the <strong>MINOR</strong> version when you add new functionality in a
backwards-compatible manner, and</p>
</li>
<li>
<p>Optionally increment the <strong>PATCH</strong> version when you make
backwards-compatible bug fixes or editorial changes not affecting the
functionality.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Additional Notes:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Pre-release</strong> versions (<a href="http://semver.org#spec-item-9">rule 9</a>) and
<strong>build metadata</strong> (<a href="http://semver.org#spec-item-10">rule 10</a>) must not
be used in API version information.</p>
</li>
<li>
<p>While patch versions are useful for fixing typos etc, API designers
are free to decide whether they increment it or not.</p>
</li>
<li>
<p>API designers should consider to use API version <code>0.y.z</code>
(<a href="http://semver.org/#spec-item-4">rule 4</a>) for initial API design.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">swagger</span>: <span class="string"><span class="content">'2.0'</span></span>
<span class="key">info</span>:
  <span class="key">title</span>: <span class="string"><span class="content">Parcel Service API</span></span>
  <span class="key">description</span>: <span class="string"><span class="content">API for &lt;...&gt;</span></span>
  <span class="key">version</span>: <span class="string"><span class="content">1.3.7</span></span>
  <span class="error">&lt;...&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="215"><a class="link" href="#215"><span class="must-keyword"><strong>Must</strong></span>: Provide API Identifiers</a></h3>
<div class="paragraph">
<p>Each API specification must be provisioned with a globally unique and immutable API identifier.
The API identifier is defined in the <code>info</code>-block of the OpenAPI
specification and must conform to the following definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">/info/x-api-id</span>:
  <span class="key">type</span>: <span class="string"><span class="content">string</span></span>
  <span class="key">format</span>: <span class="string"><span class="content">urn</span></span>
  <span class="key">pattern</span>: <span class="string"><span class="content">^[a-z0-9][a-z0-9-:.]{6,62}[a-z0-9]$</span></span>
  <span class="key">description</span>: <span class="string"><span class="delimiter">|</span><span class="content">
    Mandatory globally unique and immutable API identifier. The API
    id allows to track the evolution and history of an API specification
    as a sequence of versions.</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>API specifications will evolve and any aspect of an OpenAPI specification
may change. We require API identifiers because we want
to support API clients and providers with API lifecycle management features,
like change trackability and history or automated backward compatibility checks.
The immutable API identifier allows the identification of all API specification
versions of an API evolution. By using  <a href="#116">API semantic version information</a>
or <a href="#192">API publishing date</a> as order criteria you get the <strong>version</strong>
or <strong>publication history</strong> as a sequence of API specifications.</p>
</div>
<div class="paragraph">
<p><strong>Note</strong>: While it is nice to use human readable API identifiers based on self-managed
URNs, it is recommend to stick to UUIDs to relief API designers from any urge
of changing the API identifier while evolving the API. Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">swagger</span>: <span class="string"><span class="content">'2.0'</span></span>
<span class="key">info</span>:
  <span class="key">x-api-id</span>: <span class="string"><span class="content">d0184f38-b98d-11e7-9c56-68f728c1ba70</span></span>
  <span class="key">title</span>: <span class="string"><span class="content">Parcel Service API</span></span>
  <span class="key">description</span>: <span class="string"><span class="content">API for &lt;...&gt;</span></span>
  <span class="key">version</span>: <span class="string"><span class="content">1.5.8</span></span>
  <span class="error">&lt;...&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="219"><a class="link" href="#219"><span class="must-keyword"><strong>Must</strong></span>: Provide API Audience</a></h3>
<div class="paragraph">
<p>Each API must be classified with respect to the intended target <strong>audience</strong>
supposed to consume the API, to facilitate differentiated standards on APIs
for discoverability, changeability, quality of design and documentation, as
well as permission granting. We differentiate the following API audience
groups with clear organisational and legal boundaries:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>component-internal</strong></dt>
<dd>
<p>This is often referred to as a <em>team internal API</em> or a <em>product internal API</em>.
The API consumers with this audience are restricted to applications of the
same <strong>functional component</strong> which typically represents a specific <strong>product</strong>
with clear functional scope and ownership.
All services of a functional component / product are owned by a specific dedicated owner
and engineering team(s). Typical examples of component-internal APIs are APIs
being used by internal helper and worker services or that support service operation.</p>
</dd>
<dt class="hdlist1"><strong>business-unit-internal</strong></dt>
<dd>
<p>The API consumers with this audience are restricted to applications of a
specific product portfolio owned by the same business unit.</p>
</dd>
<dt class="hdlist1"><strong>company-internal</strong></dt>
<dd>
<p>The API consumers with this audience are restricted to applications owned
by the business units of the same the company (e.g. the API is not published
by the customer as part of a service platform. etc.)</p>
</dd>
<dt class="hdlist1"><strong>external-partner</strong></dt>
<dd>
<p>The API consumers with this audience are restricted to applications of
business partners of the company owning the API and the company itself.</p>
</dd>
<dt class="hdlist1"><strong>external-public</strong></dt>
<dd>
<p>APIs with this audience can be accessed by anyone with Internet access.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>Note:</strong> a smaller audience group is intentionally included in the wider group
and thus does not need to be declared additionally.</p>
</div>
<div class="paragraph">
<p>The API audience is provided as API meta information in the <code>info</code>-block of
the Open API specification and must conform to the following specification:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="comment">#/info/x-audience:</span>
  <span class="key">type</span>: <span class="string"><span class="content">string</span></span>
  <span class="key">x-extensible-enum</span>:
    - <span class="string"><span class="content">component-internal</span></span>
    - <span class="string"><span class="content">business-unit-internal</span></span>
    - <span class="string"><span class="content">company-internal</span></span>
    - <span class="string"><span class="content">external-partner</span></span>
    - <span class="string"><span class="content">external-public</span></span>
  <span class="key">description</span>: <span class="string"><span class="delimiter">|</span><span class="content">
    Intended target audience of the API. Relevant for standards around
    quality of design and documentation, reviews, discoverability,
    changeability, and permission granting.</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Note:</strong> Exactly <strong>one audience</strong> per API specification is allowed. For this
reason a smaller audience group is intentionally included in the wider group
and thus does not need to be declared additionally. If parts of your API have
a different target audience, we recommend to split API specifications along
the target audience  even if this creates redundancies
(<a href="https://docs.google.com/document/d/1ff9b6oIa6dyQRyaj36-jmFdtCjWlngnGMsligR4RMIY/edit#heading=h.401bmun50mlj">rationale</a>).</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">swagger</span>: <span class="string"><span class="content">'2.0'</span></span>
<span class="key">info</span>:
  <span class="key">x-audience</span>: <span class="string"><span class="content">company-internal</span></span>
  <span class="key">title</span>: <span class="string"><span class="content">Parcel Helper Service API</span></span>
  <span class="key">description</span>: <span class="string"><span class="content">API for &lt;...&gt;</span></span>
  <span class="key">version</span>: <span class="string"><span class="content">1.2.4</span></span>
  <span class="error">&lt;...&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="security"><a class="link" href="#security">5. Security</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="104"><a class="link" href="#104"><span class="must-keyword"><strong>Must</strong></span>: Secure Endpoints with JWT</a></h3>
<div class="paragraph">
<p>Every API endpoint needs to be secured using JWT. The token is sent in the HTTP Authorization Header with the preceding word Bearer.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="http">   Authorization: Bearer &lt;JWT&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="compatibility"><a class="link" href="#compatibility">6. Compatibility</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="106"><a class="link" href="#106"><span class="must-keyword"><strong>Must</strong></span>: Dont Break Backward Compatibility</a></h3>
<div class="paragraph">
<p>Change APIs, but keep all consumers running. Consumers usually have
independent release lifecycles, focus on stability, and avoid changes
that do not provide additional value. APIs are contracts between service
providers and service consumers that cannot be broken via unilateral
decisions.</p>
</div>
<div class="paragraph">
<p>There are two techniques to change APIs without breaking them:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>follow rules for compatible extensions</p>
</li>
<li>
<p>introduce new API versions and still support older versions</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We strongly encourage using compatible API extensions and discourage
versioning (see rules <a href="#113">113</a>,<a href="#114">114</a> below).
The following guidelines for service providers (<a href="#107">rule 107</a>) and
consumers (<a href="#108">rule 108</a>) enable us (having Postels Law in mind)
to make compatible changes without versioning.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> There is a difference between incompatible and breaking changes.
Incompatible changes are changes that are not covered by the compatibility rules below.
Breaking changes are incompatible changes deployed into operation, and thereby breaking running API consumers.
Usually, incompatible changes are breaking changes when deployed into operation.
However, in specific controlled situations it is possible to deploy incompatible changes
in a non-breaking way, if no API consumer is using the affected API aspects
(see also <a href="#deprecation">Deprecation</a> guidelines).</p>
</div>
<div class="paragraph">
<p><strong>Hint:</strong> Please note that the compatibility guarantees are for the "on
the wire" format. Binary or source compatibility of code generated from
an API definition is not covered by these rules. If client
implementations update their generation process to a new version of the
API definition, it has to be expected that code changes are necessary.</p>
</div>
</div>
<div class="sect2">
<h3 id="107"><a class="link" href="#107"><span class="should-keyword"><strong>Should</strong></span>: Prefer Compatible Extensions</a></h3>
<div class="paragraph">
<p>API designers should apply the following rules to evolve RESTful APIs
for services in a backward-compatible way:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add only optional, never mandatory fields.</p>
</li>
<li>
<p>Never change the semantic of fields (e.g. changing the semantic from
customer-number to customer-id, as both are different unique customer
keys)</p>
</li>
<li>
<p>Input fields may have (complex) constraints being validated via
server-side business logic. Never change the validation logic to be more
restrictive and make sure that all constraints are clearly defined in
description.</p>
</li>
<li>
<p>Enum ranges can be reduced when used as input parameters, only if the
server is ready to accept and handle old range values too. Enum range
can be reduced when used as output parameters.</p>
</li>
<li>
<p>Enum ranges cannot not be extended when used for output parameters 
clients may not be prepared to handle it. However, enum ranges can be
extended when used for input parameters.</p>
</li>
<li>
<p>Use <a href="#112"><code>x-extensible-enum</code></a>,
if range is used for output parameters and likely to be extended with
growing functionality. It defines an open list of explicit values and
clients must be agnostic to new values.</p>
</li>
<li>
<p>Support redirection in case an URL has to change
(<a href="https://en.wikipedia.org/wiki/HTTP_301">301 Moved Permanently</a>).</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="108"><a class="link" href="#108"><span class="must-keyword"><strong>Must</strong></span>: Prepare Clients To Not Crash On Compatible API Extensions</a></h3>
<div class="paragraph">
<p>Service clients should apply the robustness principle:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Be conservative with API requests and data passed as input, e.g. avoid
to exploit definition deficits like passing megabytes for strings with
unspecified maximum length.</p>
</li>
<li>
<p>Be tolerant in processing and reading data of API responses, more
specifically&#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Service clients must be prepared for compatible API extensions of
service providers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Be tolerant with unknown fields in the payload (see also Fowlers
<a href="http://martinfowler.com/bliki/TolerantReader.html">"TolerantReader"</a>
post), i.e. ignore new fields but do not eliminate them from payload if
needed for subsequent PUT requests.</p>
</li>
<li>
<p>Be prepared that <a href="#112"><code>x-extensible-enum</code></a>
return parameter may deliver new values; either be agnostic or provide
default behavior for unknown values.</p>
</li>
<li>
<p>Be prepared to handle HTTP status codes not explicitly specified in
endpoint definitions. Note also, that status codes are extensible.
Default handling is how you would treat the corresponding x00 code (see
<a href="https://tools.ietf.org/html/rfc7231#section-6">RFC7231 Section 6</a>).</p>
</li>
<li>
<p>Follow the redirect when the server returns HTTP status
<a href="https://en.wikipedia.org/wiki/HTTP_301">301 Moved Permanently</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="109"><a class="link" href="#109"><span class="should-keyword"><strong>Should</strong></span>: Design APIs Conservatively</a></h3>
<div class="paragraph">
<p>Designers of service provider APIs should be conservative and accurate
in what they accept from clients:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Unknown input fields in payload or URL should not be ignored; servers
should provide error feedback to clients via an HTTP 400 response code.</p>
</li>
<li>
<p>Be accurate in defining input data constraints (like formats, ranges,
lengths etc.)  and check constraints and return dedicated error
information in case of violations.</p>
</li>
<li>
<p>Prefer being more specific and restrictive (if compliant to functional
requirements), e.g. by defining length range of strings. It may simplify
implementation while providing freedom for further evolution as
compatible extensions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Not ignoring unknown input fields is a specific deviation from Postel&#8217;s
Law (e.g. see also<br>
<a href="https://cacm.acm.org/magazines/2011/8/114933-the-robustness-principle-reconsidered/fulltext">The
Robustness Principle Reconsidered</a>) and a strong recommendation. Servers
might want to take different approach but should be aware of the
following problems and be explicit in what is supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ignoring unknown input fields is actually not an option for PUT, since
it becomes asymmetric with subsequent GET response and HTTP is clear
about the PUT "replace" semantics and default roundtrip expectations
(see <a href="https://tools.ietf.org/html/rfc7231#section-4.3.4">RFC7231 Section
4.3.4</a>). Note, accepting (i.e. not ignoring) unknown input fields and
returning it in subsequent GET responses is a different situation and
compliant to PUT semantics.</p>
</li>
<li>
<p>Certain client errors cannot be recognized by servers, e.g. attribute
name typing errors will be ignored without server error feedback. The
server cannot differentiate between the client intentionally providing
an additional field versus the client sending a mistakenly named field,
when the client&#8217;s actual intent was to provide an optional input field.</p>
</li>
<li>
<p>Future extensions of the input data structure might be in conflict
with already ignored fields and, hence, will not be compatible, i.e.
break clients that already use this field but with different type.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In specific situations, where a (known) input field is not needed
anymore, it either can stay in the API definition with "not used
anymore" description or can be removed from the API definition as long
as the server ignores this specific parameter.</p>
</div>
</div>
<div class="sect2">
<h3 id="110"><a class="link" href="#110"><span class="must-keyword"><strong>Must</strong></span>: Always Return JSON Objects As Top-Level Data Structures To Support Extensibility</a></h3>
<div class="paragraph">
<p>In a response body, you must always return a JSON object (and not e.g.
an array) as a top level data structure to support future extensibility.
JSON objects support compatible extension by additional attributes. This
allows you to easily extend your response and e.g. add pagination later,
without breaking backwards compatibility.</p>
</div>
<div class="paragraph">
<p>Maps, see <a href="#216">rule 216</a>, even though technically objects are also
forbidden as top level data structures, since they don&#8217;t support compatible,
future extensions.</p>
</div>
</div>
<div class="sect2">
<h3 id="111"><a class="link" href="#111"><span class="must-keyword"><strong>Must</strong></span>: Treat Open API Definitions As Open For Extension By Default</a></h3>
<div class="paragraph">
<p>The Open API specification is not very specific on default
extensibility of objects, and redefines JSON-Schema keywords related to
extensibility, like <code>additionalProperties</code>. Following our overall
compatibility guidelines, Open API object definitions are considered
open for extension by default as per
<a href="http://json-schema.org/latest/json-schema-validation.html#rfc.section.5.18">Section
5.18 "additionalProperties"</a> of JSON-Schema.</p>
</div>
<div class="paragraph">
<p>When it comes to Open API 2.0, this means an <code>additionalProperties</code>
declaration is not required to make an object definition extensible:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>API clients consuming data must not assume that objects are closed for
extension in the absence of an <code>additionalProperties</code> declaration and
must ignore fields sent by the server they cannot process. This allows
API servers to evolve their data formats.</p>
</li>
<li>
<p>For API servers receiving unexpected data, the situation is slightly
different. Instead of ignoring fields, servers <em>may</em> reject requests
whose entities contain undefined fields in order to signal to clients
that those fields would not be stored on behalf of the client. API
designers must document clearly how unexpected fields are handled for
PUT, POST and PATCH requests.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>API formats must not declare <code>additionalProperties</code> to be false, as this
prevents objects being extended in the future.</p>
</div>
<div class="paragraph">
<p>Note that this guideline concentrates on default extensibility and does
not exclude the use of <code>additionalProperties</code> with a schema as a value,
which might be appropriate in some circumstances, e.g. see <a href="#216"><span class="should-keyword"><strong>Should</strong></span>: Define Maps Using <code>additionalProperties</code></a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="112"><a class="link" href="#112"><span class="should-keyword"><strong>Should</strong></span>: Used Open-Ended List of Values (x-extensible-enum) Instead of Enumerations</a></h3>
<div class="paragraph">
<p>Enumerations are per definition closed sets of values, that are assumed
to be complete and not intended for extension. This closed principle of
enumerations imposes compatibility issues when an enumeration must be
extended. To avoid these issues, we strongly recommend to use an
open-ended list of values instead of an enumeration unless:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>the API has full control of the enumeration values, i.e. the list of
values does not depend on any external tool or interface, and</p>
</li>
<li>
<p>the list of value is complete with respect to any thinkable and
unthinkable future feature.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To specify an open-ended list of values use the marker
<code>x-extensible-enum</code> as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">deliver_methods</span>:
  <span class="key">type</span>: <span class="string"><span class="content">string</span></span>
  <span class="key">x-extensible-enum</span>:
    - <span class="string"><span class="content">parcel</span></span>
    - <span class="string"><span class="content">letter</span></span>
    - <span class="string"><span class="content">email</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Note:</strong> <code>x-extensible-enum</code> is not JSON Schema conform but will be
ignored by most tools.</p>
</div>
</div>
<div class="sect2">
<h3 id="113"><a class="link" href="#113"><span class="should-keyword"><strong>Should</strong></span>: Avoid Versioning</a></h3>
<div class="paragraph">
<p>When changing your RESTful APIs, do so in a compatible way and avoid
generating additional API versions. Multiple versions can significantly
complicate understanding, testing, maintaining, evolving, operating and
releasing our systems
(<a href="http://martinfowler.com/articles/enterpriseREST.html">supplementary
reading</a>).</p>
</div>
<div class="paragraph">
<p>If changing an API cant be done in a compatible way, then proceed in
one of these three ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>create a new resource (variant) in addition to the old resource
variant</p>
</li>
<li>
<p>create a new service endpoint  i.e. a new application with a new API
(with a new domain name)</p>
</li>
<li>
<p>create a new API version supported in parallel with the old API by the
same microservice</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As we discourage versioning by all means because of the manifold
disadvantages, we strongly recommend to only use the first two approaches.</p>
</div>
</div>
<div class="sect2">
<h3 id="114"><a class="link" href="#114"><span class="must-keyword"><strong>Must</strong></span>: Use Media Type Versioning</a></h3>
<div class="paragraph">
<p>However, when API versioning is unavoidable, you have to design your
multi-version RESTful APIs using media type versioning (instead of URI
versioning, see below). Media type versioning is less tightly coupled
since it supports content negotiation and hence reduces complexity of
release management.</p>
</div>
<div class="paragraph">
<p>Media type versioning: Here, version information and media type are
provided together via the HTTP Content-Type header  e.g.
application/x.zalando.cart+json;version=2. For incompatible changes, a
new media type version for the resource is created. To generate the new
representation version, consumer and producer can do content negotiation
using the HTTP Content-Type and Accept headers. Note: This versioning
only applies to the request and response content schema, not to URI or
method semantics.</p>
</div>
<div class="paragraph">
<p>In this example, a client wants only the new version of the response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="http">Accept: application/x.zalando.cart+json;version=2</code></pre>
</div>
</div>
<div class="paragraph">
<p>A server responding to this, as well as a client sending a request with
content should use the Content-Type header, declaring that one is
sending the new version:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="http">Content-Type: application/x.zalando.cart+json;version=2</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using header versioning should:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>include versions in request and response headers to increase
visibility</p>
</li>
<li>
<p>include Content-Type in the Vary header to enable proxy caches to
differ between versions</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Hint: Until an incompatible change is necessary, it is recommended to stay
with the standard <code>application/json</code> media type.</p>
</div>
<div class="paragraph">
<p>Hint: <a href="https://github.com/OAI/OpenAPI-Specification/issues/146">OpenAPI
currently doesnt support content negotiation</a>, though
<a href="https://github.com/OAI/OpenAPI-Specification/issues/146#issuecomment-117288707">a
comment in this issue</a> mentions a workaround (using a fragment
identifier that gets stripped off). Another way would be to document
just the new version, but let the server accept the old one (with the
previous content-type).</p>
</div>
<div class="paragraph">
<p>Further reading:
<a href="https://blog.apisyouwonthate.com/api-versioning-has-no-right-way-f3c75457c0b7">API Versioning Has No "Right Way"</a>
provides an overview on different versioning approaches to handle breaking changes without being opinionated.</p>
</div>
</div>
<div class="sect2">
<h3 id="115"><a class="link" href="#115"><span class="must-keyword"><strong>Must</strong></span>: Do Not Use URI Versioning</a></h3>
<div class="paragraph">
<p>With URI versioning a (major) version number is included in the path,
e.g. /v1/customers. The consumer has to wait until the provider has been
released and deployed. If the consumer also supports hypermedia links 
even in their APIs  to drive workflows (HATEOAS), this quickly becomes
complex. So does coordinating version upgrades  especially with
hyperlinked service dependencies  when using URL versioning. To avoid
this tighter coupling and complexer release management we do not use URI
versioning, and go instead with media type versioning and content
negotiation (see above).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="deprecation"><a class="link" href="#deprecation">7. Deprecation</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Sometimes it is necessary to phase out an API endpoint (or version), for instance,
if a field is no longer supported in the result or a whole business functionality
behind an endpoint has to be shut down. There are many other reasons as well.
As long as these endpoints are still used by consumers these are breaking
changes and not allowed. Deprecation rules have to be applied to make sure that
necessary consumer changes are aligned and deprecated endpoints are not used
before API changes are deployed.</p>
</div>
<div class="sect2">
<h3 id="185"><a class="link" href="#185"><span class="must-keyword"><strong>Must</strong></span>: Obtain Approval of Clients</a></h3>
<div class="paragraph">
<p>Before shutting down an API (or version of an API) the producer must
make sure, that all clients have given their consent to shut down the
endpoint. Producers should help consumers to migrate to a potential new
endpoint (i.e. by providing a migration manual). After all clients are
migrated, the producer may shut down the deprecated API.</p>
</div>
</div>
<div class="sect2">
<h3 id="186"><a class="link" href="#186"><span class="must-keyword"><strong>Must</strong></span>: External Partners Must Agree on Deprecation Timespan</a></h3>
<div class="paragraph">
<p>If the API is consumed by any external partner, the producer must define
a reasonable timespan that the API will be maintained after the producer
has announced deprecation. The external partner (client) must agree to
this minimum after-deprecation-lifespan before he starts using the API.</p>
</div>
</div>
<div class="sect2">
<h3 id="187"><a class="link" href="#187"><span class="must-keyword"><strong>Must</strong></span>: Reflect Deprecation in API Definition</a></h3>
<div class="paragraph">
<p>API deprecation must be part of the OpenAPI definition. If a method on a
path, a whole path or even a whole API endpoint (multiple paths) should
be deprecated, the producers must set <code>deprecated=true</code> on each method /
path element that will be deprecated (OpenAPI 2.0 only allows you to
define deprecation on this level). If deprecation should happen on a
more fine grained level (i.e. query parameter, payload etc.), the
producer should set <code>deprecated=true</code> on the affected method / path
element and add further explanation to the <code>description</code> section.</p>
</div>
<div class="paragraph">
<p>If <code>deprecated</code> is set to <code>true</code>, the producer must describe what
clients should use instead and when the API will be shut down in the
<code>description</code> section of the API definition.</p>
</div>
</div>
<div class="sect2">
<h3 id="188"><a class="link" href="#188"><span class="must-keyword"><strong>Must</strong></span>: Monitor Usage of Deprecated APIs</a></h3>
<div class="paragraph">
<p>Owners of APIs used in production must monitor usage of deprecated APIs
until the API can be shut down in order to align deprecation and avoid
uncontrolled breaking effects. See also the <a href="#193"><span class="should-keyword"><strong>Should</strong></span>: Monitor API Usage</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="189"><a class="link" href="#189"><span class="should-keyword"><strong>Should</strong></span>: Add a Warning Header to Responses</a></h3>
<div class="paragraph">
<p>During deprecation phase, the producer should add a <code>Warning</code> header
(see <a href="https://tools.ietf.org/html/rfc7234#section-5.5">RFC 7234 - Warning
header</a>) field. When adding the <code>Warning</code> header, the <code>warn-code</code> must
be <code>299</code> and the <code>warn-text</code> should be in form of <em>"The
path/operation/parameter/&#8230;&#8203; {name} is deprecated and will be removed
by {date}. Please see {link} for details."</em> with a link to a
documentation describing why the API is no longer supported in the
current form and what clients should do about it. Adding the <code>Warning</code>
header is not sufficient to gain client consent to shut down an API.</p>
</div>
</div>
<div class="sect2">
<h3 id="190"><a class="link" href="#190"><span class="should-keyword"><strong>Should</strong></span>: Add Monitoring for Warning Header</a></h3>
<div class="paragraph">
<p>Clients should monitor the <code>Warning</code> header in HTTP responses to see if
an API will be deprecated in future.</p>
</div>
</div>
<div class="sect2">
<h3 id="191"><a class="link" href="#191"><span class="must-keyword"><strong>Must</strong></span>: Not Start Using Deprecated APIs</a></h3>
<div class="paragraph">
<p>Clients must not start using deprecated parts of an API.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="json-guidelines"><a class="link" href="#json-guidelines">8. JSON Guidelines</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>These guidelines provides recommendations for defining JSON data at
10M. JSON here refers to
<a href="http://www.rfc-editor.org/rfc/rfc7159.txt">RFC 7159</a> (which updates
<a href="https://www.ietf.org/rfc/rfc4627.txt">RFC 4627</a>), the "application/json"
media type and custom JSON media types defined for APIs. The guidelines
clarifies some specific cases to allow 10M JSON data to have an
idiomatic form across teams and services.</p>
</div>
<div class="paragraph">
<p>The first some of the following guidelines are about property names,
the later ones about values.</p>
</div>
<div class="sect2">
<h3 id="118"><a class="link" href="#118"><span class="must-keyword"><strong>Must</strong></span>: Property names must be ASCII lowerCamelCase): <code>^[a-z][a-zA-Z0-9]*$</code></a></h3>
<div class="paragraph">
<p>Property names are restricted to ASCII strings. The first
character must be a letter, or an underscore, and subsequent
characters can be a letter, or a number.</p>
</div>
<div class="paragraph">
<p>(It is recommended to use <code>_</code> at the start of property names only for keywords like <code>_links</code>.)</p>
</div>
<div class="paragraph">
<p>Rationale: No established industry standard exists, but many popular Internet
companies prefer snake_case: e.g. GitHub, Stack Exchange, Twitter.
Others, like Google and Amazon, use both - but not only camelCase. Its
essential to establish a consistent look and feel such that JSON looks
as if it came from the same hand.</p>
</div>
</div>
<div class="sect2">
<h3 id="216"><a class="link" href="#216"><span class="should-keyword"><strong>Should</strong></span>: Define Maps Using <code>additionalProperties</code></a></h3>
<div class="paragraph">
<p>A "map" here is a mapping from string keys to some other type.
In JSON this is represented as an object, the key-value pairs being represented
by property names and property values.
In OpenAPI schema (as well as in JSON schema) they should be represented using
additionalProperties with a schema defining the value type. Such an object should normally
have no other defined properties.</p>
</div>
<div class="paragraph">
<p>The map keys don&#8217;t count as property names in the sense of <a href="#118">rule 118</a>, and can
follow whatever format is natural for their domain. Please document this in the description
of the map object&#8217;s schema.</p>
</div>
<div class="paragraph">
<p>Here is an example for such a map definition (the <code>translations</code> property):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">definitions</span>:
  <span class="key">Message</span>:
    <span class="key">description</span>:
      <span class="error">A message together with translations in several languages.</span>
    <span class="key">type</span>: <span class="string"><span class="content">object</span></span>
    <span class="key">properties</span>:
      <span class="key">message_key</span>:
        <span class="key">type</span>: <span class="string"><span class="content">string</span></span>
        <span class="key">description</span>: <span class="string"><span class="content">The message key.</span></span>
      <span class="key">translations</span>:
        <span class="key">description</span>:
          <span class="error">The translations of this message into several languages.</span>
          <span class="error">The keys are https://tools.ietf.org/html/bcp47[BCP-47 language tags].</span>
        <span class="key">type</span>: <span class="string"><span class="content">object</span></span>
        <span class="key">additionalProperties</span>:
          <span class="key">type</span>: <span class="string"><span class="content">string</span></span>
          <span class="key">description</span>:
            <span class="error">the translation of this message into the language identified by the key.</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>An actual JSON object described by this might then look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{ <span class="key"><span class="delimiter">&quot;</span><span class="content">messageKey</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">color</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">translations</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">de</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Farbe</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">en-US</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">color</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">en-GB</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">colour</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">eo</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">koloro</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">nl</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">kleur</span><span class="delimiter">&quot;</span></span>
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="120"><a class="link" href="#120"><span class="should-keyword"><strong>Should</strong></span>: Array names should be pluralized</a></h3>
<div class="paragraph">
<p>To indicate they contain multiple values prefer to pluralize array
names. This implies that object names should in turn be singular.</p>
</div>
</div>
<div class="sect2">
<h3 id="122"><a class="link" href="#122"><span class="must-keyword"><strong>Must</strong></span>: Boolean property values must not be null</a></h3>
<div class="paragraph">
<p>Schema based JSON properties that are by design booleans must not be
presented as nulls. A boolean is essentially a closed enumeration of two
values, true and false. If the content has a meaningful null value,
strongly prefer to replace the boolean with enumeration of named values
or statuses - for example accepted_terms_and_conditions with true or
false can be replaced with terms_and_conditions with values yes, no and
unknown.</p>
</div>
</div>
<div class="sect2">
<h3 id="123"><a class="link" href="#123"><span class="should-keyword"><strong>Should</strong></span>: Null values should have their fields removed</a></h3>
<div class="paragraph">
<p>Swagger/OpenAPI, which is in common use, doesn&#8217;t support null field
values (it does allow omitting that field completely if it is not marked
as required). However that doesn&#8217;t prevent clients and servers sending
and receiving those fields with null values. Also, in some cases null
may be a meaningful value - for example, JSON Merge Patch
<a href="https://tools.ietf.org/html/rfc7386">RFC 7382</a>) using null to indicate
property deletion.</p>
</div>
</div>
<div class="sect2">
<h3 id="124"><a class="link" href="#124"><span class="should-keyword"><strong>Should</strong></span>: Empty array values should not be null</a></h3>
<div class="paragraph">
<p>Empty array values can unambiguously be represented as the empty
list, <code>[]</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="125"><a class="link" href="#125"><span class="should-keyword"><strong>Should</strong></span>: Enumerations should be represented as Strings</a></h3>
<div class="paragraph">
<p>Strings are a reasonable target for values that are by design
enumerations.</p>
</div>
</div>
<div class="sect2">
<h3 id="126"><a class="link" href="#126"><span class="should-keyword"><strong>Should</strong></span>: Date property values should conform to RFC 3339</a></h3>
<div class="paragraph">
<p>Use the date and time formats defined by
<a href="http://tools.ietf.org/html/rfc3339#section-5.6">RFC 3339</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>for "date" use strings matching
<code>date-fullyear "-" date-month "-" date-mday</code>, for example: <code>2015-05-28</code></p>
</li>
<li>
<p>for "date-time" use strings matching <code>full-date "T" full-time</code>, for
example <code>2015-05-28T14:07:17Z</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that the
<a href="https://github.com/OAI/OpenAPI-Specification/blob/master/versions/2.0.md#data-types">OpenAPI
format</a> "date-time" corresponds to "date-time" in the RFC) and
<code>2015-05-28</code> for a date (note that the OpenAPI format "date" corresponds
to "full-date" in the RFC). Both are specific profiles, a subset of the
international standard <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a>.</p>
</div>
<div class="paragraph">
<p>A zone offset may be used (both, in request and responses)&#8201;&#8212;&#8201;this is
simply defined by the standards. However, we encourage restricting dates
to UTC and without offsets. For example <code>2015-05-28T14:07:17Z</code> rather
than <code>2015-05-28T14:07:17+00:00</code>. From experience we have learned that
zone offsets are not easy to understand and often not correctly handled.
Note also that zone offsets are different from local times that might be
including daylight saving time. Localization of dates should be done by
the services that provide user interfaces, if required.</p>
</div>
<div class="paragraph">
<p>When it comes to storage, all dates should be consistently stored in UTC
without a zone offset. Localization should be done locally by the
services that provide user interfaces, if required.</p>
</div>
<div class="paragraph">
<p>Sometimes it can seem data is naturally represented using numerical
timestamps, but this can introduce interpretation issues with precision
- for example whether to represent a timestamp as 1460062925,
1460062925000 or 1460062925.000. Date strings, though more verbose and
requiring more effort to parse, avoid this ambiguity.</p>
</div>
</div>
<div class="sect2">
<h3 id="127"><a class="link" href="#127"><span class="may-keyword"><strong>May</strong></span>: Time durations and intervals could conform to ISO 8601</a></h3>
<div class="paragraph">
<p>Schema based JSON properties that are by design durations and intervals
could be strings formatted as recommended by ISO 8601
(<a href="https://tools.ietf.org/html/rfc3339#appendix-A">Appendix A of RFC 3339
contains a grammar</a> for durations).</p>
</div>
</div>
<div class="sect2">
<h3 id="128"><a class="link" href="#128"><span class="may-keyword"><strong>May</strong></span>: Standards could be used for Language, Country and Currency</a></h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2">ISO 3166-1-alpha2 country</a></p>
</li>
<li>
<p>(It&#8217;s "GB", not "UK", even though "UK" has seen some use at Zalando)</p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes">ISO 639-1 language code</a></p>
</li>
<li>
<p><a href="https://tools.ietf.org/html/bcp47">BCP-47</a> (based on ISO 639-1) for language variants</p>
</li>
<li>
<p><a href="http://en.wikipedia.org/wiki/ISO_4217">ISO 4217 currency codes</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="api-naming"><a class="link" href="#api-naming">9. API Naming</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="223"><a class="link" href="#223"><span class="must-keyword"><strong>Must</strong></span>/<span class="should-keyword"><strong>Should</strong></span>: Use Functional Naming Schema</a></h3>
<div class="paragraph">
<p>Functional naming is a powerful, yet easy way to align global resources as
<em>host</em>, <em>permission</em>, and <em>event names</em> within an the application landscape. It
helps to preserve uniqueness of names while giving readers meaningful context
information about the addressed component. Besides, the most important aspect
is, that it allows to keep APIs stable in the case of technical and
organizational changes (Zalando for example maintains an internal naming convention).</p>
</div>
<div class="paragraph">
<p>To make use of this advantages for APIs with a larger <a href="#219">audience</a> we
strongly recommended to follow the functional naming schema for <a href="#224">hostnames</a>, <a href="#215">permission names</a>, and <a href="#213">event names</a> in APIs as
follows:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Functional Naming</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Audience</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>must</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">external-public, external-partner</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>should</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">company-internal, business-unit-internal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>may</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">component-internal</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>To conduct the functional naming schema, a unique <code>functional-name</code> is assigned
to each functional component. It is built of the domain name of the functional
group the component is belonging to and a unique a short identifier for the
functional component itself:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bnf">&lt;functional-name&gt;       ::= &lt;functional-domain&gt;-&lt;functional-component&gt;
&lt;functional-domain&gt;     ::= [a-z][a-z0-9]*  -- managed functional group of components
&lt;functional-component&gt;  ::= [a-z][a-z0-9-]* -- name of owning functional component</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Internal Hint</strong>:  Use the simple
<a href="https://github.bus.zalan.do/team-architecture/functional-component-registry">functional
name registry (internal link)</a> to register your functional name before using
it. The registry is a centralized infrastructure service to ensure uniqueness
of your functional names (and available domains) and to support hostname DNS
resolution.</p>
</div>
<div class="paragraph">
<p>Please see the following rules for detailed functional naming patterns:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#224">[224]</a></p>
</li>
<li>
<p><a href="#213">[213]</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="129"><a class="link" href="#129"><span class="must-keyword"><strong>Must</strong></span>: Use lowercase separate words for Path Segments</a></h3>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="http">/crop-order/{cropOrderId}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This applies to concrete path segments and not the names of path
parameters. For example <code>{cropOrderId}</code> would be ok as a path
parameter.</p>
</div>
</div>
<div class="sect2">
<h3 id="130"><a class="link" href="#130"><span class="must-keyword"><strong>Must</strong></span>: Use lowerCamelCase for Query Parameters</a></h3>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>toolIdentifier, fieldId</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="132"><a class="link" href="#132"><span class="should-keyword"><strong>Should</strong></span>: Prefer Hyphenated-Pascal-Case for HTTP header Fields</a></h3>
<div class="paragraph">
<p>This is for consistency in your documentation (most other headers follow
this convention). Avoid camelCase (without hyphens). Exceptions are
common abbreviations like "ID."</p>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="http">Accept-Encoding
Apply-To-Redirect-Ref
Disposition-Notification-Options
Original-Message-ID</code></pre>
</div>
</div>
<div class="paragraph">
<p>See also: <a href="http://tools.ietf.org/html/rfc7230#page-22">HTTP Headers are
case-insensitive (RFC 7230)</a>.</p>
</div>
<div class="paragraph">
<p>See <a href="#common-headers">Common Headers</a> sections for more guidance
on HTTP headers.</p>
</div>
</div>
<div class="sect2">
<h3 id="134"><a class="link" href="#134"><span class="must-keyword"><strong>Must</strong></span>: Pluralize Resource Names</a></h3>
<div class="paragraph">
<p>Usually, a collection of resource instances is provided (at least API
should be ready here). The special case of a resource singleton is a
collection with cardinality 1.</p>
</div>
</div>
<div class="sect2">
<h3 id="135"><a class="link" href="#135"><span class="may-keyword"><strong>May</strong></span>: Use /api as first Path Segment</a></h3>
<div class="paragraph">
<p>In most cases, all resources provided by a service are part of the
public API, and therefore should be made available under the root "/"
base path. If the service should also support non-public, internal APIs
 for specific operational support functions, for example  add "/api"
as base path to clearly separate public and non-public API resources.</p>
</div>
</div>
<div class="sect2">
<h3 id="136"><a class="link" href="#136"><span class="must-keyword"><strong>Must</strong></span>: Avoid Trailing Slashes</a></h3>
<div class="paragraph">
<p>The trailing slash must not have specific semantics. Resource paths must
deliver the same results whether they have the trailing slash or not.</p>
</div>
</div>
<div class="sect2">
<h3 id="137"><a class="link" href="#137"><span class="may-keyword"><strong>May</strong></span>: Use Conventional Query Strings</a></h3>
<div class="paragraph">
<p>If you provide query support for sorting, pagination, filtering
functions or other actions, use the following standardized naming
conventions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>q</code>  default query parameter (e.g. used by browser tab completion);
should have an entity specific alias, like sku</p>
</li>
<li>
<p><code>limit</code>  to restrict the number of entries. See Pagination section
below. Hint: You can use size as an alternate query string.</p>
</li>
<li>
<p><code>cursor</code>  key-based page start. See <a href="#pagination">Pagination</a> section below.</p>
</li>
<li>
<p><code>offset</code>  numeric offset page start. See <a href="#pagination">Pagination</a> section below.
Hint: In combination with limit, you can use page as an alternative to
offset.</p>
</li>
<li>
<p><code>sort</code>  comma-separated list of fields to sort. To indicate sorting
direction, fields may be prefixed with + (ascending) or - (descending,
default), e.g. /sales-orders?sort=+id</p>
</li>
<li>
<p><code>fields</code>  to retrieve a subset of fields. See
<a href="#157"><em>Support Filtering of Resource Fields</em></a> below.</p>
</li>
<li>
<p><code>embed</code>  to expand embedded entities (ie.: inside of an article
entity, expand silhouette code into the silhouette object). Implementing
"expand" correctly is difficult, so do it with care.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resources"><a class="link" href="#resources">10. Resources</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="138"><a class="link" href="#138"><span class="must-keyword"><strong>Must</strong></span>: Avoid Actions  Think About Resources</a></h3>
<div class="paragraph">
<p>REST is all about your resources, so consider the domain entities that
take part in web service interaction, and aim to model your API around
these using the standard HTTP methods as operation indicators. For
instance, if an application has to lock articles explicitly so that only
one user may edit them, create an article lock with PUT or POST instead
of using a lock action.</p>
</div>
<div class="paragraph">
<p>Request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="http">PUT /article-locks/{article-id}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The added benefit is that you already have a service for browsing and
filtering article locks.</p>
</div>
</div>
<div class="sect2">
<h3 id="139"><a class="link" href="#139"><span class="should-keyword"><strong>Should</strong></span>: Model complete business processes</a></h3>
<div class="paragraph">
<p>An API should contain the complete business processes containing all
resources representing the process. This enables clients to understand
the business process, foster a consistent design of the business
process, allow for synergies from description and implementation
perspective, and eliminates implicit invisible dependencies between
APIs.</p>
</div>
<div class="paragraph">
<p>In addition, it prevents services from being designed as thin wrappers
around databases, which normally tends to shift business logic to the
clients.</p>
</div>
</div>
<div class="sect2">
<h3 id="140"><a class="link" href="#140"><span class="should-keyword"><strong>Should</strong></span>: Define <em>useful</em> resources</a></h3>
<div class="paragraph">
<p>As a rule of thumb resources should be defined to cover 90% of all its
client&#8217;s use cases. A <em>useful</em> resource should contain as much
information as necessary, but as little as possible. A great way to
support the last 10% is to allow clients to specify their needs for
more/less information by supporting filtering and <a href="#157">embedding</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="141"><a class="link" href="#141"><span class="must-keyword"><strong>Must</strong></span>: Keep URLs Verb-Free</a></h3>
<div class="paragraph">
<p>The API describes resources, so the only place where actions should
appear is in the HTTP methods. In URLs, use only nouns. Instead of
thinking of actions (verbs), it&#8217;s often helpful to think about putting a
message in a letter box: e.g., instead of having the verb <em>cancel</em> in
the url, think of sending a message to cancel an order to the
<em>cancellations</em> letter box on the server side.</p>
</div>
</div>
<div class="sect2">
<h3 id="142"><a class="link" href="#142"><span class="must-keyword"><strong>Must</strong></span>: Use Domain-Specific Resource Names</a></h3>
<div class="paragraph">
<p>API resources represent elements of the applications domain model.
Using domain-specific nomenclature for resource names helps developers
to understand the functionality and basic semantics of your resources.
It also reduces the need for further documentation outside the API
definition. For example, "sales-order-items" is superior to
"order-items" in that it clearly indicates which business object it
represents. Along these lines, "items" is too general.</p>
</div>
</div>
<div class="sect2">
<h3 id="143"><a class="link" href="#143"><span class="must-keyword"><strong>Must</strong></span>: Identify resources and Sub-Resources via Path Segments</a></h3>
<div class="paragraph">
<p>Some API resources may contain or reference sub-resources. Embedded
sub-resources, which are not top-level resources, are parts of a
higher-level resource and cannot be used outside of its scope.
Sub-resources should be referenced by their name and identifier in the
path segments.</p>
</div>
<div class="paragraph">
<p>Composite identifiers must not contain <code>/</code> as a separator. In order to
improve the consumer experience, you should aim for intuitively
understandable URLs, where each sub-path is a valid reference to a
resource or a set of resources. For example, if
<code>/customers/12ev123bv12v/addresses/DE_100100101</code> is a valid path of your
API, then <code>/customers/12ev123bv12v/addresses</code>, <code>/customers/12ev123bv12v</code>
and <code>/customers</code> must be valid as well in principle.</p>
</div>
<div class="paragraph">
<p>Basic URL structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="http">/{resources}/[resource-id]/{sub-resources}/[sub-resource-id]
/{resources}/[partial-id-1][separator][partial-id-2]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="http">/carts/1681e6b88ec1/items
/carts/1681e6b88ec1/items/1
/customers/12ev123bv12v/addresses/DE_100100101
/content/images/9cacb4d8</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="144"><a class="link" href="#144"><span class="should-keyword"><strong>Should</strong></span>: Use UUIDs</a></h3>
<div class="paragraph">
<p>Generating IDs can be a scaling problem in high frequency and near real
time use cases. UUIDs solve this problem, as they can be generated
without collisions in a distributed, non-coordinated way and without
additional server round trips.</p>
</div>
</div>
<div class="sect2">
<h3 id="145"><a class="link" href="#145"><span class="may-keyword"><strong>May</strong></span>: Consider Using (Non-) Nested URLs</a></h3>
<div class="paragraph">
<p>If a sub-resource is only accessible via its parent resource and may not
exists without parent resource, consider using a nested URL structure,
for instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="http">/carts/1681e6b88ec1/cart-items/1</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, if the resource can be accessed directly via its unique id,
then the API should expose it as a top-level resource. For example,
customer has a collection for sales orders; however, sales orders have
globally unique id and some services may choose to access the orders
directly, for instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="http">/customers/1681e6b88ec1
/sales-orders/5273gh3k525a</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="146"><a class="link" href="#146"><span class="should-keyword"><strong>Should</strong></span>: Limit number of Resource types</a></h3>
<div class="paragraph">
<p>To keep maintenance and service evolution manageable, we should follow
"functional segmentation" and "separation of concern" design principles
and do not mix different business functionalities in same API
definition. In practice this means that the number of resource types
exposed via an API should be limited. In this context a resource type is
defined as a set of highly related resources such as a collection, its
members and any direct sub-resources.</p>
</div>
<div class="paragraph">
<p>For example, the resources below would be counted as three resource
types, one for customers, one for the addresses, and one for the
customers' related addresses:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="http">/customers
/customers/{id}
/customers/{id}/preferences
/customers/{id}/addresses
/customers/{id}/addresses/{addr}
/addresses
/addresses/{addr}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>We consider <code>/customers/{id}/preferences</code> part of the <code>/customers</code>
resource type because it has a one-to-one relation to the customer
without an additional identifier.</p>
</li>
<li>
<p>We consider <code>/customers</code> and <code>/customers/{id}/addresses</code> as separate
resource types because <code>/customers/{id}/addresses/{addr}</code> also exists
with an additional identifier for the address.</p>
</li>
<li>
<p>We consider <code>/addresses</code> and <code>/customers/{id}/addresses</code> as separate
resource types because there&#8217;s no reliable way to be sure they are the
same.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Given this definition, our experience is that well defined APIs involve
no more than 4 to 8 resource types. There may be exceptions with more
complex business domains that require more resources, but you should
first check if you can split them into separate subdomains with distinct
APIs.</p>
</div>
<div class="paragraph">
<p>Nevertheless one API should hold all necessary resources to model
complete business processes helping clients to understand these flows.</p>
</div>
</div>
<div class="sect2">
<h3 id="147"><a class="link" href="#147"><span class="should-keyword"><strong>Should</strong></span>: Limit number of Sub-Resource Levels</a></h3>
<div class="paragraph">
<p>There are main resources (with root url paths) and sub-resources (or
"nested" resources with non-root urls paths). Use sub-resources if their
life cycle is (loosely) coupled to the main resource, i.e. the main
resource works as collection resource of the subresource entities. You
should use &#8656; 3 sub-resource (nesting) levels&#8201;&#8212;&#8201;more levels increase
API complexity and url path length. (Remember, some popular web browsers
do not support URLs of more than 2000 characters)</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="http-requests"><a class="link" href="#http-requests">11. HTTP Requests</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="148"><a class="link" href="#148"><span class="must-keyword"><strong>Must</strong></span>: Use HTTP Methods Correctly</a></h3>
<div class="paragraph">
<p>Be compliant with the standardized HTTP method semantics summarized as
follows:</p>
</div>
<div class="sect3">
<h4 id="get"><a class="link" href="#get">GET</a></h4>
<div class="paragraph">
<p>GET requests are used to <strong>read</strong> either a single or a collection resource.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>GET requests for individual resources will usually generate a 404 if the
resource does not exist</p>
</li>
<li>
<p>GET requests for collection resources may return either 200 (if the
collection is empty) or 404 (if the collection is missing)</p>
</li>
<li>
<p>GET requests must NOT have a request body payload</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Note:</strong> GET requests on collection resources should provide sufficient
<a href="#filter">#137</a> and <a href="#pagination">Pagination</a> mechanisms.</p>
</div>
</div>
<div class="sect3">
<h4 id="get-with-body"><a class="link" href="#get-with-body">GET with Body</a></h4>
<div class="paragraph">
<p>APIs sometimes face the problem, that they have to provide extensive
structured request information with GET, that may conflicts with the size
limits of clients, load-balancers, and servers. As we require APIs to be
standard conform (body in GET must be ignored on server side), API designers
have to check the following two options:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>GET with URL encoded query parameters: when it is possible to encode the
request information in query parameters, respecting the usual size limits of
clients, gateways, and servers, this should be the first choice. The request
information can either be provided distributed to multiple query parameters or
a single structured URL encoded string.</p>
</li>
<li>
<p>POST with body content: when a GET with URL encoded query parameters is not
possible, a POST with body content must be used. In this case the endpoint
must be documented with the hint <code>GET with body</code> to transport the GET semantic
of this call.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Note:</strong> It is no option to encode the lengthy structured request information
in header parameters. From a conceptual point of view, the semantic of an
operation should always be expressed by resource name and query parameters,
i.e. what goes into the URL. Request headers are reserved for general context
information, e.g. FlowIDs. In addition, size limits on query parameters and
headers are not reliable and depend on clients, gateways, server, and actual
settings. Thus, switching to headers does not solve the original problem.</p>
</div>
</div>
<div class="sect3">
<h4 id="put"><a class="link" href="#put">PUT</a></h4>
<div class="paragraph">
<p>PUT requests are used to <strong>update</strong> (in rare cases to create) <strong>entire</strong>
resources - single or collection resources. The semantic is best described
as <em>"please put the enclosed representation at the resource mentioned by
the URL, replacing any existing resource."</em>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>PUT requests are usually applied to single resources, and not to collection
resources, as this would imply replacing the entire collection</p>
</li>
<li>
<p>PUT requests are usually robust against non-existence of resources by
implicitly creating before updating</p>
</li>
<li>
<p>on successful PUT requests, the server will <strong>replace the entire resource</strong>
addressed by the URL with the representation passed in the payload (subsequent
reads will deliver the same payload)</p>
</li>
<li>
<p>successful PUT requests will usually generate 200 or 204 (if the resource
was updated - with or without actual content returned), and 201 (if the
resource was created)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Important:</strong> It is best practice to prefer POST over PUT for creation of (at
least top-level) resources. This leaves the resource ID under control of the
service and allows to concentrate on the update semantic using PUT as follows.</p>
</div>
<div class="paragraph">
<p><strong>Tip:</strong> To prevent unnoticed concurrent updates when using PUT, the combination
of <a href="#182"><code>ETag</code> and <code>If-(None-)Match</code></a> headers should be considered to signal
the server stricter demands to expose conflicts and prevent lost updates.
The section <a href="#optimistic-locking">Optimistic Locking in RESTful APIs</a> also describes some alternatives to this
approach.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> In the rare cases where PUT is although used for resource creation,
the resource IDs are maintained by the client and passed as a URL path segment.
Putting the same resource twice is required to be idempotent and to result in
the same single resource instance. If PUT is applied for creating a resource,
only URIs should be allowed as resource IDs. If URIs are not available POST
should be preferred.</p>
</div>
</div>
<div class="sect3">
<h4 id="post"><a class="link" href="#post">POST</a></h4>
<div class="paragraph">
<p>POST requests are idiomatically used to <strong>create</strong> single resources on a
collection resource endpoint, but other semantics on single resources endpoint
are equally possible. The semantic for collection endpoints is best described
as <em>"please add the enclosed representation to the collection resource
identified by the URL"</em>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>on a successful POST request, the server will create one or multiple new
resources and provide their URI/URLs in the response</p>
</li>
<li>
<p>successful POST requests will usually generate 200 (if resources have been
updated), 201 (if resources have been created), and 202 (if the request was
accepted but has not been finished yet)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The semantic for single resource endpoints is best described as <em>"please
execute the given well specified request on the resource identified by the
URL"</em>.</p>
</div>
<div class="paragraph">
<p><strong>Generally:</strong> POST should be used for scenarios that cannot be covered by the
other methods sufficiently. In such cases, make sure to document the fact that
POST is used as a workaround (see <a href="#get-with-body">GET with Body</a>).</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> Resource IDs with respect to POST requests are created and maintained
by server and returned with response payload.</p>
</div>
<div class="paragraph">
<p><strong>Tip:</strong> Posting the same resource twice is by itself <strong>not</strong> required to be
<em>idempotent</em> and may result in multiple resource instances. However, it is
best practice to implement POST <em>idempotent</em>, by temporary or permanently
storing <em>foreign keys</em> or <em>idempotency keys</em> to identify re-send requests on
the server. Here, a <em>foreign key</em> is a natural partner resource ID, e.g. the
shopping cart ID is a <em>foreign key</em> candidate for an order, while an
<em>idempotency key</em> is an artificial request key that is preserved when
re-sending the POST request.</p>
</div>
</div>
<div class="sect3">
<h4 id="patch"><a class="link" href="#patch">PATCH</a></h4>
<div class="paragraph">
<p>PATCH requests are used to <strong>update parts</strong> of single resources, i.e. where only
a specific subset of resource fields should be replaced. The semantic is best
described as <em>"please change the resource identified by the URL according to my
change request"</em>. The semantic of the change request is not defined in the HTTP
standard and must be described in the API specification by using suitable media
types.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>PATCH requests are usually applied to single resources as patching entire
collection is challenging</p>
</li>
<li>
<p>PATCH requests are usually not robust against non-existence of resource
instances</p>
</li>
<li>
<p>on successful PATCH requests, the server will update parts of the resource
addressed by the URL as defined by the change request in the payload</p>
</li>
<li>
<p>successful PATCH requests will usually generate 200 or 204 (if resources
have been updated with or without updated content returned)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Note:</strong> since implementing PATCH correctly is a bit tricky, we strongly suggest
to choose one and only one of the following patterns per endpoint, unless
forced by a <a href="#106">backwards compatible change</a>. In preference order:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>use PUT with complete objects to update a resource as long as feasible (i.e.
do not use PATCH at all).</p>
</li>
<li>
<p>use PATCH with partial objects to only update parts of a resource, whenever
possible. (This is basically <a href="https://tools.ietf.org/html/rfc7396">JSON Merge
Patch</a>, a specialized media type <code>application/merge-patch+json</code> that is a partial
resource representation.)</p>
</li>
<li>
<p>use PATCH with <a href="http://tools.ietf.org/html/rfc6902">JSON Patch</a>, a specialized
media type <code>application/json-patch+json</code> that includes instructions on how to
change the resource.</p>
</li>
<li>
<p>use POST (with a proper description of what is happening) instead of PATCH,
if the request does not modify the resource in a way defined by the semantics
of the media type.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In practice <a href="https://tools.ietf.org/html/rfc7396">JSON Merge Patch</a> quickly turns
out to be too limited, especially when trying to update single objects in large
collections (as part of the resource). In this cases
<a href="http://tools.ietf.org/html/rfc6902">JSON Patch</a> can shown its full power while
still showing readable patch requests (see also
<a href="http://erosb.github.io/post/json-patch-vs-merge-patch">JSON patch vs. merge</a>).</p>
</div>
<div class="paragraph">
<p><strong>Tip:</strong> To prevent unnoticed concurrent updates when using PATCH, the
combination of <a href="#182"><code>ETag`and `If-Match</code></a> headers should be considered to
signal the server stricter demands to expose conflicts and prevent lost
updates.</p>
</div>
</div>
<div class="sect3">
<h4 id="delete"><a class="link" href="#delete">DELETE</a></h4>
<div class="paragraph">
<p>DELETE requests are used to <strong>delete</strong> resources. The semantic is best described
as <em>"please delete the resource identified by the URL"</em>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DELETE requests are usually applied to single resources, not on collection
resources, as this would imply deleting the entire collection</p>
</li>
<li>
<p>successful DELETE requests will usually generate 200 (if the deleted resource
is returned) or 204 (if no content is returned)</p>
</li>
<li>
<p>failed DELETE requests will usually generate 404 (if the resource cannot be
found) or 410 (if the resource was already deleted before)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Important:</strong> After deleting a resource with DELETE, a GET request on the
resource is expected to either return 404 (not found) or 410 (gone) depending
on how the resource is represented after deletion. Under no circumstances the
resource must be accessible after this operation on its endpoint.</p>
</div>
</div>
<div class="sect3">
<h4 id="head"><a class="link" href="#head">HEAD</a></h4>
<div class="paragraph">
<p>HEAD requests are used to <strong>retrieve</strong> the header information of single resources
and resource collections.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>HEAD has exactly the same semantics as GET, but returns headers only, no
body.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Hint:</strong> This is particular useful to efficiently lookup whether large resources
or collection resources have been updated in conjunction with the
<a href="https://tools.ietf.org/html/rfc7232#section-2.3"><code>ETag</code>-header</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="options"><a class="link" href="#options">OPTIONS</a></h4>
<div class="paragraph">
<p>OPTIONS requests are used to <strong>inspect</strong> the available operations (HTTP methods)
of a given endpoint.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>OPTIONS responses usually either return a comma separated list of methods in
the <code>Allow</code> header or as a structured list of link templates</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Note:</strong> OPTIONS is rarely implemented, though it could be used to self-describe
the full functionality of a resource.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="149"><a class="link" href="#149"><span class="must-keyword"><strong>Must</strong></span>: Fulfill Safeness and Idempotency Properties</a></h3>
<div class="paragraph">
<p>An operation can be&#8230;&#8203;</p>
</div>
<div class="ulist">
<ul>
<li>
<p>idempotent, i.e. operation will have the same effect on the server&#8217;s state if executed
once or multiple times (note: this does not necessarily mean returning
the same response or status code)</p>
</li>
<li>
<p>safe, i.e. must not have side effects such as state changes</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Method implementations must fulfill the following basic properties:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">HTTP method</th>
<th class="tableblock halign-left valign-top">safe</th>
<th class="tableblock halign-left valign-top">idempotent</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OPTIONS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HEAD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELETE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PATCH</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Please see also <a href="https://goo.gl/vhwh8a">Best Practices [internal link</a>]
for further hints on how to support the different HTTP methods on
resources.</p>
</div>
</div>
<div class="sect2">
<h3 id="154"><a class="link" href="#154"><span class="should-keyword"><strong>Should</strong></span>: Define Collection Format of Query Parameters and Headers</a></h3>
<div class="paragraph">
<p>Sometimes, query parameters and headers allow to provide a list of values,
either by providing a comma-separated list (<code>csv</code>) or by repeating the
parameter multiple times with different values (<code>multi</code>). The API
specification should explicitly define one type as follows:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 25%;">
<col style="width: 35%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">OpenAPI 3.0</th>
<th class="tableblock halign-left valign-top">OpenAPI 2.0</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma separated values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>style: form, explode: false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectionFormat: csv</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>?param=value1,value2</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multiple parameters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>style: form, explode: true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>collectionFormat: multi</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>?param=value1&amp;param=value2</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>When choosing the collection format, take into account the tool support,
the escaping of special characters and the maximal URL length.</p>
</div>
</div>
<div class="sect2">
<h3 id="226"><a class="link" href="#226"><span class="must-keyword"><strong>Must</strong></span>: Document Implicit Filtering</a></h3>
<div class="paragraph">
<p>Sometimes certain collection resources or queries will not list all the
possible elements they have, but only those for which the current client
is authorized to access.</p>
</div>
<div class="paragraph">
<p>Implicit filtering could be done on:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the collection of resources being return on a parent <code>GET</code> request</p>
</li>
<li>
<p>the fields returned for the resource&#8217;s detail</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In such cases, the implicit filtering must be in the API Specification (in its description).</p>
</div>
<div class="paragraph">
<p>Consider <a href="#227">caching considerations</a> when implicitely filtering.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="paragraph">
<p>If an employee of the company <em>Foo</em> accesses one of our business-to-business
service and performs a <code>GET /business-partners</code>, it must, for legal reasons, not display
any other business partner that is not owned or contractually managed by her/his company.
It should never see that we are doing business also with company <em>Bar</em>.</p>
</div>
<div class="paragraph">
<p>Response as seen from a consumer working at <code>FOO</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">items</span><span class="delimiter">&quot;</span></span>: [
        { <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Foo Performance</span><span class="delimiter">&quot;</span></span> },
        { <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Foo Sport</span><span class="delimiter">&quot;</span></span> },
        { <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Foo Signature</span><span class="delimiter">&quot;</span></span> }
    ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Response as seen from a consumer working at <code>BAR</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">items</span><span class="delimiter">&quot;</span></span>: [
        { <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Bar Classics</span><span class="delimiter">&quot;</span></span> },
        { <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Bar pour Elle</span><span class="delimiter">&quot;</span></span> }
    ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The API Specification should then specify something like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">  <span class="key">/business-partner</span>:
    <span class="key">get</span>:
      <span class="key">description</span>: <span class="string"><span class="delimiter">&gt;-</span><span class="content">
        Get the list of registered business partner.
        Only the business partners to which you have access to are returned.</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="http-status-codes-and-errors"><a class="link" href="#http-status-codes-and-errors">12. HTTP Status Codes And Errors</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="151"><a class="link" href="#151"><span class="must-keyword"><strong>Must</strong></span>: Specify Success and Error Responses</a></h3>
<div class="paragraph">
<p>APIs should define the functional, business view and abstract from
implementation aspects. Success and error responses are a vital part to
define how an API is used correctly.</p>
</div>
<div class="paragraph">
<p>Therefore, you must define <strong>all</strong> success and service specific error
responses in your API specification. Both are part of the interface definition
and provide important information for service clients to handle standard as
well as exceptional situations.</p>
</div>
<div class="paragraph">
<p><strong>Hint:</strong> In most cases it is not useful to document all technical errors,
especially if they are not under control of the service provider. Thus unless
a response code conveys application-specific functional semantics or is used
in a none standard way that requires additional explanation, multiple error
response specifications can be combined using the following pattern:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">responses</span>:
  <span class="error">...</span>
  <span class="key">default</span>:
    <span class="key">description</span>: <span class="string"><span class="content">error occurred - see status code and problem object for more information.</span></span>
    <span class="key">schema</span>:
      <span class="error">$ref</span>: <span class="error">'https://zalando.github.io/problem/schema.yaml#/Problem'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>API designers should also think about a <strong>troubleshooting board</strong> as part of
the associated online API documentation. It provides information and handling
guidance on application-specific errors and is referenced via links from the
API specification. This can reduce service support tasks and contribute to
service client and provider performance.</p>
</div>
</div>
<div class="sect2">
<h3 id="150"><a class="link" href="#150"><span class="must-keyword"><strong>Must</strong></span>: Use Standard HTTP Status Codes</a></h3>
<div class="paragraph">
<p>You must only use standardized HTTP status codes consistently with their
intended semantics. You must not invent new HTTP status codes.</p>
</div>
<div class="paragraph">
<p>RFC standards define ~60 different HTTP status codes with specific semantics
(mainly <a href="https://tools.ietf.org/html/rfc7231#section-6">RFC7231</a> and
<a href="https://tools.ietf.org/html/rfc6585">RFC-6585</a>)  and there are upcoming
new ones, e.g.
<a href="https://tools.ietf.org/html/draft-tbray-http-legally-restricted-status-05">draft
legally-restricted-status</a>. See overview on all error codes on
<a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes">Wikipedia</a> or
via <a href="https://httpstatuses.com/" class="bare">https://httpstatuses.com/</a>) also inculding 'unofficial codes', e.g. used
by popular web servers like Nginx.</p>
</div>
<div class="paragraph">
<p>Below we list the most commonly used and best understood HTTP status codes,
consistent with their semantic in the RFCs. APIs should only use these to
prevent misconceptions that arise from less commonly used HTTP status codes.</p>
</div>
<div class="paragraph">
<p><strong>Important:</strong> As long as your HTTP status code usage is well covered by the
semantic defined here, you should not describe it to avoid an overload with
common sense information and the risk of inconsistent definitions. Only if the
HTTP status code is not in the list below or its usage requires additional
information aside the well defined semantic, the API specification must provide
a clear description of the HTTP status code in the response.</p>
</div>
<div class="sect3">
<h4 id="success-codes"><a class="link" href="#success-codes">Success Codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Code</th>
<th class="tableblock halign-left valign-top">Meaning</th>
<th class="tableblock halign-left valign-top">Methods</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK - this is the standard success response</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">201</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Created - Returned on successful entity creation. You are free to
return either an empty response or the created resource in conjunction
with the Location header. (More details found in the
<a href="#common-headers">Common Headers</a>.) <em>Always</em> set the Location header.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST, PUT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">202</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Accepted - The request was successful and will be processed
asynchronously.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST, PUT, DELETE, PATCH</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">204</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No content - There is no response body</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT, DELETE, PATCH</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">207</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Multi-Status - The response body contains multiple status
informations for different parts of a batch/bulk request. See
<a href="#152"><span class="must-keyword"><strong>Must</strong></span>: Use Code 207 for Batch or Bulk Requests</a>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="redirection-codes"><a class="link" href="#redirection-codes">Redirection Codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Code</th>
<th class="tableblock halign-left valign-top">Meaning</th>
<th class="tableblock halign-left valign-top">Methods</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">301</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Moved Permanently - This and all future requests should be
directed to the given URI.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">303</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">See Other - The response to the request can be found under another
URI using a GET method.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PATCH, POST, PUT, DELETE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">304</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not Modified - resource has not been modified since the date or
version passed via request headers If-Modified-Since or If-None-Match.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">GET</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="client-side-error-codes"><a class="link" href="#client-side-error-codes">Client Side Error Codes</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Code</th>
<th class="tableblock halign-left valign-top">Meaning</th>
<th class="tableblock halign-left valign-top">Methods</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">400</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Bad request - generic / unknown error.
Should also be delivered in case of input payload fails business logic validation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">401</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unauthorized - the users must log in (this often means
"Unauthenticated")</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">403</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Forbidden - the user is not authorized to use this resource</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not found - the resource is not found</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">405</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Method Not Allowed - the method is not supported, see OPTIONS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">406</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not Acceptable - resource can only generate content not acceptable
according to the Accept headers sent in the request</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">408</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request timeout - the server times out waiting for the resource</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">409</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Conflict - request cannot be completed due to conflict, e.g. when
two clients try to create the same resource or if there are concurrent,
conflicting updates</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST, PUT, DELETE, PATCH</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">410</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gone - resource does not exist any longer, e.g. when accessing a
resource that has intentionally been deleted</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">412</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Precondition Failed - returned for conditional requests, e.g.
If-Match if the condition failed. Used for optimistic locking.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT,
DELETE, PATCH</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">415</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unsupported Media Type - e.g. clients sends request body without
content type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">POST, PUT, DELETE, PATCH</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">423</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Locked - Pessimistic locking, e.g. processing states</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PUT, DELETE,
PATCH</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">428</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Precondition Required - server requires the request to be
conditional (e.g. to make sure that the "lost update problem" is
avoided).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">429</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Too many requests - the client does not consider rate limiting and
sent too many requests. See <a href="#153"><span class="must-keyword"><strong>Must</strong></span>: Use Code 429 with Headers for Rate Limits</a>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="server-side-error-codes"><a class="link" href="#server-side-error-codes">Server Side Error Codes:</a></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 70%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Code</th>
<th class="tableblock halign-left valign-top">Meaning</th>
<th class="tableblock halign-left valign-top">Methods</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">500</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Internal Server Error - a generic error indication for an
unexpected server execution problem (here, client retry may be sensible)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">501</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not Implemented - server cannot fulfill the request (usually
implies future availability, e.g. new feature).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">503</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service Unavailable - service is (temporarily) not available (e.g.
if a required component or downstream service is not available)&#8201;&#8212;&#8201;client
retry may be sensible. If possible, the service should indicate how long
the client should wait by setting the
<a href="https://tools.ietf.org/html/rfc7231#section-7.1.3">'Retry-After'</a>
header.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="220"><a class="link" href="#220"><span class="must-keyword"><strong>Must</strong></span>: Use Most Specific HTTP Status Codes</a></h3>
<div class="paragraph">
<p>You must use the most specific HTTP status code when returning information
about your request processing status or error situations.</p>
</div>
</div>
<div class="sect2">
<h3 id="152"><a class="link" href="#152"><span class="must-keyword"><strong>Must</strong></span>: Use Code 207 for Batch or Bulk Requests</a></h3>
<div class="paragraph">
<p>Some APIs are required to provide either <em>batch</em> or <em>bulk</em> requests
using POST for performance reasons, i.e. for communication and
processing efficiency. In this case services may be in need to signal
multiple response codes for each part of an batch or bulk request. As
HTTP does not provide proper guidance for handling batch/bulk requests
and responses, we herewith define the following approach:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A batch or bulk request <strong>always</strong> has to respond with HTTP status code
<strong>207</strong>, unless it encounters a generic or unexpected failure before
looking at individual parts.</p>
</li>
<li>
<p>A batch or bulk response with status code 207 <strong>always</strong> returns a
multi-status object containing sufficient status and/or monitoring
information for each part of the batch or bulk request.</p>
</li>
<li>
<p>A batch or bulk request may result in a status code 400/500, only if
the service encounters a failure before looking at individual parts or,
if an unanticipated failure occurs.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The before rules apply <em>even in the case</em> that processing of all
individual part <em>fail</em> or each part is executed <em>asynchronously</em>! They
are intended to allow clients to act on batch and bulk responses by
inspecting the individual results in a consistent way.</p>
</div>
<div class="paragraph">
<p><strong>Note</strong>: while a <em>batch</em> defines a collection of requests triggering
independent processes, a <em>bulk</em> defines a collection of independent
resources created or updated together in one request. With respect to
response processing this distinction normally does not matter.</p>
</div>
</div>
<div class="sect2">
<h3 id="153"><a class="link" href="#153"><span class="must-keyword"><strong>Must</strong></span>: Use Code 429 with Headers for Rate Limits</a></h3>
<div class="paragraph">
<p>APIs that wish to manage the request rate of clients must use the
<a href="http://tools.ietf.org/html/rfc6585">'429 Too Many Requests'</a> response
code if the client exceeded the request rate and therefore the request
can&#8217;t be fulfilled. Such responses must also contain header information
providing further details to the client. There are two approaches a
service can take for header information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Return a
<a href="https://tools.ietf.org/html/rfc7231#section-7.1.3">'Retry-After'</a> header
indicating how long the client ought to wait before making a follow-up
request. The Retry-After header can contain a HTTP date value to retry
after or the number of seconds to delay. Either is acceptable but APIs
should prefer to use a delay in seconds.</p>
</li>
<li>
<p>Return a trio of 'X-RateLimit' headers. These headers (described
below) allow a server to express a service level in the form of a number
of allowing requests within a given window of time and when the window
is reset.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The 'X-RateLimit' headers are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>X-RateLimit-Limit</code>: The maximum number of requests that the client is
allowed to make in this window.</p>
</li>
<li>
<p><code>X-RateLimit-Remaining</code>: The number of requests allowed in the current
window.</p>
</li>
<li>
<p><code>X-RateLimit-Reset</code>: The relative time in seconds when the rate limit
window will be reset. <strong>Beware</strong> that this is different to Github and
Twitter&#8217;s usage of a header with the same name which is using UTC epoch
seconds instead.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The reason to allow both approaches is that APIs can have different
needs. Retry-After is often sufficient for general load handling and
request throttling scenarios and notably, does not strictly require the
concept of a calling entity such as a tenant or named account. In turn
this allows resource owners to minimise the amount of state they have to
carry with respect to client requests. The 'X-RateLimit' headers are
suitable for scenarios where clients are associated with pre-existing
account or tenancy structures. 'X-RateLimit' headers are generally
returned on every request and not just on a 429, which implies the
service implementing the API is carrying sufficient state to track the
number of requests made within a given window for each named entity.</p>
</div>
</div>
<div class="sect2">
<h3 id="176"><a class="link" href="#176"><span class="must-keyword"><strong>Must</strong></span>: Use Problem JSON</a></h3>
<div class="paragraph">
<p><a href="http://tools.ietf.org/html/rfc7807">RFC 7807</a> defines a Problem JSON object and
the media type <code>application/problem+json</code>. Operations should return it (together with
a suitable status code) when any problem occurred during processing and
you can give more details than the status code itself can supply,
whether it be caused by the client or the server (i.e. both for 4xx or
5xx error codes).</p>
</div>
<div class="paragraph">
<p>The Open API schema definition of the Problem JSON object can be found
<a href="https://zalando.github.io/problem/schema.yaml">on github</a>. You can
reference it by using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">responses</span>:
  <span class="key">503</span>:
    <span class="key">description</span>: <span class="string"><span class="content">Service Unavailable</span></span>
    <span class="key">schema</span>:
      <span class="error">$ref</span>: <span class="error">'https://zalando.github.io/problem/schema.yaml#/Problem'</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You may define custom problem types as extension of the Problem JSON object
if your API need to return specific additional error detail information.</p>
</div>
<div class="paragraph">
<p><strong>Hint</strong> for backward compatibility:
A previous version of this guideline (before the publication of
<a href="http://tools.ietf.org/html/rfc7807">RFC 7807</a>
and the registration of the media type) told to return
custom variant of the media type <code>application/x.problem+json</code>.
Servers for APIs defined before this change should pay attention to the
<code>Accept</code> header sent by the client and set the <code>Content-Type</code> header of
the problem response correspondingly. Clients of such APIs should accept
both media types.</p>
</div>
</div>
<div class="sect2">
<h3 id="177"><a class="link" href="#177"><span class="must-keyword"><strong>Must</strong></span>: Do not expose Stack Traces</a></h3>
<div class="paragraph">
<p>Stack traces contain implementation details that are not part of an API,
and on which clients should never rely. Moreover, stack traces can leak
sensitive information that partners and third parties are not allowed to
receive and may disclose insights about vulnerabilities to attackers.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="performance"><a class="link" href="#performance">13. Performance</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="155"><a class="link" href="#155"><span class="should-keyword"><strong>Should</strong></span>: Reduce Bandwidth Needs and Improve Responsiveness</a></h3>
<div class="paragraph">
<p>APIs should support techniques for reducing bandwidth based on client
needs. This holds for APIs that (might) have high payloads and/or are
used in high-traffic scenarios like the public Internet and
telecommunication networks. Typical examples are APIs used by mobile web
app clients with (often) less bandwidth connectivity. (Zalando is a
'Mobile First' company, so be mindful of this point.)</p>
</div>
<div class="paragraph">
<p>Common techniques include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#156">gzip compression</a></p>
</li>
<li>
<p>querying field filters to retrieve a subset of resource attributes
(see <a href="#157"><span class="should-keyword"><strong>Should</strong></span>: Support Filtering of Resource Fields</a> below)</p>
</li>
<li>
<p>paginate lists of data items (see <a href="#pagination">Pagination</a> below)</p>
</li>
<li>
<p><code>ETag</code> and <code>If-(None-)Match</code> headers to avoid re-fetching of unchanged
resources (see <a href="#182"><span class="may-keyword"><strong>May</strong></span>: Consider Using ETag Together With If-Match/If-None-Match Header</a></p>
</li>
<li>
<p>pagination for incremental access of larger (result) lists</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each of these items is described in greater detail below.</p>
</div>
</div>
<div class="sect2">
<h3 id="156"><a class="link" href="#156"><span class="should-keyword"><strong>Should</strong></span>: Use gzip Compression</a></h3>
<div class="paragraph">
<p>Compress the payload of your APIs responses with gzip, unless theres a
good reason not to  for example, you are serving so many requests that
the time to compress becomes a bottleneck. This helps to transport data
faster over the network (fewer bytes) and makes frontends respond
faster.</p>
</div>
<div class="paragraph">
<p>Though gzip compression might be the default choice for server payload,
the server should also support payload without compression and its
client control via Accept-Encoding request header&#8201;&#8212;&#8201;see also
<a href="http://tools.ietf.org/html/rfc7231#section-5.3.4">RFC 7231 Section
5.3.4</a>. The server should indicate used gzip compression via the
Content-Encoding header.</p>
</div>
</div>
<div class="sect2">
<h3 id="157"><a class="link" href="#157"><span class="should-keyword"><strong>Should</strong></span>: Support Filtering of Resource Fields</a></h3>
<div class="paragraph">
<p>Depending on your use case and payload size, you can significantly
reduce network bandwidth need by supporting filtering of returned entity
fields. Here, the client can determine the subset of fields he wants to
receive via the fields query parameter  example see
<a href="https://cloud.google.com/appengine/docs/python/taskqueue/rest/performance#partial-response">Google
AppEngine API&#8217;s partial response</a>:</p>
</div>
<div class="sect3">
<h4 id="unfiltered"><a class="link" href="#unfiltered">Unfiltered</a></h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="http">GET http://api.example.org/resources/123 HTTP/1.1

HTTP/1.1 200 OK
Content-Type: application/json

{
  &quot;id&quot;: &quot;cddd5e44-dae0-11e5-8c01-63ed66ab2da5&quot;,
  &quot;name&quot;: &quot;John Doe&quot;,
  &quot;address&quot;: &quot;1600 Pennsylvania Avenue Northwest, Washington, DC, United States&quot;,
  &quot;birthday&quot;: &quot;1984-09-13&quot;,
  &quot;partner&quot;: {
    &quot;id&quot;: &quot;1fb43648-dae1-11e5-aa01-1fbc3abb1cd0&quot;,
    &quot;name&quot;: &quot;Jane Doe&quot;,
    &quot;address&quot;: &quot;1600 Pennsylvania Avenue Northwest, Washington, DC, United States&quot;,
    &quot;birthday&quot;: &quot;1988-04-07&quot;
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="filtered"><a class="link" href="#filtered">Filtered</a></h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="http">GET http://api.example.org/resources/123?fields=(name,partner(name)) HTTP/1.1

HTTP/1.1 200 OK
Content-Type: application/json

{
  &quot;name&quot;: &quot;John Doe&quot;,
  &quot;partner&quot;: {
    &quot;name&quot;: &quot;Jane Doe&quot;
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As illustrated by this example, field filtering should be done via
request parameter "fields" with value range defined by the following
<a href="https://en.wikipedia.org/wiki/Backus%E2%80%93Naur_form">BNF</a> grammar.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bnf">&lt;fields&gt; ::= &lt;negation&gt; &lt;fields_expression&gt; | &lt;fields_expression&gt;

&lt;negation&gt; ::= &quot;!&quot;

&lt;fields_expression&gt; ::= &quot;(&quot; &lt;field_set&gt; &quot;)&quot;

&lt;field_set&gt; ::= &lt;qualified_field&gt; | &lt;qualified_field&gt; &quot;,&quot; &lt;field_set&gt;

&lt;qualified_field&gt; ::= &lt;field&gt; | &lt;field&gt; &lt;fields_expression&gt;

&lt;field&gt; ::= &lt;DASH_LETTER_DIGIT&gt; | &lt;DASH_LETTER_DIGIT&gt; &lt;field&gt;

&lt;DASH_LETTER_DIGIT&gt; ::= &lt;DASH&gt; | &lt;LETTER&gt; | &lt;DIGIT&gt;

&lt;DASH&gt; ::= &quot;-&quot; | &quot;_&quot;

&lt;LETTER&gt; ::= &quot;A&quot; | &quot;B&quot; | &quot;C&quot; | &quot;D&quot; | &quot;E&quot; | &quot;F&quot; | &quot;G&quot; | &quot;H&quot; | &quot;I&quot; | &quot;J&quot; | &quot;K&quot; | &quot;L&quot; | &quot;M&quot; | &quot;N&quot; | &quot;O&quot; | &quot;P&quot; | &quot;Q&quot; | &quot;R&quot; | &quot;S&quot; | &quot;T&quot; | &quot;U&quot; | &quot;V&quot; | &quot;W&quot; | &quot;X&quot; | &quot;Y&quot; | &quot;Z&quot; | &quot;a&quot; | &quot;b&quot; | &quot;c&quot; | &quot;d&quot; | &quot;e&quot; | &quot;f&quot; | &quot;g&quot; | &quot;h&quot; | &quot;i&quot; | &quot;j&quot; | &quot;k&quot; | &quot;l&quot; | &quot;m&quot; | &quot;n&quot; | &quot;o&quot; | &quot;p&quot; | &quot;q&quot; | &quot;r&quot; | &quot;s&quot; | &quot;t&quot; | &quot;u&quot; | &quot;v&quot; | &quot;w&quot; | &quot;x&quot; | &quot;y&quot; | &quot;z&quot;

&lt;DIGIT&gt; ::= &quot;0&quot; | &quot;1&quot; | &quot;2&quot; | &quot;3&quot; | &quot;4&quot; | &quot;5&quot; | &quot;6&quot; | &quot;7&quot; | &quot;8&quot; | &quot;9&quot;</code></pre>
</div>
</div>
<div class="paragraph">
<p>A <code>fields_expression</code> as defined by the grammar describes the properties
of an object, i.e. <code>(name)</code> returns only the <code>name</code> property of the root
object. <code>(name,partner(name))</code> returns the <code>name</code> and <code>partner</code>
properties where <code>partner</code> itself is also an object and only its <code>name</code>
property is returned.</p>
</div>
<div class="paragraph">
<p>Hint: OpenAPI doesn&#8217;t allow you to formally specify whether depending on
a given parameter will return different parts of the specified result
schema. Explain this in English in the parameter description.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="158"><a class="link" href="#158"><span class="should-keyword"><strong>Should</strong></span>: Allow Optional Embedding of Sub-Resources</a></h3>
<div class="paragraph">
<p>Embedding related resources (also know as <em>Resource expansion</em>) is a
great way to reduce the number of requests. In cases where clients know
upfront that they need some related resources they can instruct the
server to prefetch that data eagerly. Whether this is optimized on the
server, e.g. a database join, or done in a generic way, e.g. an HTTP
proxy that transparently embeds resources, is up to the implementation.</p>
</div>
<div class="paragraph">
<p>See <a href="#137"><span class="may-keyword"><strong>May</strong></span>: Use Conventional Query Strings</a> for naming, e.g. "embed" for steering of embedded
resource expansion. Please use the
<a href="https://en.wikipedia.org/wiki/Backus%E2%80%93Naur_form">BNF</a> grammar, as
already defined above for filtering, when it comes to an embedding query
syntax.</p>
</div>
<div class="paragraph">
<p>Embedding a sub-resource can possibly look like this where an order
resource has its order items as sub-resource (/order/{orderId}/items):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="http">GET /order/123?embed=(items) HTTP/1.1

{
  &quot;id&quot;: &quot;123&quot;,
  &quot;_embedded&quot;: {
    &quot;items&quot;: [
      {
        &quot;position&quot;: 1,
        &quot;sku&quot;: &quot;1234-ABCD-7890&quot;,
        &quot;price&quot;: {
          &quot;amount&quot;: 71.99,
          &quot;currency&quot;: &quot;EUR&quot;
        }
      }
    ]
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="227"><a class="link" href="#227"><span class="must-keyword"><strong>Must</strong></span>: Document Caching, if Supported</a></h3>
<div class="paragraph">
<p>If an API is intended to support caching, it must take care to specify
this ability by defining the caching boundaries i.e. time-to-live and
cache constraints, by providing the <code>Cache-Control</code> and <code>Vary</code> headers
(Please read <a href="https://tools.ietf.org/html/rfc7234">RFC-7234</a> carefully).</p>
</div>
<div class="paragraph">
<p>Caching has to take many aspects into account, e.g. general cacheability
of response information, our guideline to protect endpoints using SSL
and <a href="#104">OAuth authorization</a>, resource update and invalidation rules,
existence of multiple consumer instances. As a consequence, caching is
in best case complex, in worst case inefficient. Thus, client side and
transparent HTTP caching should be avoided for RESTful APIs unless the
API designer has proven to know better.</p>
</div>
<div class="paragraph">
<p>As default, API providers should set the <code>Cache-Control: no-cache</code> header.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> There is no need to document this default setting, that is
attached to each response automatically by most frameworks. However, any
use deviating from this default must be sufficiently documented.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="pagination"><a class="link" href="#pagination">14. Pagination</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="159"><a class="link" href="#159"><span class="must-keyword"><strong>Must</strong></span>: Support Pagination</a></h3>
<div class="paragraph">
<p>Access to lists of data items must support pagination for best client
side batch processing and iteration experience. This holds true for all
lists that are (potentially) larger than just a few hundred entries.</p>
</div>
<div class="paragraph">
<p>There are two page iteration techniques:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://developer.infoconnect.com/paging-results">Offset/Limit-based
pagination</a>: numeric offset identifies the first page entry</p>
</li>
<li>
<p><a href="https://dev.twitter.com/overview/api/cursoring">Cursor-based</a>  aka
key-based  pagination: a unique key element identifies the first page
entry (see also
<a href="https://developers.facebook.com/docs/graph-api/using-graph-api/v2.4#paging">Facebooks
guide</a>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The technical conception of pagination should also consider user
experience related issues. As mentioned in this
<a href="https://www.smashingmagazine.com/2016/03/pagination-infinite-scrolling-load-more-buttons/">article</a>,
jumping to a specific page is far less used than navigation via
next/previous page links. This favours cursor-based over offset-based
pagination.</p>
</div>
</div>
<div class="sect2">
<h3 id="160"><a class="link" href="#160"><span class="should-keyword"><strong>Should</strong></span>: Prefer Cursor-Based Pagination, Avoid Offset-Based Pagination</a></h3>
<div class="paragraph">
<p>Cursor-based pagination is usually better and more efficient when
compared to offset-based pagination. Especially when it comes to
high-data volumes and / or storage in NoSQL databases.</p>
</div>
<div class="paragraph">
<p>Before choosing cursor-based pagination, consider the following
trade-offs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Usability/framework support:</p>
<div class="ulist">
<ul>
<li>
<p>Offset / limit based pagination is more known than cursor-based
pagination, so it has more framework support and is easier to use for
API clients</p>
</li>
</ul>
</div>
</li>
<li>
<p>Use case: Jump to a certain page</p>
<div class="ulist">
<ul>
<li>
<p>If jumping to a particular page in a range (e.g., 51 of 100) is
really a required use case, cursor-based navigation is not feasible</p>
</li>
</ul>
</div>
</li>
<li>
<p>Variability of data may lead to anomalies in result pages</p>
<div class="ulist">
<ul>
<li>
<p>Offset-based pagination may create duplicates or lead to missing
entries if rows are inserted or deleted between two subsequent paging
requests.</p>
</li>
<li>
<p>When using cursor-based pagination, paging cannot continue when the
cursor entry has been deleted while fetching two pages</p>
</li>
</ul>
</div>
</li>
<li>
<p>Performance considerations - efficient server-side processing using
offset-based pagination is hardly feasible for:</p>
<div class="ulist">
<ul>
<li>
<p>Higher data list volumes, especially if they do not reside in the
databases main memory</p>
</li>
<li>
<p>Sharded or NoSQL databases</p>
</li>
</ul>
</div>
</li>
<li>
<p>Cursor-based navigation may not work if you need the total count of
results and / or backward iteration support</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Further reading:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://dev.twitter.com/rest/public/timelines">Twitter</a></p>
</li>
<li>
<p><a href="http://use-the-index-luke.com/no-offset">Use the Index, Luke</a></p>
</li>
<li>
<p><a href="https://www.citusdata.com/blog/1872-joe-nelson/409-five-ways-paginate-postgres-basic-exotic">Paging
in PostgreSQL</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="161"><a class="link" href="#161"><span class="may-keyword"><strong>May</strong></span>: Use Pagination Links Where Applicable</a></h3>
<div class="ulist">
<ul>
<li>
<p>API implementing <a href="#163">HATEOS</a> may use <a href="#165">simplified hypertext controls</a>
for pagination within collections.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Those collections should then have an <code>items</code> attribute holding the
items of the current page. The collection may contain additional
metadata about the collection or the current page (e.g. <code>index</code>,
<code>page_size</code>) when necessary.</p>
</div>
<div class="paragraph">
<p>You should avoid providing a total count in your API unless there&#8217;s a
clear need to do so. Very often, there are systems and performance
implications to supporting full counts, especially as datasets grow and
requests become complex queries or filters that drive full scans (e.g.,
your database might need to look at all candidate items to count them).
While this is an implementation detail relative to the API, it&#8217;s
important to consider your ability to support serving counts over the
life of a service.</p>
</div>
<div class="paragraph">
<p>If the collection consists of links to other resources, the collection
name should use
<a href="http://www.iana.org/assignments/link-relations/link-relations.xml">IANA
registered link relations</a> as names whenever appropriate, but use plural
form.</p>
</div>
<div class="paragraph">
<p>E.g. a service for articles could represent the collection of hyperlinks
to an article&#8217;s <code>authors</code> like that:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">self</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">https://.../articles/xyz/authors/</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">index</span><span class="delimiter">&quot;</span></span>: <span class="integer">0</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">page_size</span><span class="delimiter">&quot;</span></span>: <span class="integer">5</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">items</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">href</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">https://...</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">123e4567-e89b-12d3-a456-426655440000</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Kent Beck</span><span class="delimiter">&quot;</span></span>
    },
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">href</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">https://...</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">987e2343-e89b-12d3-a456-426655440000</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Mike Beedle</span><span class="delimiter">&quot;</span></span>
    },
    <span class="error">.</span><span class="error">.</span><span class="error">.</span>
  ],
  <span class="key"><span class="delimiter">&quot;</span><span class="content">first</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">https://...</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">next</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">https://...</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">prev</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">https://...</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">last</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">https://...</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="hypermedia"><a class="link" href="#hypermedia">15. Hypermedia</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="162"><a class="link" href="#162"><span class="must-keyword"><strong>Must</strong></span>: Use REST Maturity Level 2</a></h3>
<div class="paragraph">
<p>We strive for a good implementation of
<a href="http://martinfowler.com/articles/richardsonMaturityModel.html#level2">REST
Maturity Level 2</a> as it enables us to build resource-oriented APIs that
make full use of HTTP verbs and status codes. You can see this expressed
by many rules throughout these guidelines, e.g.:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#138"><span class="must-keyword"><strong>Must</strong></span>: Avoid Actions  Think About Resources</a></p>
</li>
<li>
<p><a href="#141"><span class="must-keyword"><strong>Must</strong></span>: Keep URLs Verb-Free</a></p>
</li>
<li>
<p><a href="#148"><span class="must-keyword"><strong>Must</strong></span>: Use HTTP Methods Correctly</a></p>
</li>
<li>
<p><a href="#150"><span class="must-keyword"><strong>Must</strong></span>: Use Standard HTTP Status Codes</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Although this is not HATEOAS, it should not prevent you from designing
proper link relationships in your APIs as stated in rules below.</p>
</div>
</div>
<div class="sect2">
<h3 id="163"><a class="link" href="#163"><span class="may-keyword"><strong>May</strong></span>: Use REST Maturity Level 3 - HATEOAS</a></h3>
<div class="paragraph">
<p>We do not generally recommend to implement
<a href="http://martinfowler.com/articles/richardsonMaturityModel.html#level3">REST
Maturity Level 3</a>. HATEOAS comes with additional API complexity without
real value in our SOA context where client and server interact via REST
APIs and provide complex business functions as part of our e-commerce
SaaS platform.</p>
</div>
<div class="paragraph">
<p>Our major concerns regarding the promised advantages of HATEOAS (see
also
<a href="https://www.infoq.com/news/2014/03/rest-at-odds-with-web-apis">RESTistential
Crisis over Hypermedia APIs</a>,
<a href="https://jeffknupp.com/blog/2014/06/03/why-i-hate-hateoas/">Why I Hate
HATEOAS</a> and others for a detailed discussion):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>We follow the <a href="#100">API First principle</a>
with APIs explicitly defined outside the code with
standard specification language. HATEOAS does not really add value for
SOA client engineers in terms of API self-descriptiveness: a client
engineer finds necessary links and usage description (depending on
resource state) in the API reference definition anyway.</p>
</li>
<li>
<p>Generic HATEOAS clients which need no prior knowledge about APIs and explore
API capabilities based on hypermedia information provided, is a theoretical
concept that we haven&#8217;t seen working in practice and does not fit to our
SOA set-up. The OpenAPI description format (and tooling based on
OpenAPI) doesn&#8217;t provide sufficient support for HATEOAS either.</p>
</li>
<li>
<p>In practice relevant HATEOAS approximations (e.g. following specifications
like HAL or JSON API) support API navigation by abstracting from URL
endpoint and HTTP method aspects via link types. So, Hypermedia does not
prevent clients from required manual changes when domain model changes
over time.</p>
</li>
<li>
<p>Hypermedia make sense for humans, less for SOA machine
clients. We would expect use cases where it may provide value more
likely in the frontend and human facing service domain.</p>
</li>
<li>
<p>Hypermedia does not prevent API clients to implement shortcuts and directly
target resources without 'discovering' them.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>However, we do not forbid HATEOAS; you could use it, if you checked its
limitations and still see clear value for your usage scenario that
justifies its additional complexity. If you use HATEOAS please share
experience and present your findings in the
<a href="https://confluence.zalando.net/display/GUL/API+Guild">API Guild [internal
link</a>].</p>
</div>
</div>
<div class="sect2">
<h3 id="217"><a class="link" href="#217"><span class="must-keyword"><strong>Must</strong></span>: Use full, absolute URI</a></h3>
<div class="paragraph">
<p>Links to other resource must always use full, absolute URI.</p>
</div>
<div class="paragraph">
<p><strong>Motivation</strong>: Exposing any form of relative URI (no matter if the relative
URI uses an absolute or relative path) introduces avoidable client side
complexity. It also requires clarity on the base URI, which might not be given
when using features like embedding subresources. The primary advantage
of non-absolute URI is reduction of the payload size, which is better
achievable by following the recommendation to use <a href="#156">gzip compression</a></p>
</div>
</div>
<div class="sect2">
<h3 id="164"><a class="link" href="#164"><span class="must-keyword"><strong>Must</strong></span>: Use Common Hypertext Controls</a></h3>
<div class="paragraph">
<p>When embedding links to other resources into representations you must
use the common hypertext control object. It contains at least one
attribute:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>href</code>: The URI of the resource the hypertext control is linking to.
All our API are using HTTP(s) as URI scheme.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In API that contain any hypertext controls, the attribute name <code>href</code> is
reserved for usage within hypertext controls.</p>
</div>
<div class="paragraph">
<p>The schema for hypertext controls can be derived from this model:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">HttpLink</span>:
  <span class="key">description</span>: <span class="string"><span class="content">A base type of objects representing links to resources.</span></span>
  <span class="key">type</span>: <span class="string"><span class="content">object</span></span>
  <span class="key">properties</span>:
    <span class="key">href</span>:
      <span class="key">description</span>: <span class="string"><span class="content">Any URI that is using http or https protocol</span></span>
      <span class="key">type</span>: <span class="string"><span class="content">string</span></span>
      <span class="key">format</span>: <span class="string"><span class="content">uri</span></span>
  <span class="key">required</span>: <span class="string"><span class="content">[ &quot;href&quot; ]</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The name of an attribute holding such a <code>HttpLink</code> object specifies the
relation between the object that contains the link and the linked
resource. Implementations should use names from the
<a href="http://www.iana.org/assignments/link-relations/link-relations.xhtml">IANA
Link Relation Registry</a> whenever appropriate. As IANA link relation
names use hyphen-case notation, while this guide enforces snake_case
notation for attribute names, hyphens in IANA names have to be replaced
with underscores (e.g. the IANA link relation type <code>version-history</code>
would become the attribute <code>version_history</code>)</p>
</div>
<div class="paragraph">
<p>Specific link objects may extend the basic link type with additional
attributes, to give additional information related to the linked
resource or the relationship between the source resource and the linked
one.</p>
</div>
<div class="paragraph">
<p>E.g. a service providing "Person" resources could model a person who is
married with some other person with a hypertext control that contains
attributes which describe the other person (<code>id</code>, <code>name</code>) but also the
relationship "spouse" between the two persons (<code>since</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">446f9876-e89b-12d3-a456-426655440000</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Peter Mustermann</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">spouse</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">href</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">https://...</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">since</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">1996-12-19</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">123e4567-e89b-12d3-a456-426655440000</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Linda Mustermann</span><span class="delimiter">&quot;</span></span>
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Hypertext controls are allowed anywhere within a JSON model. While this
specification would allow
<a href="http://stateless.co/hal_specification.html">HAL</a>, we actually don&#8217;t
recommend/enforce the usage of HAL anymore as the structural separation
of meta-data and data creates more harm than value to the
understandability and usability of an API.</p>
</div>
</div>
<div class="sect2">
<h3 id="165"><a class="link" href="#165"><span class="should-keyword"><strong>Should</strong></span>: Use Simple Hypertext Controls for Pagination and Self-References</a></h3>
<div class="paragraph">
<p>Hypertext controls for pagination inside collections and self-references
should use a simple URI value in combination with their corresponding
<a href="http://www.iana.org/assignments/link-relations/link-relations.xml">link
relations</a> (<code>next</code>, <code>prev</code>, <code>first</code>, <code>last</code>, <code>self</code>) instead of the
extensible common hypertext control</p>
</div>
<div class="paragraph">
<p>See <a href="#pagination">Pagination</a> for information how to best represent paginateable collections.</p>
</div>
</div>
<div class="sect2">
<h3 id="166"><a class="link" href="#166"><span class="must-keyword"><strong>Must</strong></span>: Not Use Link Headers with JSON entities</a></h3>
<div class="paragraph">
<p>We don&#8217;t allow the use of the
<a href="http://tools.ietf.org/html/rfc5988#section-5"><code>Link</code> Header defined by
RFC 5988</a> in conjunction with JSON media types. We prefer links directly
embedded in JSON payloads to the uncommon link header syntax.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="data-formats"><a class="link" href="#data-formats">16. Data Formats</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="167"><a class="link" href="#167"><span class="must-keyword"><strong>Must</strong></span>: Use JSON to Encode Structured Data</a></h3>
<div class="paragraph">
<p>Use JSON-encoded body payload for transferring structured data. The JSON
payload must follow <a href="https://tools.ietf.org/html/rfc7159">RFC-7159</a> by
having (if possible) a serialized object as the top-level structure,
since it would allow for future extension. This also applies for
collection resources where one naturally would assume an array. See <a href="#161"><span class="may-keyword"><strong>May</strong></span>: Use Pagination Links Where Applicable</a> for
an example.</p>
</div>
</div>
<div class="sect2">
<h3 id="168"><a class="link" href="#168"><span class="may-keyword"><strong>May</strong></span>: Use non JSON Media Types for Binary Data or Alternative Content Representations</a></h3>
<div class="paragraph">
<p>Other media types may be used in following cases:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Transferring binary data or data whose structure is not relevant. This is
the case if payload structure is not interpreted and consumed by clients as is.
Example of such use case is downloading images in formats JPG, PNG, GIF.</p>
</li>
<li>
<p>In addition to JSON version alternative data representations (e.g. in
formats PDF, DOC, XML) may be made available through content
negotiation.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="172"><a class="link" href="#172"><span class="should-keyword"><strong>Should</strong></span>: Prefer standard Media type name <code>application/json</code></a></h3>
<div class="paragraph">
<p>Previously, this guideline allowed the use of custom media types like
<code>application/x.zalando.article+json</code>. This usage is not recommended
anymore and should be avoided, except where it is necessary for cases of
<a href="#114">media type versioning</a>. Instead, just use the standard media type name
<code>application/json</code> (or <code>application/problem+json</code> for <a href="#176"><span class="must-keyword"><strong>Must</strong></span>: Use Problem JSON</a>).</p>
</div>
<div class="paragraph">
<p>Custom media types beginning with <code>x</code> bring no advantage
compared to the standard media type for JSON, and make automated
processing more difficult. They are also
<a href="https://tools.ietf.org/html/rfc6838#section-3.4">discouraged by RFC
6838</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="169"><a class="link" href="#169"><span class="must-keyword"><strong>Must</strong></span>: Use Standard Date and Time Formats</a></h3>
<div class="sect3">
<h4 id="json-payload"><a class="link" href="#json-payload">JSON Payload</a></h4>
<div class="paragraph">
<p>Read more about date and time format in <a href="#126"><span class="should-keyword"><strong>Should</strong></span>: Date property values should conform to RFC 3339</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="http-headers"><a class="link" href="#http-headers">HTTP headers</a></h4>
<div class="paragraph">
<p>Http headers including the proprietary headers use the
<a href="http://tools.ietf.org/html/rfc7231#section-7.1.1.1">HTTP date format
defined in RFC 7231</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="170"><a class="link" href="#170"><span class="may-keyword"><strong>May</strong></span>: Use Standards for Country, Language and Currency Codes</a></h3>
<div class="paragraph">
<p>Use the following standard formats for country, language and currency
codes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2">ISO 3166-1-alpha2
country codes</a></p>
<div class="ulist">
<ul>
<li>
<p>(It is "GB", not "UK", even though "UK" has seen some use at Zalando)</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes">ISO 639-1
language code</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="https://tools.ietf.org/html/bcp47">BCP-47</a> (based on ISO 639-1) for
language variants</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/ISO_4217">ISO 4217 currency codes</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="171"><a class="link" href="#171"><span class="must-keyword"><strong>Must</strong></span>: Define Format for Type Number and Integer</a></h3>
<div class="paragraph">
<p>Whenever an API defines a property of type <code>number</code> or <code>integer</code>, the
precision must be defined by the format as follows to prevent clients
from guessing the precision incorrectly, and thereby changing the value
unintentionally:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15%;">
<col style="width: 15%;">
<col style="width: 70%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">type</th>
<th class="tableblock halign-left valign-top">format</th>
<th class="tableblock halign-left valign-top">specified value range</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer between -2<sup>31</sup> and 2<sup>31</sup>-1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer between -2<sup>63</sup> and 2<sup>63</sup>-1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bigint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">arbitrarily large signed integer number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">float</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IEEE 754-2008/ISO 60559:2011 binary64 decimal number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IEEE 754-2008/ISO 60559:2011 binary128 decimal number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">decimal</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">arbitrarily precise signed decimal number</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The precision must be translated by clients and servers into the most
specific language types. E.g. for the following definitions the most
specific language types in Java will translate to <code>BigDecimal</code> for
<code>Money.amount</code> and <code>int</code> or <code>Integer</code> for the <code>OrderList.page_size</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">Money</span>:
  <span class="key">type</span>: <span class="string"><span class="content">object</span></span>
  <span class="key">properties</span>:
    <span class="key">amount</span>:
      <span class="key">type</span>: <span class="string"><span class="content">number</span></span>
      <span class="key">description</span>: <span class="string"><span class="content">Amount expressed as a decimal number of major currency units</span></span>
      <span class="key">format</span>: <span class="string"><span class="content">decimal</span></span>
      <span class="key">example</span>: <span class="string"><span class="content">99.95</span></span>
   <span class="error">...</span>

<span class="key">OrderList</span>:
  <span class="key">type</span>: <span class="string"><span class="content">object</span></span>
  <span class="key">properties</span>:
    <span class="key">page_size</span>:
      <span class="key">type</span>: <span class="string"><span class="content">integer</span></span>
      <span class="key">description</span>: <span class="string"><span class="content">Number of orders in list</span></span>
      <span class="key">format</span>: <span class="string"><span class="content">int32</span></span>
      <span class="key">example</span>: <span class="string"><span class="content">42</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="common-data-types"><a class="link" href="#common-data-types">17. Common Data Types</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Definitions of data objects that are good candidates for wider usage:</p>
</div>
<div class="sect2">
<h3 id="173"><a class="link" href="#173"><span class="should-keyword"><strong>Should</strong></span>: Use a Common Money Object</a></h3>
<div class="paragraph">
<p>Use the following common money structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">Money</span>:
  <span class="key">type</span>: <span class="string"><span class="content">object</span></span>
  <span class="key">properties</span>:
    <span class="key">amount</span>:
      <span class="key">type</span>: <span class="string"><span class="content">number</span></span>
      <span class="key">description</span>: <span class="string"><span class="content">Amount expressed as a decimal number of major currency units</span></span>
      <span class="key">format</span>: <span class="string"><span class="content">decimal</span></span>
      <span class="key">example</span>: <span class="string"><span class="content">99.95</span></span>
    <span class="key">currency</span>:
      <span class="key">type</span>: <span class="string"><span class="content">string</span></span>
      <span class="key">description</span>: <span class="string"><span class="content">3 letter currency code as defined by ISO-4217</span></span>
      <span class="key">format</span>: <span class="string"><span class="content">iso-4217</span></span>
      <span class="key">example</span>: <span class="string"><span class="content">EUR</span></span>
  <span class="key">required</span>:
    - <span class="string"><span class="content">amount</span></span>
    - <span class="string"><span class="content">currency</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The decimal values for "amount" describe unit and subunit of the
currency in a single value, where the digits before the decimal point
are for the major unit and the digits after the decimal point are for
the minor unit. Note that some business cases (e.g. transactions in
Bitcoin) call for a higher precision, so applications must be prepared
to accept values with unlimited precision, unless explicitly stated
otherwise in the API specification. Examples for correct representations
(in EUR):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>42.20</code> or <code>42.2</code> = 42 Euros, 20 Cent</p>
</li>
<li>
<p><code>0.23</code> = 23 Cent</p>
</li>
<li>
<p><code>42.0</code> or <code>42</code> = 42 Euros</p>
</li>
<li>
<p><code>1024.42</code> = 1024 Euros, 42 Cent</p>
</li>
<li>
<p><code>1024.4225</code> = 1024 Euros, 42.25 Cent</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Make sure that you dont convert the "amount" field to <code>float</code> /
<code>double</code> types when implementing this interface in a specific language
or when doing calculations. Otherwise, you might lose precision.
Instead, use exact formats like Javas
<a href="https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html"><code>BigDecimal</code></a>.
See <a href="http://stackoverflow.com/a/3730040/342852">Stack Overflow</a> for more
info.</p>
</div>
<div class="paragraph">
<p>Some JSON parsers (NodeJSs, for example) convert numbers to floats by
default. After discussing the pros and cons weve decided on "decimal" as our amount format. It
is not a standard OpenAPI format, but should help us to avoid parsing numbers
as float / doubles.</p>
</div>
</div>
<div class="sect2">
<h3 id="174"><a class="link" href="#174"><span class="must-keyword"><strong>Must</strong></span>: Use common field names and semantics</a></h3>
<div class="paragraph">
<p>There exist a variety of field types that are required in multiple
places. To achieve consistency across all API implementations, you must
use common field names and semantics whenever applicable.</p>
</div>
<div class="sect3">
<h4 id="generic-fields"><a class="link" href="#generic-fields">Generic Fields</a></h4>
<div class="paragraph">
<p>There are some data fields that come up again and again in API data:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>id</code>: the identity of the object. If used, IDs must be opaque strings and
not numbers. IDs are unique within some documented context, are stable
and don&#8217;t change for a given object once assigned, and are never
recycled cross entities.</p>
</li>
<li>
<p><code>xyzId</code>: an attribute within one object holding the identifier of
another object must use a name that corresponds to the type of the
referenced object or the relationship to the referenced object followed
by <code>Id</code> (e.g. <code>customerId</code> not <code>customerNumber</code>; <code>parentNodeId</code> for
the reference to a parent node from a child node, even if both have the
type <code>Node</code>)</p>
</li>
<li>
<p><code>createdAt</code>: when the object was created. If used, this must be a
<code>date-time</code> construct.</p>
</li>
<li>
<p><code>modifiedAt</code>: when the object was updated. If used, this must be a
<code>date-time</code> construct.</p>
</li>
<li>
<p><code>type</code>: the kind of thing this object is. If used, the type of this
field should be a string. Types allow runtime information on the entity
provided that otherwise requires examining the Open API file.</p>
</li>
<li>
<p><code>etag</code>: the <a href="#182">ETag</a> of an <a href="#158">embedded sub-resource</a>.
It may be used to carry the ETag for subsequent PUT calls (see <a href="#etag-in-result-entities">ETags in result entities</a>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example JSON schema:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">treeNode</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">object</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content"> the identifier of this node</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>
      },
      <span class="key"><span class="delimiter">&quot;</span><span class="content">createdAt</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">format</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">date-time</span><span class="delimiter">&quot;</span></span>
      },
      <span class="key"><span class="delimiter">&quot;</span><span class="content">modifiedAt</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">when got this node last updated</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">format</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">date-time</span><span class="delimiter">&quot;</span></span>
      },
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">enum</span><span class="delimiter">&quot;</span></span>: [
          <span class="string"><span class="delimiter">&quot;</span><span class="content">LEAF</span><span class="delimiter">&quot;</span></span>,
          <span class="string"><span class="delimiter">&quot;</span><span class="content">NODE</span><span class="delimiter">&quot;</span></span>
        ]
      },
      <span class="key"><span class="delimiter">&quot;</span><span class="content">parentNodeId</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">the identifier of the parent node of this node</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>
      }
    },
    <span class="key"><span class="delimiter">&quot;</span><span class="content">example</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">123435</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">created</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2017-04-12T23:20:50.52Z</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">modified</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2017-04-12T23:20:50.52Z</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">LEAF</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">parent_node_id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">534321</span><span class="delimiter">&quot;</span></span>
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>These properties are not always strictly necessary, but making them
idiomatic allows API client developers to build up a common
understanding of Zalando&#8217;s resources. There is very little utility for
API consumers in having different names or value types for these fields
across APIs.</p>
</div>
</div>
<div class="sect3">
<h4 id="address-fields"><a class="link" href="#address-fields">Address Fields</a></h4>
<div class="paragraph">
<p>Address structures play a role in different functional and use-case
contexts, including country variances. All attributes that relate to
address information should follow the naming and semantics defined
below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">addressee</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">a (natural or legal) person that gets addressed</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">object</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">salutation</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">a salutation and/or title used for personal contacts to some</span><span class="char">\n</span><span class="content">addressee; not to be confused with the gender information!</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">example</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Mr</span><span class="delimiter">&quot;</span></span>
      },
      <span class="key"><span class="delimiter">&quot;</span><span class="content">first_name</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">given name(s) or first name(s) of a person; may also include the</span><span class="char">\n</span><span class="content">middle names.</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">example</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Hans Dieter</span><span class="delimiter">&quot;</span></span>
      },
      <span class="key"><span class="delimiter">&quot;</span><span class="content">last_name</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">family name(s) or surname(s) of a person</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">example</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Mustermann</span><span class="delimiter">&quot;</span></span>
      },
      <span class="key"><span class="delimiter">&quot;</span><span class="content">business_name</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">company name of the business organization. Used when a business is</span><span class="char">\n</span><span class="content">the actual addressee; for personal shipments to office addresses, use</span><span class="char">\n</span><span class="content">`care_of` instead.</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">example</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Consulting Services GmbH</span><span class="delimiter">&quot;</span></span>
      }
    },
    <span class="key"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: [
      <span class="string"><span class="delimiter">&quot;</span><span class="content">first_name</span><span class="delimiter">&quot;</span></span>,
      <span class="string"><span class="delimiter">&quot;</span><span class="content">last_name</span><span class="delimiter">&quot;</span></span>
    ]
  },
  <span class="key"><span class="delimiter">&quot;</span><span class="content">address</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">an address of a location/destination</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">object</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">properties</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">care_of</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">(aka c/o) the person that resides at the address, if different from</span><span class="char">\n</span><span class="content">addressee. E.g. used when sending a personal parcel to the</span><span class="char">\n</span><span class="content">office /someone else's home where the addressee resides temporarily</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">example</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Consulting Services GmbH</span><span class="delimiter">&quot;</span></span>
      },
      <span class="key"><span class="delimiter">&quot;</span><span class="content">street</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">the full street address including house number and street name</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">example</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Schnhauser Allee 103</span><span class="delimiter">&quot;</span></span>
      },
      <span class="key"><span class="delimiter">&quot;</span><span class="content">additional</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">further details like building name, suite, apartment number, etc.</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">example</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">2. Hinterhof rechts</span><span class="delimiter">&quot;</span></span>
      },
      <span class="key"><span class="delimiter">&quot;</span><span class="content">city</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">name of the city / locality</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">example</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Berlin</span><span class="delimiter">&quot;</span></span>
      },
      <span class="key"><span class="delimiter">&quot;</span><span class="content">zip</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">zip code or postal code</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">example</span><span class="delimiter">&quot;</span></span>: <span class="integer">14265</span>
      },
      <span class="key"><span class="delimiter">&quot;</span><span class="content">country_code</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">the country code according to</span><span class="char">\n</span><span class="content">[iso-3166-1-alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2)</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">example</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">DE</span><span class="delimiter">&quot;</span></span>
      }
    },
    <span class="key"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: [
      <span class="string"><span class="delimiter">&quot;</span><span class="content">street</span><span class="delimiter">&quot;</span></span>,
      <span class="string"><span class="delimiter">&quot;</span><span class="content">city</span><span class="delimiter">&quot;</span></span>,
      <span class="string"><span class="delimiter">&quot;</span><span class="content">zip</span><span class="delimiter">&quot;</span></span>,
      <span class="string"><span class="delimiter">&quot;</span><span class="content">country_code</span><span class="delimiter">&quot;</span></span>
    ]
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Grouping and cardinality of fields in specific data types may vary based
on the specific use case (e.g. combining addressee and address fields
into a single type when modeling an address label vs distinct addressee
and address types when modeling users and their addresses).</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="common-headers"><a class="link" href="#common-headers">18. Common Headers</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes a handful of headers, which we found raised the
most questions in our daily usage, or which are useful in particular
circumstances but not widely known.</p>
</div>
<div class="sect2">
<h3 id="178"><a class="link" href="#178"><span class="must-keyword"><strong>Must</strong></span>: Use Content Headers Correctly</a></h3>
<div class="paragraph">
<p>Content or entity headers are headers with a <code>Content-</code> prefix. They
describe the content of the body of the message and they can be used in
both, HTTP requests and responses. Commonly used content headers include
but are not limited to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://tools.ietf.org/html/rfc6266"><code>Content-Disposition</code></a> can
indicate that the representation is supposed to be saved as a file, and
the proposed file name.</p>
</li>
<li>
<p><a href="https://tools.ietf.org/html/rfc7231#section-3.1.2.2"><code>Content-Encoding</code></a>
indicates compression or encryption algorithms applied to the content.</p>
</li>
<li>
<p><a href="https://tools.ietf.org/html/rfc7230#section-3.3.2"><code>Content-Length</code></a>
indicates the length of the content (in bytes).</p>
</li>
<li>
<p><a href="https://tools.ietf.org/html/rfc7231#section-3.1.3.2"><code>Content-Language</code></a>
indicates that the body is meant for people literate in some human
language(s).</p>
</li>
<li>
<p><a href="https://tools.ietf.org/html/rfc7231#section-3.1.4.2"><code>Content-Location</code></a>
indicates where the body can be found otherwise
(<a href="#179"><span class="may-keyword"><strong>May</strong></span>: Use Content-Location Header</a> for more details]).</p>
</li>
<li>
<p><a href="https://tools.ietf.org/html/rfc7233#section-4.2"><code>Content-Range</code></a> is
used in responses to range requests to indicate which part of the
requested resource representation is delivered with the body.</p>
</li>
<li>
<p><a href="https://tools.ietf.org/html/rfc7231#section-3.1.1.5"><code>Content-Type</code></a>
indicates the media type of the body content.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="133"><a class="link" href="#133"><span class="may-keyword"><strong>May</strong></span>: Use Standardized Headers</a></h3>
<div class="paragraph">
<p>Use <a href="http://en.wikipedia.org/wiki/List_of_HTTP_header_fields">this list</a>
and mention its support in your OpenAPI definition.</p>
</div>
</div>
<div class="sect2">
<h3 id="179"><a class="link" href="#179"><span class="may-keyword"><strong>May</strong></span>: Use Content-Location Header</a></h3>
<div class="paragraph">
<p>The Content-Location header is <em>optional</em> and can be used in successful
write operations (PUT, POST or PATCH) or read operations (GET, HEAD) to
guide caching and signal a receiver the actual location of the resource
transmitted in the response body. This allows clients to identify the
resource and to update their local copy when receiving a response with
this header.</p>
</div>
<div class="paragraph">
<p>The Content-Location header can be used to support the following use
cases:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For reading operations GET and HEAD, a different location than the
requested URI can be used to indicate that the returned resource is
subject to content negotiations, and that the value provides a more
specific identifier of the resource.</p>
</li>
<li>
<p>For writing operations PUT and PATCH, an identical location to the
requested URI can be used to explicitly indicate that the returned
resource is the current representation of the newly created or updated
resource.</p>
</li>
<li>
<p>For writing operations POST and DELETE, a content location can be used
to indicate that the body contains a status report resource in response
to the requested action, which is available at provided location.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Note</strong>: When using the Content-Location header, the Content-Type header
has to be set as well. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="http">GET /products/123/images HTTP/1.1

HTTP/1.1 200 OK
Content-Type: image/png
Content-Location: /products/123/images?format=raw</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="180"><a class="link" href="#180"><span class="should-keyword"><strong>Should</strong></span>: Use Location Header instead of Content-Location Header</a></h3>
<div class="paragraph">
<p>As the correct usage of Content-Location with respect to semantics and
caching is difficult, we <em>discourage</em> the use of Content-Location. In
most cases it is sufficient to direct clients to the resource location
by using the Location header instead without hitting the
Content-Location specific ambiguities and complexities.</p>
</div>
<div class="paragraph">
<p>More details in RFC 7231
<a href="https://tools.ietf.org/html/rfc7231#section-7.1.2">7.1.2 Location</a>,
<a href="https://tools.ietf.org/html/rfc7231#section-3.1.4.2">3.1.4.2
Content-Location</a></p>
</div>
</div>
<div class="sect2">
<h3 id="181"><a class="link" href="#181"><span class="may-keyword"><strong>May</strong></span>: Use the Prefer header to indicate processing preferences</a></h3>
<div class="paragraph">
<p>The <code>Prefer</code> header defined in
<a href="https://tools.ietf.org/html/rfc7240">RFC7240</a> allows clients to request
processing behaviors from servers.
<a href="https://tools.ietf.org/html/rfc7240">RFC7240</a> pre-defines a number of
preferences and is extensible, to allow others to be defined. Support
for the Prefer header is entirely optional and at the discretion of API
designers, but as an existing Internet Standard, is recommended over
defining proprietary "X-" headers for processing directives.</p>
</div>
<div class="paragraph">
<p>The <code>Prefer</code> header can defined like this in an API definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">Prefer</span>:
  <span class="key">name</span>: <span class="string"><span class="content">Prefer</span></span>
  <span class="key">description</span>: <span class="string"><span class="delimiter">|</span><span class="content">
    The RFC7240 Prefer header indicates that particular server
    behaviors are preferred by the client but are not required
    for successful completion of the request.
    # (indicate the preferences supported by the API)</span></span>

  <span class="key">in</span>: <span class="string"><span class="content">header</span></span>
  <span class="key">type</span>: <span class="string"><span class="content">string</span></span>
  <span class="key">required</span>: <span class="string"><span class="content">false</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Supporting APIs may return the <code>Preference-Applied</code> header also defined
in <a href="https://tools.ietf.org/html/rfc7240">RFC7240</a> to indicate whether the
preference was applied.</p>
</div>
</div>
<div class="sect2">
<h3 id="182"><a class="link" href="#182"><span class="may-keyword"><strong>May</strong></span>: Consider Using ETag Together With If-Match/If-None-Match Header</a></h3>
<div class="paragraph">
<p>When creating or updating resources it may be necessary to expose
conflicts and to prevent the 'lost update' or 'initially created' problem.
Following <a href="https://tools.ietf.org/html/rfc7232">RFC 7232 "HTTP: Conditional Requests"</a>
this can be best accomplished by using the
<a href="https://tools.ietf.org/html/rfc7232#section-2.3"><code>ETag</code></a> header together
with the <a href="https://tools.ietf.org/html/rfc7232#section-3.1"><code>If-Match</code></a> or
<a href="https://tools.ietf.org/html/rfc7232#section-3.2"><code>If-None-Match</code></a> conditional header. The
contents of an <code>ETag: &lt;entity-tag&gt;</code> header is either (a) a hash of the
response body, (b) a hash of the last modified field of the entity, or
(c) a version number or identifier of the entity version.</p>
</div>
<div class="paragraph">
<p>To expose conflicts between concurrent update operations via PUT, POST,
or PATCH, the <code>If-Match: &lt;entity-tag&gt;</code> header can be used to force the
server to check whether the version of the updated entity is conforming
to the requested <code>&lt;entity-tag&gt;</code>. If no matching entity is found, the
operation is supposed a to respond with status code 412 - precondition
failed.</p>
</div>
<div class="paragraph">
<p>Beside other use cases, the <code>If-None-Match:</code> header with parameter <code>*</code>
can be used in a similar way to expose conflicts in resource creation.
If any matching entity is found, the operation is supposed a to respond
with status code 412 - precondition failed.</p>
</div>
<div class="paragraph">
<p>The <code>ETag</code>, <code>If-Match</code>, and <code>If-None-Match</code> headers can be defined as
follows in the API definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">ETag</span>:
  <span class="key">name</span>: <span class="string"><span class="content">ETag</span></span>
  <span class="key">description</span>: <span class="string"><span class="delimiter">|</span><span class="content">
    The RFC7232 ETag header field in a response provides the current entity-
    tag for the selected resource. An entity-tag is an opaque identifier for
    different versions of a resource over time, regardless whether multiple
    versions are valid at the same time. An entity-tag consists of an opaque
    quoted string, possibly prefixed by a weakness indicator.</span></span>

  <span class="key">in</span>: <span class="string"><span class="content">header</span></span>
  <span class="key">type</span>: <span class="string"><span class="content">string</span></span>
  <span class="key">required</span>: <span class="string"><span class="content">false</span></span>
  <span class="key">example</span>: <span class="string"><span class="content">W/&quot;xy&quot;, &quot;5&quot;, &quot;7da7a728-f910-11e6-942a-68f728c1ba70&quot;</span></span>

<span class="key">IfMatch</span>:
  <span class="key">name</span>: <span class="string"><span class="content">If-Match</span></span>
  <span class="key">description</span>: <span class="string"><span class="delimiter">|</span><span class="content">
    The RFC7232 If-Match header field in a request requires the server to
    only operate on the resource that matches at least one of the provided
    entity-tags. This allows clients express a precondition that prevent
    the method from being applied if there have been any changes to the
    resource.</span></span>

  <span class="key">in</span>: <span class="string"><span class="content">header</span></span>
  <span class="key">type</span>: <span class="string"><span class="content">string</span></span>
  <span class="key">required</span>: <span class="string"><span class="content">false</span></span>
  <span class="key">example</span>:  <span class="string"><span class="delimiter">&quot;</span><span class="content">5</span><span class="delimiter">&quot;</span></span><span class="string"><span class="content">, &quot;7da7a728-f910-11e6-942a-68f728c1ba70&quot;</span></span>

<span class="key">IfNoneMatch</span>:
  <span class="key">name</span>: <span class="string"><span class="content">If-None-Match</span></span>
  <span class="key">description</span>: <span class="string"><span class="delimiter">|</span><span class="content">
    The RFC7232 If-None-Match header field in a request requires the server
    to only operate on the resource if it does not match any of the provided
    entity-tags. If the provided entity-tag is `*`, it is required that the
    resource does not exist at all.</span></span>

  <span class="key">in</span>: <span class="string"><span class="content">header</span></span>
  <span class="key">type</span>: <span class="string"><span class="content">string</span></span>
  <span class="key">required</span>: <span class="string"><span class="content">false</span></span>
  <span class="key">example</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">7da7a728-f910-11e6-942a-68f728c1ba70</span><span class="delimiter">&quot;</span></span><span class="string"><span class="content">, *</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Please also see the section <a href="#optimistic-locking">Optimistic Locking in RESTful APIs</a> for a discussion about alternative approaches.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="api-operation"><a class="link" href="#api-operation">19. API Operation</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="192"><a class="link" href="#192"><span class="must-keyword"><strong>Must</strong></span>: Publish OpenAPI Specification</a></h3>
<div class="paragraph">
<p>All service applications must publish OpenAPI specifications of their external
APIs. While this is optional for internal APIs, i.e. APIs marked with the
<strong>component-internal</strong> <a href="#219">API audience</a> group, we still recommend to do so
to profit from the API management infrastructure.</p>
</div>
<div class="paragraph">
<p>An API is published by copying its <strong>OpenAPI specification</strong> into the reserved
<strong>/zalando-apis</strong> directory of the <strong>deployment artifact</strong> used to deploy the
provisioning service. The directory must only contain <strong>self-contained YAML</strong>
<strong>files</strong> that each describe one API. We prefer this deployment artifact-based method over the
past (now legacy) <code>.well-known/schema-discovery</code> service endpoint-based
publishing process, that we only support for backward compatibility reasons.</p>
</div>
<div class="paragraph">
<p>Background: In our dynamic and complex service infrastructure, it is important
to provide API client developers a central place with online access to the API
specifications of all running applications. As a part of the infrastructure,
the API publishing process is used to detect API specifications. The findings
are published in the API Portal - the universal hub for all Zalando APIs.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> To publish an API, it is still necessary to deploy the artifact
successful, as we focus the discovery experience on APIs supported by running
services.</p>
</div>
</div>
<div class="sect2">
<h3 id="193"><a class="link" href="#193"><span class="should-keyword"><strong>Should</strong></span>: Monitor API Usage</a></h3>
<div class="paragraph">
<p>Owners of APIs used in production should monitor API service to get
information about its using clients. This information, for instance, is
useful to identify potential review partner for API changes.</p>
</div>
<div class="paragraph">
<p>Hint: A preferred way of client detection implementation is by logging
of the client-id retrieved from the OAuth token.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="appendix-references"><a class="link" href="#appendix-references">Appendix A: References</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section collects links to documents to which we refer, and base our guidelines on.</p>
</div>
<div class="sect2">
<h3 id="openapi-specification"><a class="link" href="#openapi-specification">OpenAPI Specification</a></h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/OAI/OpenAPI-Specification/">OpenAPI Specification</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="publications-specifications-and-standards"><a class="link" href="#publications-specifications-and-standards">Publications, specifications and standards</a></h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://tools.ietf.org/html/rfc3339">RFC 3339: Date and Time on the Internet: Timestamps</a></p>
</li>
<li>
<p><a href="https://tools.ietf.org/html/rfc5988">RFC 5988: Web Linking</a></p>
</li>
<li>
<p><a href="https://tools.ietf.org/html/rfc7159">RFC 7159: The JavaScript Object Notation (JSON) Data Interchange Format</a></p>
</li>
<li>
<p><a href="https://tools.ietf.org/html/rfc7230">RFC 7230: Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing</a></p>
</li>
<li>
<p><a href="https://tools.ietf.org/html/rfc7231">RFC 7231: Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content</a></p>
</li>
<li>
<p><a href="https://tools.ietf.org/html/rfc7807">RFC 7807: Problem Details for HTTP APIs</a></p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601: Date and time format</a></p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2">ISO 3166-1 alpha-2: Two letter country codes</a></p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes">ISO 639-1: Two letter language codes</a></p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/ISO_4217">ISO 4217: Currency codes</a></p>
</li>
<li>
<p><a href="https://tools.ietf.org/html/bcp47">BCP 47: Tags for Identifying Languages</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="dissertations"><a class="link" href="#dissertations">Dissertations</a></h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm">Roy Thomas Fielding - Architectural Styles and the Design of Network-Based Software Architectures</a>. This is the text which defines what REST is.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="books"><a class="link" href="#books">Books</a></h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://www.amazon.de/REST-Practice-Hypermedia-Systems-Architecture/dp/0596805829">REST in Practice: Hypermedia and Systems Architecture</a></p>
</li>
<li>
<p><a href="https://leanpub.com/build-apis-you-wont-hate">Build APIs You Won&#8217;t Hate</a></p>
</li>
<li>
<p><a href="http://www.infoq.com/minibooks/emag-web-api">InfoQ eBook - Web APIs: From Start to Finish</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="blogs"><a class="link" href="#blogs">Blogs</a></h3>
<div class="ulist">
<ul>
<li>
<p><a href="http://restful-api-design.readthedocs.org/en/latest/">Lessons-learned blog: Thoughts on RESTful API Design</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="appendix-tooling"><a class="link" href="#appendix-tooling">Appendix B: Tooling</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is not a part of the actual guidelines, but might be helpful for following them.
Using a tool mentioned here doesn&#8217;t automatically ensure you follow the guidelines.</p>
</div>
<div class="sect2">
<h3 id="api-first-integrations"><a class="link" href="#api-first-integrations">API First Integrations</a></h3>
<div class="paragraph">
<p>The following frameworks were specifically designed to support the API First workflow with OpenAPI YAML files (sorted alphabetically):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/zalando/connexion">Connexion: OpenAPI First framework for Python on top of Flask</a></p>
</li>
<li>
<p><a href="https://github.com/zalando-stups/friboo">Friboo: utility library to write microservices in Clojure with support for Swagger and OAuth</a></p>
</li>
<li>
<p><a href="https://github.com/zalando/api-first-hand">Api-First-Hand: API-First Play Bootstrapping Tool for Swagger/OpenAPI specs</a></p>
</li>
<li>
<p><a href="https://github.com/swagger-api/swagger-codegen">Swagger Codegen: template-driven engine to generate client code in different languages by parsing Swagger Resource Declaration</a></p>
</li>
<li>
<p><a href="https://github.com/zalando-stups/swagger-codegen-tooling">Swagger Codegen Tooling: plugin for Maven that generates pieces of code from
OpenAPI specification</a></p>
</li>
<li>
<p><a href="https://github.com/zalando/intellij-swagger">Swagger Plugin for IntelliJ IDEA: plugin to help you easily edit Swagger specification
files inside IntelliJ IDEA</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Swagger/OpenAPI homepage lists more
<a href="http://swagger.io/open-source-integrations/">Community-Driven Language Integrations</a>, but most of them do not fit our API First approach.</p>
</div>
</div>
<div class="sect2">
<h3 id="support-libraries"><a class="link" href="#support-libraries">Support Libraries</a></h3>
<div class="paragraph">
<p>These utility libraries support you in implementing various parts of our RESTful API guidelines (sorted alphabetically):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/zalando/problem">Problem: Java library that implements application/problem+json</a></p>
</li>
<li>
<p><a href="https://github.com/zalando/problem-spring-web">Problems for Spring Web MVC: library for handling Problems in Spring Web MVC</a></p>
</li>
<li>
<p><a href="https://github.com/zalando/jackson-datatype-money">Jackson Datatype Money: extension module to properly support datatypes of javax.money</a></p>
</li>
<li>
<p><a href="https://github.com/zalando-incubator/json-fields">JSON fields: framework for limiting fields of JSON objects exposed by Rest APIs</a></p>
</li>
<li>
<p><a href="https://github.com/zalando/tracer">Tracer: call tracing and log correlation in distributed systems</a></p>
</li>
<li>
<p><a href="https://github.com/zalando-stups/twintip-crawler">TWINTIP: API definition crawler for the STUPS ecosystem</a></p>
</li>
<li>
<p><a href="https://github.com/zalando/twintip-spring-web">TWINTIP Spring Integration: API discovery endpoint for Spring Web MVC</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="appendix-best-practices"><a class="link" href="#appendix-best-practices">Appendix C: Best Practices</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The best practices presented in this section are not part of the actual guidelines, but should provide guidance for common challenges we face when implementing RESTful APIs.</p>
</div>
<div class="sect2">
<h3 id="optimistic-locking"><a class="link" href="#optimistic-locking">Optimistic Locking in RESTful APIs</a></h3>
<div class="sect3">
<h4 id="_introduction"><a class="link" href="#_introduction">Introduction</a></h4>
<div class="paragraph">
<p>Optimistic locking might be used to avoid concurrent writes on the same entity, which might cause data loss.
A client always has to retrieve a copy of an entity first and specifically update this one.
If another version has been created in the meantime, the update should fail.
In order to make this work, the client has to provide some kind of version reference, which is checked by the service, before the update is executed.
Please see <a href="#put">the section about usage of the PUT method</a> for a more detailed description on how to update resources via PUT.</p>
</div>
<div class="paragraph">
<p>A RESTful API usually includes some kind of search endpoint, which will then return a list of result entities.
There are several ways to implement optimistic locking in combination with search endpoints which, depending on the approach chosen, might lead to performing additional requests to get the current version of the entity that should be updated.</p>
</div>
</div>
<div class="sect3">
<h4 id="_etag_header_with_if_match_header"><a class="link" href="#_etag_header_with_if_match_header">ETag header with If-Match header</a></h4>
<div class="paragraph">
<p>An ETag can only be obtained by performing a GET request on the single entity resource before the update, i.e. when using a search endpoint an additional request is necessary.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&lt; GET /orders

&gt; HTTP/1.1 200 OK
&gt; {
&gt;   "items": [
&gt;     { "id": "O0000042" },
&gt;     { "id": "O0000043" }
&gt;   ]
&gt; }

&lt; GET /orders/BO0000042

&gt; HTTP/1.1 200 OK
&gt; ETag: osjnfkjbnkq3jlnksjnvkjlsbf
&gt; { "id": "BO0000042", ... }

&lt; PUT /orders/O0000042
&lt; If-Match: osjnfkjbnkq3jlnksjnvkjlsbf
&lt; { "id": "O0000042", ... }

&gt; HTTP/1.1 204 No Content

or if there was an update since the GET and the entity's ETag has changed:

&gt; HTTP/1.1 412 Precondition failed</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_pros"><a class="link" href="#_pros">Pros</a></h5>
<div class="ulist">
<ul>
<li>
<p>RESTful solution</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_cons"><a class="link" href="#_cons">Cons</a></h5>
<div class="ulist">
<ul>
<li>
<p>Many additional requests are necessary to build a meaningful front-end</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="etag-in-result-entities"><a class="link" href="#etag-in-result-entities">ETags in result entities</a></h4>
<div class="paragraph">
<p>The ETag for every entity is returned as an additional property of that entity.
In a response containing multiple entities, every entity will then have a distinct ETag that can be used in subsequent PUT requests.</p>
</div>
<div class="paragraph">
<p>In this solution, the <code>etag</code> property should be <code>readonly</code> and never be expected in the PUT request
payload.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&lt; GET /orders

&gt; HTTP/1.1 200 OK
&gt; {
&gt;   "items": [
&gt;     { "id": "O0000042", "etag": "osjnfkjbnkq3jlnksjnvkjlsbf", "foo": 42, "bar": true },
&gt;     { "id": "O0000043", "etag": "kjshdfknjqlowjdsljdnfkjbkn", "foo": 24, "bar": false }
&gt;   ]
&gt; }

&lt; PUT /orders/O0000042
&lt; If-Match: osjnfkjbnkq3jlnksjnvkjlsbf
&lt; { "id": "O0000042", "foo": 43, "bar": true }

&gt; HTTP/1.1 204 No Content

or if there was an update since the GET and the entity's ETag has changed:

&gt; HTTP/1.1 412 Precondition failed</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_pros_2"><a class="link" href="#_pros_2">Pros</a></h5>
<div class="ulist">
<ul>
<li>
<p>Perfect optimistic locking</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_cons_2"><a class="link" href="#_cons_2">Cons</a></h5>
<div class="ulist">
<ul>
<li>
<p>Information that only belongs in the HTTP header is part of the business objects</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_version_numbers"><a class="link" href="#_version_numbers">Version numbers</a></h4>
<div class="paragraph">
<p>The entities contain a property with a version number. When an update is performed, this version
number is given back to the service as part of the payload. The service performs a check on that
version number to make sure it was not incremented since the consumer got the resource and performs
the update, incrementing the version number.</p>
</div>
<div class="paragraph">
<p>Since this operation implies a modification of the resource by the service, a POST operation on the
exact resource (ex: <code>POST /orders/O0000042</code>) should be used instead of a PUT (see <a href="#put">PUT</a>'s semantic).</p>
</div>
<div class="paragraph">
<p>In this solution, the <code>version</code> property is not <code>readonly</code> since it is provided at POST time as part of
the payload.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&lt; GET /orders

&gt; HTTP/1.1 200 OK
&gt; {
&gt;   "items": [
&gt;     { "id": "O0000042", "version": 1,  "foo": 42, "bar": true },
&gt;     { "id": "O0000043", "version": 42, "foo": 24, "bar": false }
&gt;   ]
&gt; }

&lt; POST /orders/O0000042
&lt; { "id": "O0000042", "version": 1, "foo": 43, "bar": true }

&gt; HTTP/1.1 204 No Content

or if there was an update since the GET and the version number in the database is higher than the one given in the request body:

&gt; HTTP/1.1 409 Conflict</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_pros_3"><a class="link" href="#_pros_3">Pros</a></h5>
<div class="ulist">
<ul>
<li>
<p>Perfect optimistic locking</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_cons_3"><a class="link" href="#_cons_3">Cons</a></h5>
<div class="ulist">
<ul>
<li>
<p>Functionality that belongs into the HTTP header becomes part of the business object</p>
</li>
<li>
<p>Using POST instead of PUT for an update logic (not a problem in itself, but may feel unusual for the consumer)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_last_modified_if_unmodified_since"><a class="link" href="#_last_modified_if_unmodified_since">Last-Modified / If-Unmodified-Since</a></h4>
<div class="paragraph">
<p>In HTTP 1.0 there was no ETag and the mechanism used for optimistic locking was based on a date.
This is still part of the HTTP protocol and can be used.
Every response contains a Last-Modified header with a HTTP date.
When requesting an update using a PUT request, the client has to provide this value via the header If-Unmodified-Since.
The server rejects the request, if the last modified date of the entity is after the given date in the header.</p>
</div>
<div class="paragraph">
<p>This effectively catches any situations where a change that happened between GET and PUT would be overwritten.
In the case of multiple result entities, the Last-Modified header will be set to the latest date of all the entities.
This ensures that any change to any of the entities that happens between GET and PUT will be detectable, without locking the rest of the batch as well.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>&lt; GET /orders

&gt; HTTP/1.1 200 OK
&gt; Last-Modified: Wed, 22 Jul 2009 19:15:56 GMT
&gt; {
&gt;   "items": [
&gt;     { "id": "O0000042", ... },
&gt;     { "id": "O0000043", ... }
&gt;   ]
&gt; }

&lt; PUT /block/O0000042
&lt; If-Unmodified-Since: Wed, 22 Jul 2009 19:15:56 GMT
&lt; { "id": "O0000042", ... }

&gt; HTTP/1.1 204 No Content

or if there was an update since the GET and the entities last modified is later than the given date:

&gt; HTTP/1.1 412 Precondition failed</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="_pros_4"><a class="link" href="#_pros_4">Pros</a></h5>
<div class="ulist">
<ul>
<li>
<p>Well established approach that has been working for a long time</p>
</li>
<li>
<p>No interference with the business objects; the locking is done via HTTP headers only</p>
</li>
<li>
<p>Very easy to implement</p>
</li>
<li>
<p>No additional request needed when updating an entity of a search endpoint result</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_cons_4"><a class="link" href="#_cons_4">Cons</a></h5>
<div class="ulist">
<ul>
<li>
<p>If a client communicates with two different instances and their clocks are not perfectly in sync, the locking could potentially fail</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_conclusion"><a class="link" href="#_conclusion">Conclusion</a></h4>
<div class="paragraph">
<p>We suggest to either use the <em>Last-Modified / If-Unmodified-Since</em> approach or <em>ETags in result entities</em>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="appendix-changelog"><a class="link" href="#appendix-changelog">Appendix D: Changelog</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This change log only contains major changes made after October 2016.</p>
</div>
<div class="paragraph">
<p>Non-major changes are editorial-only changes or minor changes of existing guidelines, e.g. adding new error code.
Major changes are changes that come with additional obligations, or even change an existing guideline obligation.
The latter changes are additionally labeled with "Rule Change" here.</p>
</div>
<div class="paragraph">
<p>To see a list of all changes, please have a look at the <a href="https://github.com/nifty10m/restful-api-guidelines/commits/master">commit list in Github</a>.</p>
</div>
<div class="sect2">
<h3 id="rule-changes"><a class="link" href="#rule-changes">Rule Changes</a></h3>
<div class="ulist">
<ul>
<li>
<p><code>2018-09-01:</code> Forked the Zalando API to create a separate version for 10M GmbH</p>
</li>
<li>
<p><code>2018-06-11:</code> Introduced new naming guidelines for host, permission, and event names.</p>
</li>
<li>
<p><code>2018-01-10:</code> Moved meta information related aspects into new chapter <a href="#meta-information">Meta Information</a>.</p>
</li>
<li>
<p><code>2018-01-09:</code> Changed publication requirements for API specifications (<a href="#192"><span class="must-keyword"><strong>Must</strong></span>: Publish OpenAPI Specification</a>).</p>
</li>
<li>
<p><code>2017-12-07:</code> Added best practices section including discussion about optimistic locking approaches.</p>
</li>
<li>
<p><code>2017-11-28:</code> Changed OAuth flow example from password to client credentials in <a href="#security">Security</a>.</p>
</li>
<li>
<p><code>2017-11-22:</code> Updated description of X-Tenant-ID header field</p>
</li>
<li>
<p><code>2017-08-22:</code> Migration to Asciidoc</p>
</li>
<li>
<p><code>2017-07-20:</code> Be more precise on client vs. server obligations for compatible API extensions.</p>
</li>
<li>
<p><code>2017-06-06:</code> Made money object guideline clearer.</p>
</li>
<li>
<p><code>2017-05-17:</code> Added guideline on query parameter collection format.</p>
</li>
<li>
<p><code>2017-05-10:</code> Added the convention of using RFC2119 to describe guideline levels, and replaced <code>book.could</code> with <code>book.may</code>.</p>
</li>
<li>
<p><code>2017-03-30:</code> Added rule that permissions on resources in events must correspond to permissions on API resources</p>
</li>
<li>
<p><code>2017-03-30:</code> Added rule that APIs should be modelled around business processes</p>
</li>
<li>
<p><code>2017-02-28:</code> Extended information about how to reference sub-resources and the usage of composite identifiers in the <a href="#143"><span class="must-keyword"><strong>Must</strong></span>: Identify resources and Sub-Resources via Path Segments</a>
part.</p>
</li>
<li>
<p><code>2017-02-22:</code> Added guidance for conditional requests with If-Match/If-None-Match</p>
</li>
<li>
<p><code>2017-02-02:</code> Added guideline for batch and bulk request</p>
</li>
<li>
<p><code>2017-02-01:</code> <a href="#180"><span class="should-keyword"><strong>Should</strong></span>: Use Location Header instead of Content-Location Header</a></p>
</li>
<li>
<p><code>2017-01-18:</code> Removed "Avoid Javascript Keywords" rule</p>
</li>
<li>
<p><code>2017-01-05:</code> Clarification on the usage of the term "REST/RESTful"</p>
</li>
<li>
<p><code>2016-12-07:</code> Introduced "API as a Product" principle</p>
</li>
<li>
<p><code>2016-12-06:</code> New guideline: "Should Only Use UUIDs If Necessary"</p>
</li>
<li>
<p><code>2016-12-04:</code> Changed OAuth flow example from implicit to password in <a href="#security">Security</a>.</p>
</li>
<li>
<p><code>2016-10-13:</code> <a href="#172"><span class="should-keyword"><strong>Should</strong></span>: Prefer standard Media type name <code>application/json</code></a></p>
</li>
<li>
<p><code>2016-10-10:</code> Introduced the changelog. From now on all rule changes on API guidelines will be recorded here.</p>
</li>
</ul>
</div>
<!-- Adds rule id as a postfix to all rule titles -->
<script>
var ruleIdRegEx = /(\d)+/;
var h3headers = document.getElementsByTagName("h3");
for (var i = 0; i < h3headers.length; i++) {
    var header = h3headers[i];
    if (header.id && header.id.match(ruleIdRegEx)) {
        var a = header.getElementsByTagName("a")[0]
        a.innerHTML += " [" + header.id + "]";
    }
}
</script>

<!-- Add table of contents anchor and remove document title -->
<script>
var toc = document.getElementById('toc');
var div = document.createElement('div');
div.id = 'table-of-contents';
toc.parentNode.replaceChild(div, toc);
div.appendChild(toc);
var ul = toc.childNodes[3];
ul.removeChild(ul.childNodes[1]);
</script>

<!-- Adds sidebar navigation -->
<script>
var header = document.getElementById('header');
var nav = document.createElement('div');
nav.id = 'toc';
nav.classList.add('toc2');
var title = document.createElement('div');
title.id = 'toctitle';

var link = document.createElement('a');
link.innerText = 'API Guidelines';
link.href = '#';

title.append(link);
nav.append(title);

var ul = document.createElement('ul');
ul.classList.add('sectlevel1');

var link = document.createElement('a');
link.innerHTML = 'Table of Contents';
link.href = '#table-of-contents';
li = document.createElement('li');
li.append(link);
ul.append(li);

var link, li;
var h2headers = document.getElementsByTagName('h2');
for (var i = 1; i < h2headers.length; i++) {
    var a = h2headers[i].getElementsByTagName("a")[0];
    if (a !== undefined) {
        link = document.createElement('a');
        link.innerHTML = a.innerHTML;
        link.href = a.hash;
        li = document.createElement('li');
        li.append(link);
        ul.append(li);
    }
}

document.body.classList.add('toc2');
document.body.classList.add('toc-left');
nav.append(ul);
header.prepend(nav);
</script>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Per definition of R.Fielding REST APIs have to support HATEOAS (maturity level 3). Our guidelines do not strongly advocate for full REST compliance, but limited hypermedia usage, e.g. for pagination (see <a href="#hypermedia">Hypermedia</a>). However, we still use the term "RESTful API", due to the absence of an alternative established term and to keep it like the very majority of web service industry that also use the term for their REST approximations  in fact, in today&#8217;s industry full HATEOAS compliant APIs are a very rare exception.
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-09-23 13:59:08 UTC
</div>
</div>
</body>
</html>